===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\AssemblyReference.cs
===============================
namespace sna_application;

public sealed class AssemblyReference {}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\GlobalUsings.cs
===============================
global using MediatR;
global using FluentValidation;
global using sna_application.Messages.Dtos;
global using sna_domain.Repositories;
global using Mapster;
global using Carter;
global using Microsoft.AspNetCore.Builder;
global using Microsoft.AspNetCore.Http;
global using Microsoft.AspNetCore.Routing;
global using sna_domain.Exceptions;
global using sna_application.Graphs.Dtos;
global using Microsoft.AspNetCore.Mvc;
global using Microsoft.Extensions.Logging;
global using sna_domain.Services;
global using System.Diagnostics;
global using sna_domain.Entities;


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Commands\AStar\AStarEndpoint.cs
===============================
namespace sna_application.Analysis.Commands.AStar;

public record AStarRequest(AStarCommand Command);
public record AStarResponse(AStarResult Result);

public class AStarEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/analysis/astar/graphId={id:guid}",
        async ([FromRoute] Guid id, [FromBody] AStarRequest request, ISender sender) =>
        {
            var result = await sender.Send(request.Command);
            return Results.Ok(new AStarResponse(result));
        })
        .WithTags("Analysis")
        .WithName("AStarAlgo")
        .Produces<AStarResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Commands\AStar\AStarHandler.cs
===============================


namespace sna_application.Analysis.Commands.AStar;

public record AStarResult(Guid Id, IReadOnlyList<NodeDto> Nodes, double ExecutionTime);
public record AStarCommand(Guid GraphId, int StartNodeId, int TargetNodeId) : IRequest<AStarResult>;

internal class AStarHandler(IGraphRepository graphRepository, ILogger<AStarHandler> logger)
    : IRequestHandler<AStarCommand, AStarResult>
{
    public async Task<AStarResult> Handle(AStarCommand request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId, false)
            ?? throw new NotFoundException($"Graph with Id {request.GraphId} not found");
        var startNode = graph.GetNodeFromGraphById(request.StartNodeId)
            ?? throw new NotFoundException($"Node: {request.StartNodeId}", graph.Title);
        var targetNode = graph.GetNodeFromGraphById(request.TargetNodeId)
            ?? throw new NotFoundException($"Node: {request.TargetNodeId}", graph.Title);
        var timer = new Stopwatch();
        timer.Start();
        var path = GraphAlgorithms.AStar(graph, startNode, targetNode);
        timer.Stop();
        logger.LogInformation("AStar Algorithm executed in : {Elapsed} ms", timer.Elapsed.TotalMilliseconds);
        var nodeDtos = path.Adapt<IReadOnlyList<NodeDto>>();
        return new AStarResult(request.GraphId, nodeDtos, timer.Elapsed.TotalMilliseconds);
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Commands\BFS\BFSEndpoint.cs
===============================

namespace sna_application.Analysis.Commands.BFS;

public record BFSRequest(BFSCommand Command);
public record BFSResponse(BFSResult Result);

public class BFSEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/analysis/bfs/graphId={id:guid}", 
        async([FromRoute]Guid id, [FromBody]BFSRequest request, ISender sender) =>
        {
            var result = await sender.Send(request.Command);
            return Results.Ok(new BFSResponse(result));

        }).WithTags("Analysis")
        .WithName("BFSAlgo")
        .Produces<BFSResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Commands\BFS\BFSHandler.cs
===============================


namespace sna_application.Analysis.Commands.BFS;


public record BFSResult(
    Guid Id,
    IReadOnlyList<NodeDto> Nodes,
    double ExecutionTime);
public record BFSCommand(Guid GraphId, int StartNodeId): IRequest<BFSResult>;
internal class BFSHandler(IGraphRepository graphRepository, ILogger<BFSHandler> logger) : IRequestHandler<BFSCommand, BFSResult>
{
    public async Task<BFSResult> Handle(BFSCommand request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId, false)
            ?? throw new NotFoundException($"Graph with Id {request.GraphId} not found");
        var node = graph.GetNodeFromGraphById(request.StartNodeId) ?? 
         throw new NotFoundException($"Node: {request.StartNodeId}", graph.Title);
        var timer = new Stopwatch();
        //Algorithm starts
        timer.Start();
        var visitedNodes = GraphAlgorithms.BFS(graph, node,visited:[]);
        timer.Stop();
        
        //Algorithm ends
        logger.LogInformation("BFS Algorithm executed in : {Elapsed} ms", timer.Elapsed.TotalMilliseconds);
        var nodeDtos = visitedNodes.Adapt<IReadOnlyList<NodeDto>>();
        return new BFSResult(request.GraphId,nodeDtos,timer.Elapsed.TotalMilliseconds);
    }
}






===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Commands\DFS\DFSEndpoint.cs
===============================
namespace sna_application.Analysis.Commands.DFS;

public record DFSRequest(DFSCommand Command);
public record DFSResponse(DFSResult Result);

public class DFSEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/analysis/dfs/graphId={id:guid}", 
        async ([FromRoute] Guid id, [FromBody] DFSRequest request, ISender sender) =>
        {
            var result = await sender.Send(request.Command);
            return Results.Ok(new DFSResponse(result));
        })
        .WithTags("Analysis")
        .WithName("DFSAlgo")
        .Produces<DFSResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Commands\DFS\DFSHandler.cs
===============================

namespace sna_application.Analysis.Commands.DFS;

public record DFSResult(Guid Id, IReadOnlyList<NodeDto> Nodes, double ExecutionTime);
public record DFSCommand(Guid GraphId, int StartNodeId) : IRequest<DFSResult>;

internal class DFSHandler(IGraphRepository graphRepository, ILogger<DFSHandler> logger) 
    : IRequestHandler<DFSCommand, DFSResult>
{
    public async Task<DFSResult> Handle(DFSCommand request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId, false)
            ?? throw new NotFoundException($"Graph with Id {request.GraphId} not found");

        var node = graph.GetNodeFromGraphById(request.StartNodeId)
            ?? throw new NotFoundException($"Node: {request.StartNodeId}", graph.Title);

        var timer = Stopwatch.StartNew();
        logger.LogInformation("DFS Algorithm executed in : {Elapsed} ms", timer.Elapsed.TotalMilliseconds);
        var visitedNodes = GraphAlgorithms.DFS(graph, node, visited: []);
        timer.Stop();
        var nodeDtos = visitedNodes.Adapt<IReadOnlyList<NodeDto>>();
        return new DFSResult(request.GraphId, nodeDtos, timer.Elapsed.TotalMilliseconds);
    }
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Commands\Dijkstra\DijkstraEndpoint.cs
===============================
namespace sna_application.Analysis.Commands.Dijkstra;

public record DijkstraRequest(DijkstraCommand Command);
public record DijkstraResponse(DijkstraResult Result);

public class DijkstraEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/analysis/dijkstra/graphId={id:guid}",
        async ([FromRoute] Guid id, [FromBody] DijkstraRequest request, ISender sender) =>
        {
            var result = await sender.Send(request.Command);
            return Results.Ok(new DijkstraResponse(result));
        })
        .WithTags("Analysis")
        .WithName("DijkstraAlgo")
        .Produces<DijkstraResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Commands\Dijkstra\DijkstraHandler.cs
===============================
namespace sna_application.Analysis.Commands.Dijkstra;

public record DijkstraResult(Guid Id, IReadOnlyList<NodeDto> Nodes, double ExecutionTime);
public record DijkstraCommand(Guid GraphId, int StartNodeId, int TargetNodeId) : IRequest<DijkstraResult>;

internal class DijkstraHandler(IGraphRepository graphRepository, ILogger<DijkstraHandler> logger)
    : IRequestHandler<DijkstraCommand, DijkstraResult>
{
    public async Task<DijkstraResult> Handle(DijkstraCommand request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId, false)
            ?? throw new NotFoundException($"Graph with Id {request.GraphId} not found");
        var startNode = graph.GetNodeFromGraphById(request.StartNodeId)
            ?? throw new NotFoundException($"Node: {request.StartNodeId}", graph.Title);
        var targetNode = graph.GetNodeFromGraphById(request.TargetNodeId)
            ?? throw new NotFoundException($"Node: {request.TargetNodeId}", graph.Title);
            
        var timer = new Stopwatch();
        timer.Start();
        var path = GraphAlgorithms.Dijkstra(graph, startNode, targetNode);
        timer.Stop();
        logger.LogInformation("Dijkstra Algorithm executed in : {Elapsed} ms", timer.Elapsed.TotalMilliseconds);
        var nodeDtos = path.Adapt<IReadOnlyList<NodeDto>>();
        return new DijkstraResult(request.GraphId, nodeDtos, timer.Elapsed.TotalMilliseconds);
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Dtos\ComponentDto.cs
===============================
namespace sna_application.Analysis.Dtos;

public record ComponentDto(int Id, IReadOnlyList<NodeDto> Nodes);


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Dtos\NodeDegreeDto.cs
===============================
namespace sna_application.Analysis.Dtos;
public record NodeDegreeDto(int Id, string Tag, int Degree, decimal? NormalizeDegree);



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\CommunityDetection\CommnunityDetectionHandler.cs
===============================

namespace sna_application.Analysis.Queries.CommunityDetection;

public record CommunityDetectionResult(
    Guid GraphId,
    IReadOnlyDictionary<string, int> NodeToCommunity,
    int CommunityCount,
    double ExecutionTime
);

public record CommunityDetectionQuery(Guid Id): IRequest<CommunityDetectionResult>;

internal class CommunityDetectionHandler(IGraphRepository graphRepository,
ILogger<CommunityDetectionHandler> logger) :
IRequestHandler<CommunityDetectionQuery, CommunityDetectionResult>
{
    public async Task<CommunityDetectionResult> Handle(CommunityDetectionQuery request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(
            request.Id,
            false) ?? throw new NotFoundException($"Graph {request.Id} not found");

        var stopwatch = Stopwatch.StartNew();
        var nodeLabels = GraphAlgorithms.DetecteCommunity(graph);
        stopwatch.Stop();

        var nodeToCommunity = nodeLabels.ToDictionary(
            kvp => kvp.Key.Id.ToString(),
            kvp => kvp.Value
        );

        var communityCount = nodeToCommunity.Values.Distinct().Count();

        logger.LogInformation(
            "Community detection executed in {Elapsed} ms. Communities: {Count}",
            stopwatch.Elapsed.TotalMilliseconds,
            communityCount
        );

        return new CommunityDetectionResult(
            graph.Id,
            nodeToCommunity,
            communityCount,
            stopwatch.Elapsed.TotalMilliseconds
        );
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\CommunityDetection\CommunityDetectionEndpoint.cs
===============================

namespace sna_application.Analysis.Queries.CommunityDetection;

public class CommunityDetectionEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/analysis/community-detection/graphId={id:guid}", async(Guid id,ISender sender) =>
        {
            var result = await sender.Send(new CommunityDetectionQuery(id));
            return Results.Ok(result);
            
        }).WithTags("Analysis")
        .WithName("CommunityDetection");
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\ConnectedComponents\ConnectedComponentsEndpoint.cs
===============================
namespace sna_application.Analysis.Queries.ConnectedComponents;

public record ConnectedComponentsResponse(ConnectedComponentsResult Result);
public class ConnectedComponentsEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/analysis/connected-components/graphId={id:guid}", 
        async (Guid id, ISender sender) =>
        {
            var result = await sender.Send(new ConnectedComponentsQuery(id));
            return Results.Ok(new ConnectedComponentsResponse(result));
        })
        .WithTags("Analysis")
        .WithName("ConnectedComponents")
        .Produces<ConnectedComponentsResponse>();
    }
}




===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\ConnectedComponents\ConnectedComponentsHandler.cs
===============================
using sna_application.Analysis.Dtos;

namespace sna_application.Analysis.Queries.ConnectedComponents;

public record ConnectedComponentsResult(Guid GraphId, IReadOnlyList<ComponentDto> Components, double ExecutionTime);

public record ConnectedComponentsQuery(Guid GraphId) : IRequest<ConnectedComponentsResult>;

internal class ConnectedComponentsHandler(
    IGraphRepository graphRepository, 
    ILogger<ConnectedComponentsHandler> logger
) : IRequestHandler<ConnectedComponentsQuery, ConnectedComponentsResult>
{
    public async Task<ConnectedComponentsResult> Handle(ConnectedComponentsQuery request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId, false)
            ?? throw new NotFoundException($"Graph with Id {request.GraphId} not found");

        var timer = new Stopwatch();
        timer.Start();
        var components = GraphAlgorithms.GetConnectedComponents(graph);
        timer.Stop();
        logger.LogInformation("Detection of Connected Components Algorithm executed in:{Elapsed} ms",timer.Elapsed.TotalMilliseconds);
        var componentsDto = components
            .Select((nodes, idx) => new ComponentDto(
                Id: idx + 1, 
                Nodes: nodes.Adapt<IReadOnlyList<NodeDto>>()
            ))
            .ToList();

        return new ConnectedComponentsResult(graph.Id, componentsDto,timer.Elapsed.TotalMilliseconds);
    }
}





===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\DegreeCentrality\DegreeCentralityEndpoint.cs
===============================
namespace sna_application.Analysis.Queries.DegreeCentrality;
public record DegreeCentralityResponse(DegreeCentralityResult Result);
public class DegreeCentralityEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/analysis/degree-centrality/graphId={id:guid}", 
        async ([FromRoute] Guid id, ISender sender) =>
        {
            var result = await sender.Send(new DegreeCentralityQuery(id));
            return Results.Ok(new DegreeCentralityResponse(result));
        })
        .WithTags("Analysis")
        .WithName("DegreeCentralityAlgo")
        .Produces<DegreeCentralityResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\DegreeCentrality\DegreeCentralityHandler.cs
===============================

namespace sna_application.Analysis.Queries.DegreeCentrality;

public record DegreeCentralityResult(Guid Id,
    int MaxDegree, 
    IReadOnlyDictionary<string, int> NodeDegrees,
    double ExecutionTime);
public record DegreeCentralityQuery(Guid GraphId) : IRequest<DegreeCentralityResult>;

internal class DegreeCentralityHandler(IGraphRepository graphRepository, ILogger<DegreeCentralityHandler> logger) 
    : IRequestHandler<DegreeCentralityQuery, DegreeCentralityResult>
{
    public async Task<DegreeCentralityResult> Handle(DegreeCentralityQuery request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId, false)
            ?? throw new NotFoundException($"Graph with Id {request.GraphId} not found");
        var timer = new Stopwatch();
        timer.Start();
        var degreeList = GraphAlgorithms.KDegreeCentrality(graph, null);
        timer.Stop();
        logger.LogInformation("DegreeCentrality Alogrithm executed in:{Elapsed} ms",timer.Elapsed.TotalMilliseconds);
        var nodeDegrees= degreeList.ToDictionary(
            p=> p.Node.Id.ToString(),
            p=> p.Degree
        );

        var maxDegree= degreeList.Max(p=>p.Degree);
        return new DegreeCentralityResult(graph.Id,
                        maxDegree,
                        nodeDegrees,
                        timer.Elapsed.TotalMilliseconds);
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\TopFiveNode\TopFiveHighestDegreeNodeHandler.cs
===============================

using sna_application.Analysis.Dtos;

namespace sna_application.Analysis.Queries.TopFiveNode;

public record TopFiveNodeInDegreeResult(Guid Id,
    int MaxDegree,
    IReadOnlyList<NodeDegreeDto> Nodes,
    double ExecutionTime);
public record TopFiveNodeInDegreeQuery(Guid GraphId) : IRequest<TopFiveNodeInDegreeResult>;

internal class TopFiveNodeInDegreeHandler(IGraphRepository graphRepository, ILogger<TopFiveNodeInDegreeHandler> logger) 
    : IRequestHandler<TopFiveNodeInDegreeQuery, TopFiveNodeInDegreeResult>
{
    public async Task<TopFiveNodeInDegreeResult> Handle(TopFiveNodeInDegreeQuery request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId, false)
            ?? throw new NotFoundException($"Graph with Id {request.GraphId} not found");
        var timer = new Stopwatch();
        timer.Start();
        var degreeList = GraphAlgorithms.KDegreeCentrality(graph, 5);
        timer.Stop();
        logger.LogInformation("Alogrithm executed in:{Elapsed} ms",timer.Elapsed.TotalMilliseconds);
        var nodeDtos = degreeList.Select
        (d => new NodeDegreeDto
                (d.Node.Id, 
                d.Node.Tag, 
                d.Degree,
                d.Node.NormalizedDegreeCentrality))
                .ToList();

        return new TopFiveNodeInDegreeResult(graph.Id,
                            nodeDtos.Max(n=>n.Degree),
                             nodeDtos,
                              timer.Elapsed.TotalMilliseconds);
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\TopFiveNode\TopFiveNodeInDegreeEndpoint.cs
===============================
namespace sna_application.Analysis.Queries.TopFiveNode;


public record TopFiveNodeInDegreeResponse(TopFiveNodeInDegreeResult Result);
public class TopFiveNodeInDegreEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/analysis/top-five-node/graphId={id:guid}",async (Guid id,ISender sender) =>
        {
            var result = await sender.Send(new TopFiveNodeInDegreeQuery(id));
            return Results.Ok(new TopFiveNodeInDegreeResponse(result));
            
        }).WithTags("Analysis")
        .WithName("GetTopFiveNodeInDegree")
        .Produces<TopFiveNodeInDegreeResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\WelshPowell\WelshPowellEndpoint.cs
===============================
namespace sna_application.Analysis.Queries.WelshPowell;

public record WelshPowellResponse(WelshPowellResult Result);
public class WelshPowellEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/analysis/coloring/graphId={id:guid}", async (Guid id, ISender sender) =>
        {
            var result = await sender.Send(new WelshPowellQuery(id));

            return Results.Ok(new WelshPowellResponse(result));
        }).WithTags("Analysis")
        .WithName("ColoringGraphNodes")
        .Produces<WelshPowellResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Analysis\Queries\WelshPowell\WelshPowellHandler.cs
===============================
namespace sna_application.Analysis.Queries.WelshPowell;
public record WelshPowellResult(Guid GraphId,
                    int ColorsUsed,
                    IReadOnlyDictionary<int, int> NodeWithColors,
                    double ExecutionTime);

public record WelshPowellQuery(Guid GraphId): IRequest<WelshPowellResult>;
internal class WelshPowellHandler(IGraphRepository graphRepository, ILogger<WelshPowellHandler> logger) 
: IRequestHandler<WelshPowellQuery, WelshPowellResult>
{
    public async Task<WelshPowellResult> Handle(WelshPowellQuery request, CancellationToken cancellationToken)
    {
        
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId, false)
        ?? throw new NotFoundException($"Graph with Id: {request.GraphId} not found");

        var timer = new Stopwatch();
        timer.Start();
        var coloringDictionnary = GraphAlgorithms.WelshPowell(graph);
        timer.Stop();
        logger.LogInformation("WelshPowell Algorith got executed in :{Elapsed} ms", timer.Elapsed.TotalMilliseconds);
        
        return new WelshPowellResult(
            GraphId:graph.Id,
            ColorsUsed:coloringDictionnary.Values.Max()+1,
            NodeWithColors:coloringDictionnary.ToDictionary(
                p=>p.Key.Id,
                p=>p.Value
            ),
            ExecutionTime:timer.Elapsed.TotalMilliseconds
        );

    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Common\Behaviors\LoggingBehavior.cs
===============================
using System.Diagnostics;
using Microsoft.Extensions.Logging;

namespace sna_application.Common.Behaviors;

public class LoggingBehavior<TRequest, TResponse>(ILogger<LoggingBehavior<TRequest,TResponse>> logger):
 IPipelineBehavior<TRequest, TResponse> 
 where TRequest :notnull, IRequest<TResponse>
 where TResponse: notnull
{
    public async Task<TResponse> Handle(TRequest request, RequestHandlerDelegate<TResponse> next, CancellationToken cancellationToken)
    {
        //Beggining of the request
         logger.LogInformation("[START] Handle request={Request} - Response={Response} - RequestData={RequestData}",
            typeof(TRequest).Name, typeof(TResponse).Name, request);

        var timer = new Stopwatch();
        timer.Start();
        //perform the request
        var response = await next(cancellationToken);//Why do we need to foward here the cancellationToken

        timer.Stop();
        var timeTaken = timer.Elapsed;
        if (timeTaken.Seconds > 3) // if the request duration is greater than 3 seconds, then log the warnings
            logger.LogWarning("[PERFORMANCE] The request {Request} took {TimeTaken} seconds.",
                typeof(TRequest).Name,
                 timeTaken.Seconds);

        //end of the request
        logger.LogInformation("[END] Handled {Request} with {Response}", typeof(TRequest).Name, typeof(TResponse).Name);
        return response;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Common\Behaviors\ValidationBehavior.cs
===============================
using sna_bootstrapper_api.Exceptions;
namespace sna_application.Common.Behaviors;
public class ValidationBehavior<TRequest, TResponse>(IEnumerable<IValidator<TRequest>> validators)
: IPipelineBehavior<TRequest, TResponse>
where TRequest : IRequest<TResponse>
{
    public async Task<TResponse> Handle(TRequest request, RequestHandlerDelegate<TResponse> next, CancellationToken cancellationToken)
    {
        if (!validators.Any())
        {
            return await next();
        }

        var context = new ValidationContext<TRequest>(request);

        // Exécuter tous les validateurs
        var validationResults = await Task.WhenAll(
            validators.Select(v => v.ValidateAsync(context, cancellationToken))
        );

        // Aplatir la liste des erreurs (IEnumerable<ValidationFailure>)
        var failures = validationResults
            .SelectMany(r => r.Errors)
            .Where(f => f != null)
            .ToList();

        // S'il y a des erreurs, on lance UNE SEULE exception contenant TOUTES les erreurs
        if (failures.Count != 0)
        {
            throw new ValidationException(failures);
        }

        return await next(CancellationToken.None);
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Extensions\ServiceCollectionExtensions.cs
===============================
using Carter;
using Microsoft.Extensions.DependencyInjection;
using sna_application.Common.Behaviors;

namespace sna_application.Extensions;

public static class ServiceCollectionExtensions
{
    public static IServiceCollection AddApplication(this IServiceCollection services)
    {
        //Register Mapster
        services.AddMapster();
        // Register FluentValidation
        services.AddValidatorsFromAssembly(typeof(AssemblyReference).Assembly);

        //Register Carter
        services.AddCarter();
        //Register MediatR
        services.AddMediatR(configuration: configuration =>
        {
            configuration.AddOpenBehavior(typeof(ValidationBehavior<,>));
            configuration.AddOpenBehavior(typeof(LoggingBehavior<,>));
            configuration.RegisterServicesFromAssembly(typeof(AssemblyReference).Assembly);
        });
        return services;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\AddEdgeToGraph\AddEdgeToGraphEndpoint.cs
===============================
using Microsoft.AspNetCore.Mvc;

namespace sna_application.Graphs.Commands.AddEdgeToGraph;

public record AddEdgeToGraphRequest(AddEdgeToGraphCommand Edge);
public record AddEdgeToGraphResponse(bool IsSuccess, EdgeDto Edge);
public class AddEdgeToGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/graphs/{id:guid}/edges", async([FromRoute]Guid id,[FromBody]AddEdgeToGraphRequest request, ISender sender) =>
        {
            if(id!= request.Edge.GraphId) return Results.BadRequest("Mismatch Ids");
            var result= await sender.Send(request.Edge);
            return Results.Ok(new AddEdgeToGraphResponse(true,result));
        }).WithTags("Graphs.Edges")
        .WithName("AddEdgeToGraph")
        .Produces<AddEdgeToGraphResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\AddEdgeToGraph\AddEdgeToGraphHandler.cs
===============================

using sna_domain.Entities;

namespace sna_application.Graphs.Commands.AddEdgeToGraph;


public record AddEdgeToGraphCommand(Guid GraphId, int NodeAId, int NodeBId): IRequest<EdgeDto>;

internal class AddEdgeToGraphHandler(IGraphRepository graphRepository, IUnitOfWork unitOfWork) :
IRequestHandler<AddEdgeToGraphCommand, EdgeDto>
{
    public async Task<EdgeDto> Handle(AddEdgeToGraphCommand request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId,true) ??
        throw new NotFoundException($"Graph with Id: {request.GraphId} not found");
        var nodeA= graph.GetNodeFromGraphById(request.NodeAId) ;
        var nodeB= graph.GetNodeFromGraphById(request.NodeBId) ;
        if(nodeA is null || nodeB is null) 
            throw new DomainException($"Node with Id {request.NodeAId} or {request.NodeBId} not found or belongs to this graph"); 
        graph.ConnectNodes(nodeA, nodeB);
        await unitOfWork.SaveChangesAsync(cancellationToken);
        return graph.GetEdgeFromGraph(nodeA.Id,nodeB.Id).Adapt<EdgeDto>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\AddNodeToGraph\AddNodeToGraphEndpoint.cs
===============================
using Microsoft.AspNetCore.Mvc;

namespace sna_application.Graphs.Commands.AddNodeToGraph;


public record AddNodeToGraphRequest (AddNodeToGraphCommand Node);

public record AddNodeToGraphResponse(NodeDto Node);
public class AddNodeToGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/graphs/{id:guid}/nodes", async ([FromRoute]Guid id, [FromBody]AddNodeToGraphRequest request, ISender sender) =>
        {
            if(id!=request.Node.GraphId) return Results.BadRequest("Ids mismatch");
            var result = await sender.Send(request.Node);

            return Results.Ok(new AddNodeToGraphResponse(result));
        }).WithTags("Graphs.Nodes")
        .WithName("AddNodeToGraph")
        .Produces<AddNodeToGraphResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\AddNodeToGraph\AddNodeToGraphHandler.cs
===============================
using sna_domain.Entities;

namespace sna_application.Graphs.Commands.AddNodeToGraph;

public record AddNodeToGraphCommand(Guid GraphId,
    string Tag,
    double Activity,
    int Interaction) : IRequest<NodeDto>;


public class AddNodeToGraphCommandValidator: AbstractValidator<AddNodeToGraphCommand>
{
    public AddNodeToGraphCommandValidator()
    {
        RuleFor(n=>n.GraphId).NotEmpty()
                        .WithMessage("GraphId should be provide");
        RuleFor(n=>n.Tag).MinimumLength(2)
                        .WithMessage("Node's tag should be at least three(3) characters");
        RuleFor(n=>n.Activity).InclusiveBetween(0.0,1.0)
                        .WithMessage("Node's activity should be in the range of 0.0 and 1.0");
        RuleFor(n=>n.Interaction).GreaterThanOrEqualTo(1)
                                .WithMessage("Node's Interaction should be greater than or equal to 1");
    }
}
internal class AddNodeToGraphHandler(IGraphRepository _graphRepo, IUnitOfWork _unitOfwork)
: IRequestHandler<AddNodeToGraphCommand, NodeDto>
{
    public async Task<NodeDto> Handle(AddNodeToGraphCommand request, CancellationToken cancellationToken)
    {
        var node  = Graph.CreateNode(request.GraphId,
                                request.Tag,
                                request.Activity,
                                request.Interaction);
        var graph = await _graphRepo.GetGraphByIdAsync(request.GraphId,true) ??
        throw new NotFoundException($"Graph with Id: {request.GraphId} not found");

        if(graph.Nodes.Any(n=>n.Tag ==request.Tag))
            throw new DomainException("Node tag must be unique");
        var result = graph.AddNode(node);
        await _unitOfwork.SaveChangesAsync(cancellationToken);
        return node.Adapt<NodeDto>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\ClearGraph\ClearGraphEndpoint.cs
===============================
using Microsoft.AspNetCore.Http.HttpResults;

namespace sna_application.Graphs.Commands.ClearGraph;

public class ClearGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapDelete("api/graphs/clear/{id:guid}", async (Guid id,ISender sendere) =>
        {
            var result = await sendere.Send(new ClearGraphCommand(id));
            return Results.Ok(result);
        }).WithTags("Graphs")
        .WithName("ClearGraph")
        .Produces<GraphDto>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\ClearGraph\ClearGraphHandler.cs
===============================

namespace sna_application.Graphs.Commands.ClearGraph;


public record ClearGraphCommand(Guid GraphId): IRequest<GraphDto>;
internal class ClearGraphHandler(IGraphRepository _graphRepo, IUnitOfWork _unitOfWork)
 : IRequestHandler<ClearGraphCommand, GraphDto>
{
    public async Task<GraphDto> Handle(ClearGraphCommand request, CancellationToken cancellationToken)
    {
        var graph= await _graphRepo.GetGraphByIdAsync(request.GraphId,true)
        ?? throw new NotFoundException($"Graph with Id:{request.GraphId} not found");
        var nodes = graph.Nodes.ToList() ;
         foreach(var node in nodes)
        {
            graph.Nodes.Remove(node);
        }

        await _unitOfWork.SaveChangesAsync(cancellationToken);
        return graph.Adapt<GraphDto>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\CreateGraph\CreateGraphEndpoint.cs
===============================
namespace sna_application.Graphs.Commands.CreateGraph;


public record CreateGraphRequest(CreateGraphCommand Graph);
public record CreateGraphResponse(Guid Id, string Title);
public class CreateGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/graphs/", async(CreateGraphRequest request,ISender sender) =>
        {
            var (Id, Title) = await sender.Send(request.Graph);
            return Results.Ok(new CreateGraphResponse(Id,Title));
        }).WithTags("Graphs")
        .WithName("CreateGraph")
        .Produces<CreateGraphResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\CreateGraph\CreateGraphHandler.cs
===============================

using sna_domain.Entities;

namespace sna_application.Graphs.Commands.CreateGraph;


public record CreateGraphCommand(string Title):IRequest<(Guid,string)>;

public class CreateGraphCommandValidator : AbstractValidator<CreateGraphCommand>
{
    public CreateGraphCommandValidator()
    {
        RuleFor(g=>g.Title).NotEmpty().WithMessage("Graph's Title is required to create a new one");
    }
}

internal class CreateGraphHandler(IGraphRepository _graphRepo, IUnitOfWork _unitOfWork)
: IRequestHandler<CreateGraphCommand, (Guid,string)>
{
    public async Task<(Guid, string)> Handle(CreateGraphCommand request, CancellationToken cancellationToken)
    {
        var graph = Graph.Create(request.Title);
        await _graphRepo.AddGraphAsync(graph);
        await _unitOfWork.SaveChangesAsync(cancellationToken);
        var (Id, Title) = (graph.Id,graph.Title);
        return (Id,Title);
    }
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\DeleteEdgeFromGraph\DeleteEdgeFromGraphEndpoint.cs
===============================

using Microsoft.AspNetCore.Mvc;

namespace sna_application.Graphs.Commands.DeleteEdgeFromGraph;

public record DeleteEdgeFromGraphRequest(DeleteEdgeFromGraphCommand Edge);
public record DeleteEdgeFromGraphResponse(GraphDto Graph);
public class DeleteEdgeFromGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/graphs/{graphId:guid}/edges/delete", 
        async ([FromRoute]Guid graphId,[FromBody]DeleteEdgeFromGraphRequest request, ISender sender) =>
        {
            if(graphId != request.Edge.GraphId) return Results.BadRequest("Ids mismatch");
            var result = await sender.Send(request.Edge);
            return Results.Ok(new DeleteEdgeFromGraphResponse(result));
        }).WithTags("Graphs.Edges")
        .WithName("DeleteEdgeFromGraph")
        .Produces<DeleteEdgeFromGraphResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\DeleteEdgeFromGraph\DeleteEdgeFromGraphHandler.cs
===============================

namespace sna_application.Graphs.Commands.DeleteEdgeFromGraph;


public record DeleteEdgeFromGraphCommand(Guid GraphId, int NodeAId,int NodeBId):IRequest<GraphDto>;

internal class DeleteEdgeFromGraphValidator: AbstractValidator<DeleteEdgeFromGraphCommand>
{
    public DeleteEdgeFromGraphValidator()
    {
        RuleFor(e=>e.GraphId).NotEmpty().WithMessage("Edge'GraphId is required");

        RuleFor(e=>e.NodeAId).NotEmpty().WithMessage("Edge's NodeId is required");

        RuleFor(e=>e.NodeBId).NotEmpty().WithMessage("Edge's NodeId is required");
    }
}

internal class DeleteEdgeFromGraphHandler(IGraphRepository graphRepository,
IUnitOfWork unitOfWork) : IRequestHandler<DeleteEdgeFromGraphCommand, GraphDto>
{
    public async Task<GraphDto> Handle(DeleteEdgeFromGraphCommand request, CancellationToken cancellationToken)
    {
         var graph = await graphRepository.GetGraphByIdAsync(request.GraphId,true) ??
        throw new NotFoundException($"Graph with Id: {request.GraphId} not found");
        var edge = graph.GetEdgeFromGraph(request.NodeAId, request.NodeBId)?? 
        throw new NotFoundException($"Edge between {request.NodeAId} and {request.NodeBId} not found");
        graph.DisConnectNodes(edge);
        await unitOfWork.SaveChangesAsync(cancellationToken);
        var entity = await graphRepository.GetGraphByIdAsync(request.GraphId,false) ??
        throw new NotFoundException($"Graph with Id:{request.GraphId} not found");
        var graphDto = new GraphDto(entity.Id, entity.Title, entity.Description!, entity.Order, entity.Size)
        {
            Nodes= entity.Nodes.ToList().Adapt<List<NodeDto>>(),
            Edges = entity.Edges.ToList().Adapt<List<EdgeDto>>()
        };
        return graphDto;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\DeleteGraph\DeleteGraphEndpoint.cs
===============================

using Microsoft.AspNetCore.Http.HttpResults;

namespace sna_application.Graphs.Commands.DeleteGraph;

public class DeleteGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapDelete("api/graphs/{id:guid}", async (Guid id,ISender sendere) =>
        {
            var result = await sendere.Send(new DeleteGraphCommand(id));
            if(!result) return Results.BadRequest($"An error occcured while deleting Graph with Id:{id}");
            return Results.NoContent();
        }).WithTags("Graphs")
        .WithName("DeleteGraph")
        .Produces<NoContent>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\DeleteGraph\DeleteGraphHandler.cs
===============================

namespace sna_application.Graphs.Commands.DeleteGraph;


public record DeleteGraphCommand(Guid GraphId): IRequest<bool>;
internal class DeleteGraphHandler(IGraphRepository _graphRepo, IUnitOfWork _unitOfWork)
 : IRequestHandler<DeleteGraphCommand, bool>
{
    public async Task<bool> Handle(DeleteGraphCommand request, CancellationToken cancellationToken)
    {
        var graph= await _graphRepo.GetGraphByIdAsync(request.GraphId,true)
        ?? throw new NotFoundException($"Graph with Id:{request.GraphId} not found");
        var nodes = graph.Nodes.ToList() ;
         foreach(var node in nodes)
        {
            graph.Nodes.Remove(node);
        }
         _graphRepo.DeleteGraph(graph);
         return await _unitOfWork.SaveChangesAsync(cancellationToken);
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\DeleteNodeFromGraph\DeleteNodeFromGraphEndpoint.cs
===============================

namespace sna_application.Graphs.Commands.DeleteNodeFromGraph;

public record DeleteNodeFromGraphResponse(GraphDto Result);
public class DeleteNodeFromGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapDelete("api/graphs/{graphId:guid}/nodes/{id:int}", async([FromRoute] Guid graphId, [FromRoute]int id, ISender sender) =>
        {
            var result = await sender.Send(new DeleteNodeFromGraphCommand(graphId,id));
           return Results.Ok(new DeleteNodeFromGraphResponse(result));
      
        }).WithTags("Graphs.Nodes")
        .WithName("DeleteNodeFromGraph")
        .Produces<DeleteNodeFromGraphResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\DeleteNodeFromGraph\DeleteNodeFromGraphHandler.cs
===============================

namespace sna_application.Graphs.Commands.DeleteNodeFromGraph;
public record DeleteNodeFromGraphCommand(Guid GraphId, int NodeId):IRequest<GraphDto>;

internal class DeleteNodeFromGraphHandler(IGraphRepository graphRepository, IUnitOfWork unitOfWork)
: IRequestHandler<DeleteNodeFromGraphCommand, GraphDto>
{
    public async Task<GraphDto> Handle(DeleteNodeFromGraphCommand request, CancellationToken cancellationToken)
    {
        //retreive graph;
        var graph = await graphRepository.GetGraphByIdAsync(request.GraphId,true)??
        throw new NotFoundException($"Graph with Id:{request.GraphId} not found");
        var node = graph.GetNodeFromGraphById(request.NodeId)??
        throw new NotFoundException($"Node with Id:{request.NodeId} not found");
        graph.DeleteOneNode(node);
        await unitOfWork.SaveChangesAsync(cancellationToken);
        var entity = await graphRepository.GetGraphByIdAsync(request.GraphId,false) ??
        throw new NotFoundException($"Graph with Id:{request.GraphId} not found");
        var graphDto = new GraphDto(entity.Id, entity.Title, entity.Description!, entity.Order, entity.Size)
        {
            Nodes= entity.Nodes.ToList().Adapt<List<NodeDto>>(),
            Edges = entity.Edges.ToList().Adapt<List<EdgeDto>>()
        };
        return graphDto;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\EditGraph\EditGraphEndpoint.cs
===============================


using Microsoft.AspNetCore.Mvc;

namespace sna_application.Graphs.Commands.EditGraph;


public record EditGraphRequest(EditGraphCommand Graph);

public record EditGraphResponse(string Title, string Description);
public class EditGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPut("api/graphs/{id:guid}", async ([FromRoute] Guid id, [FromBody] EditGraphRequest request, ISender sender) =>
        {
            if (id != request.Graph.Id) return Results.BadRequest("Ids mismatch");
            var result = await sender.Send(request.Graph);

            return !result ? 
                    Results.BadRequest("An error occured") 
                    : Results.Ok(new EditGraphResponse(request.Graph.Title, request.Graph.Description));
        }).WithTags("Graphs")
        .WithName("EditGraph")
        .Produces<EditGraphResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\EditGraph\EditGraphHandler.cs
===============================


namespace sna_application.Graphs.Commands.EditGraph;

public record EditGraphCommand(Guid Id, 
        string Title, string Description): IRequest<bool>;

internal class EditGraphHanlder(IGraphRepository graphRepository, IUnitOfWork unitOfWork)
: IRequestHandler<EditGraphCommand, bool>
{
    public async Task<bool> Handle(EditGraphCommand request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.Id, true) ??
            throw new NotFoundException($"Grap with Id:{request.Id} no found");

        if(!string.IsNullOrEmpty(request.Title)) graph.Title = request.Title;
        if(!string.IsNullOrEmpty(request.Description)) graph.Description = request.Description;  
        graph.Touch();
        await unitOfWork.SaveChangesAsync(cancellationToken);
        return true;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\EditNodeInGraph\EditNodeInGraphEndpoint.cs
===============================

using Microsoft.AspNetCore.Mvc;

namespace sna_application.Graphs.Commands.EditNodeInGraph;

public record EditNodeInGraphRequest(EditNodeInGraphCommand Vertex);
public record EditNodeInGraphResponse(NodeDto Node);
public class EditNodeInGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPut("api/graphs/{graphId:guid}/nodes/{id}", 
        async([FromRoute] Guid graphId,[FromRoute] int id, EditNodeInGraphRequest request, ISender sender) =>
        {
            if(graphId!= request.Vertex.GraphId) return Results.BadRequest("GraphIds mismatch");
            if(id!= request.Vertex.Id) return Results.BadRequest("NodeIds mismatch");

            var (node,isSuccess) = await sender.Send(request.Vertex);
            if(!isSuccess) 
                return Results.BadRequest($"An error occured while attempting to edit Node with Id:{id}");
            return Results.Ok(new EditNodeInGraphResponse(node));
            
        }).WithTags("Graphs.Nodes")
        .WithName("EditNodeInGraph")
        .Produces<EditNodeInGraphResponse>();
        
    }

  
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\EditNodeInGraph\EditNodeInGraphHandler.cs
===============================

namespace sna_application.Graphs.Commands.EditNodeInGraph;

public record EditNodeInGraphCommand(int Id, 
        Guid GraphId,
        string Tag,
        double Activity,
        int Interaction):IRequest<(NodeDto, bool)>;


internal class EditNodeInGraphHandler(IGraphRepository graphRepository, IUnitOfWork unitOfWork) :
IRequestHandler<EditNodeInGraphCommand, (NodeDto, bool)>
{
    public async Task<(NodeDto, bool)> Handle(EditNodeInGraphCommand request, CancellationToken cancellationToken)
    {
        
        var graph= await graphRepository.GetGraphByIdAsync(request.GraphId,true)
        ?? throw new NotFoundException($"Graph with Id:{request.GraphId} not found");
        var node = graph.GetNodeFromGraphById(request.Id)
        ?? throw new NotFoundException($"Node with Id:{request.Id} not found in graph with Id:{request.GraphId}");
        node.Tag = request.Tag;
        node.Activity = request.Activity;
        node.Interaction = request.Interaction;
        var nodeDto = node.Adapt<NodeDto>();
        await unitOfWork.SaveChangesAsync(cancellationToken);
         return (nodeDto, true);
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\ExportGraph\ExportGraphEndpoint.cs
===============================

namespace sna_application.Graphs.Queries.ExportGraph;


public record ExportGraphResponse(ExportGraphDto Graph);
public class ExportGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/graphs/{id:guid}/export", async (Guid id, ISender sender) =>
        {
            var result = await sender.Send(new ExportGraphCommand(id));
            return Results.Ok(new ExportGraphResponse(result));
        }).WithTags("Graphs")
        .WithName("ExportGraph")
        .Produces<ExportGraphResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\ExportGraph\ExportGraphHandler.cs
===============================

namespace sna_application.Graphs.Queries.ExportGraph;


public record ExportGraphCommand (Guid Id):IRequest<ExportGraphDto>;

internal class ExportGraphHandler(IGraphRepository graphRepository) : IRequestHandler<ExportGraphCommand, ExportGraphDto>
{
    public async Task<ExportGraphDto> Handle(ExportGraphCommand request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.Id, false)??
        throw new NotFoundException($"Graph with Id : {request.Id} not found");
        var dto = new ExportGraphDto(
            Id:graph.Id,
            Title: graph.Title,
            Description:graph.Description!,
            IsConnected:graph.IsConnected(),
            IsWeighted:true,
            IsDirected:false,
            Order:graph.Order,
            Size: graph.Size,
            Nodes: [.. graph.Nodes.Select(n=> new ExportNodeDto(n.Id,n.GraphId, n.Tag, n.Activity,n.Interaction))],
            Edges: [.. graph.Edges.Select(e=> new ExportEdgeDto(e.NodeAId,e.NodeBId,e.Weight))]
        );

        return dto;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\ImportGraph\ImportGraphEndpoint.cs
===============================
namespace sna_application.Graphs.Commands.ImportGraph;
public record ImportGraphRequest(ImportGraphCommand ImportGraph);
public record ImportGraphResponse(GraphDto Graph);
public class ImportGraphEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/graphs/import/", async (ImportGraphRequest request, ISender sender) =>
        {
            var result = await sender.Send(request.ImportGraph);
            return Results.Ok(new ImportGraphResponse(result));
        }).WithTags("Graphs")
        .WithName("ImportGraph")
        .Produces<ImportGraphResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\ImportGraph\ImportGraphHandler.cs
===============================

using sna_domain.Entities;

namespace sna_application.Graphs.Commands.ImportGraph;

public record NodeImportDto(
    string Tag,
    double Activity,
    int Interaction);
public record EdgeImportDto(string NodeTagA, string NodeTagB);

public class ImportGraphCommand: IRequest<GraphDto>
{
    public string Title{get;set;}=null!;
    public string? Description {get;set;}
    public List<NodeImportDto> Nodes{get;set;}=[];
    public List<EdgeImportDto> Edges {get;set;} =[];
}

public class GraphImportValidation : AbstractValidator<ImportGraphCommand>
{
    public GraphImportValidation()
    {
        // Graph
        RuleFor(g => g.Title)
            .NotEmpty()
            .WithMessage("Graph tag is required");

        RuleFor(g => g.Nodes)
            .NotNull()
            .NotEmpty()
            .WithMessage("Graph must contain at least one node");

        // Nodes
        RuleForEach(g => g.Nodes)
            .SetValidator(new NodeImportValidator());

        RuleFor(g => g.Nodes)
            .Must(HaveUniqueNodeTags)
            .WithMessage("Node tags must be unique");

        // Edges
        RuleForEach(g => g.Edges)
            .SetValidator(new EdgeImportValidator());

        RuleFor(g => g)
            .Must(HaveValidEdgeReferences)
            .WithMessage("Edges reference unknown nodes");

        RuleFor(g => g.Edges)
            .Must(HaveNoDuplicateEdges)
            .WithMessage("Duplicate edges detected");
    }

    // ---- Custom rules ----

    private static bool HaveUniqueNodeTags(List<NodeImportDto> nodes)
        => nodes.Select(n => n.Tag).Distinct().Count() == nodes.Count;

    private static bool HaveValidEdgeReferences(ImportGraphCommand graph)
    {
        var nodeTags = graph.Nodes.Select(n => n.Tag).ToHashSet();

        return graph.Edges.All(e =>
            nodeTags.Contains(e.NodeTagA) &&
            nodeTags.Contains(e.NodeTagB)
        );
    }

    private static bool HaveNoDuplicateEdges(List<EdgeImportDto> edges)
    {
        return edges
            .Select(e =>
                string.Compare(e.NodeTagA, e.NodeTagB) < 0
                    ? $"{e.NodeTagA}-{e.NodeTagB}"
                    : $"{e.NodeTagB}-{e.NodeTagA}")
            .Distinct()
            .Count() == edges.Count;
    }
}


public class NodeImportValidator : AbstractValidator<NodeImportDto>
{
    public NodeImportValidator()
    {
        RuleFor(n => n.Tag)
            .NotEmpty()
            .WithMessage("Node tag is required");

        RuleFor(n => n.Activity)
            .GreaterThanOrEqualTo(0);

        RuleFor(n => n.Interaction)
            .GreaterThanOrEqualTo(0);
    }
}

public class EdgeImportValidator : AbstractValidator<EdgeImportDto>
{
    public EdgeImportValidator()
    {
        RuleFor(e => e.NodeTagA)
            .NotEmpty()
            .WithMessage("NodeTagA is required");

        RuleFor(e => e.NodeTagB)
            .NotEmpty()
            .WithMessage("NodeTagB is required");

        RuleFor(e => e)
            .Must(e => e.NodeTagA != e.NodeTagB)
            .WithMessage("Edge cannot connect a node to itself");
    }
}



internal class ImportGraphHanlder(IGraphRepository graphRepository, IUnitOfWork unitOfWork) :
 IRequestHandler<ImportGraphCommand, GraphDto>
{
    public async Task<GraphDto> Handle(ImportGraphCommand request, CancellationToken cancellationToken)
    {
        var graph = Graph.Create(request.Title);
        if(!string.IsNullOrEmpty(request.Description)) 
            graph.Description = request.Description;
        var nodes = new List<Node>();
        foreach(var nodeDto in request.Nodes)
        {
            var node = Graph.CreateNode(graph.Id,
                            nodeDto.Tag,
                            nodeDto.Activity,
                            nodeDto.Interaction);

            nodes.Add(node);
        }
        graph.AddNodes(nodes);
        await graphRepository.AddGraphAsync(graph);
        await unitOfWork.SaveChangesAsync(cancellationToken);
        //Performance issue
        /*
        foreach(var edge in request.Edges)
        {
            var nodeA= graph.GetNodeFromGraphByTag(edge.NodeTagA) ;
            var nodeB= graph.GetNodeFromGraphByTag(edge.NodeTagB) ;
            if(nodeA is null || nodeB is null) 
            throw new DomainException($"Node with Tag {edge.NodeTagA} or {edge.NodeTagB} not found or belongs to this graph"); 
            graph.ConnectNodes(nodeA, nodeB);
        }*/
        var nodeMap = graph.Nodes.ToDictionary(n => n.Tag);

        foreach (var edge in request.Edges)
        {
            if (!nodeMap.TryGetValue(edge.NodeTagA, out var nodeA) ||
                !nodeMap.TryGetValue(edge.NodeTagB, out var nodeB))
                throw new DomainException($"Node with Tag {edge.NodeTagA} or {edge.NodeTagB} not found");

            graph.ConnectNodes(nodeA, nodeB);
        }
        await unitOfWork.SaveChangesAsync(cancellationToken);
        var entity= await graphRepository.GetGraphByIdAsync(graph.Id,false)?? 
        throw new NotFoundException("Graph",graph.Id);
        var graphDto = new GraphDto(entity.Id, entity.Title, entity.Description!, entity.Order, entity.Size)
        {
            Nodes= entity.Nodes.ToList().Adapt<List<NodeDto>>(),
            Edges = entity.Edges.ToList().Adapt<List<EdgeDto>>()
        };
        return graphDto;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\ImportGraphSnapshot\ImportGraphSnapshotEndpoint.cs
===============================
namespace sna_application.Graphs.Commands.ImportGraphSnapshot;

public class ImportGraphSnapshotEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/graphs/import-snapshot",async (ImportGraphSnapshotCommand command,ISender sender) =>
        {
            var graph = await sender.Send(command);
            return Results.Ok(graph);
        }).WithTags("Graphs")
        .WithName("ImportGraphSnapshot");
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Commands\ImportGraphSnapshot\ImportGraphSnapshotHandler.cs
===============================

using sna_domain.Entities;

namespace sna_application.Graphs.Commands.ImportGraphSnapshot;




public record ImportGraphSnapshotCommand(
    Guid Id,
    string Title,
    string? Description,
    List<NodeSnapshotDto> Nodes,
    List<EdgeSnapshotDto> Edges): IRequest<GraphDto>;

public class ImportGraphSnapshotCommandValidator
    : AbstractValidator<ImportGraphSnapshotCommand>
{
    public ImportGraphSnapshotCommandValidator()
    {
        RuleFor(x => x.Title)
            .NotEmpty()
            .MaximumLength(150);

        RuleFor(x => x.Nodes)
            .NotEmpty()
            .Must(nodes => nodes.Select(n => n.Id).Distinct().Count() == nodes.Count)
            .WithMessage("Duplicate node TempId detected");

        RuleForEach(x => x.Nodes).SetValidator(new NodeSnapshotValidator());

        RuleForEach(x => x.Edges).SetValidator(new EdgeSnapshotValidator());
    }
}
public class NodeSnapshotValidator
    : AbstractValidator<NodeSnapshotDto>
{
    public NodeSnapshotValidator()
    {
        RuleFor(x => x.Id).GreaterThan(0);
        RuleFor(x => x.Tag).NotEmpty().MaximumLength(50);
        RuleFor(x => x.Activity).GreaterThanOrEqualTo(0);
        RuleFor(x => x.Interaction).GreaterThanOrEqualTo(0);
    }
}
public class EdgeSnapshotValidator
    : AbstractValidator<EdgeSnapshotDto>
{
    public EdgeSnapshotValidator()
    {
        RuleFor(x => x.NodeAId).GreaterThan(0);
        RuleFor(x => x.NodeBId).GreaterThan(0);

        RuleFor(x => x)
            .Must(x => x.NodeAId != x.NodeBId)
            .WithMessage("Self-loop is not allowed");
    }
}

internal class ImportGraphSnapshotHandler(
    IGraphRepository graphRepository, IUnitOfWork unitOfWork
) : IRequestHandler<ImportGraphSnapshotCommand, GraphDto>
{
    public async Task<GraphDto> Handle(ImportGraphSnapshotCommand request, CancellationToken cancellationToken)
    {
        var graph = Graph.Create(
            request.Title,
            request.Description
        );

        var nodeMap = new Dictionary<int, Node>();

        foreach (var nodeDto in request!.Nodes)
        {
            var node = Graph.CreateNode(graph.Id,
                            nodeDto.Tag,
                            nodeDto.Activity,
                            nodeDto.Interaction);
            graph.AddNode(node);
            nodeMap[nodeDto.Id] = node;
        }
        await graphRepository.AddGraphAsync(graph);
        await unitOfWork.SaveChangesAsync(cancellationToken);
        foreach (var edgeDto in request.Edges)
        {
            var from = nodeMap[edgeDto.NodeAId];
            var to   = nodeMap[edgeDto.NodeBId];

            graph.ConnectNodes(from, to);
        }
        await unitOfWork.SaveChangesAsync(cancellationToken);
        var entity = await graphRepository.GetGraphByIdAsync(graph.Id, false)??
        throw new FailedToImportGraphSnapshotException("Import Graph Snapshot Failed");
        return  new GraphDto(entity.Id, entity.Title, entity.Description!, entity.Order, entity.Size)
        {
            Nodes= entity.Nodes.ToList().Adapt<List<NodeDto>>(),
            Edges = entity.Edges.ToList().Adapt<List<EdgeDto>>()
        };

    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Dtos\GraphDto.cs
===============================
namespace sna_application.Graphs.Dtos;
public record GraphDto(Guid Id, 
                    string Title,
                    string Description,
                    int Order,
                    int Size
                    )
{
    public List<NodeDto> Nodes{get;set;}=[];
    public List<EdgeDto> Edges{get;set;} = [];
}

public record GraphSummary(Guid Id, int NodeCount, int EdgeCount,string Title, string Description,
                            bool IsConnected, bool IsWeighted, bool IsDirected,
                            double Density, double AverageDegree);

public record ExportGraphDto(
    Guid Id,
    string Title,
    string Description,
    bool IsConnected,
    bool IsWeighted,
    bool IsDirected,
    int Order,
    int Size,
    IReadOnlyList<ExportNodeDto> Nodes,
    IReadOnlyList<ExportEdgeDto> Edges 
);

public record ExportNodeDto(int Id,
                        Guid GraphId,
                        string Tag,
                        double Activity,
                        int Interaction);


public record ExportEdgeDto(int NodeA, int NodeB, double Weight);
public record NodeDto(int Id, Guid GraphId,
    string Tag,
    double Activity,
    int Interaction);
public record EdgeDto(
            double Weight,
            int NodeAId,
            int NodeBId);      

public record NodeSnapshotDto(
    int Id,        // id du snapshot (frontend)
    string Tag,
    double Activity,
    int Interaction
);

public record EdgeSnapshotDto(
    int NodeAId,         // TempId
    int NodeBId,         // TempId
    double? Weight
);


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Queries\GetAllGraphs\GetAllGraphsEndpoint.cs
===============================
namespace sna_application.Graphs.Queries.GetAllGraphs;

public record GetAllGraphsResponse(List<GraphDto>? Graphs);

public class GetAllGraphsEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/graphs", async (ISender sender) =>
        {
            var result = await sender.Send(new GetAllGraphsQuery());
            return Results.Ok(new GetAllGraphsResponse(result));
        }).WithName("GetAllGraphsAsync")
        .WithTags("Graphs")
        .WithDescription("Retrieves all graphs")
        .Produces<GetAllGraphsResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Queries\GetAllGraphs\GetAllGraphsHandler.cs
===============================
namespace sna_application.Graphs.Queries.GetAllGraphs;

public record GetAllGraphsQuery : IRequest<List<GraphDto>>;

internal class GetAllGraphsHandler(IGraphRepository _repository) :
IRequestHandler<GetAllGraphsQuery, List<GraphDto>>
{
    public async Task<List<GraphDto>> Handle(GetAllGraphsQuery request, CancellationToken cancellationToken)
    {
        var entities = await _repository.GetAllGraphsAsync(false);
        var dtos = entities.Select(entity=>
        new GraphDto(entity.Id, entity.Title, entity.Description!, entity.Order, entity.Size)
        {
            Nodes= entity.Nodes.ToList().Adapt<List<NodeDto>>(),
            Edges = entity.Edges.ToList().Adapt<List<EdgeDto>>()
        }).ToList();
        return dtos;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Queries\GetGraphById\GetGraphByIdEndpoint.cs
===============================

namespace sna_application.Graphs.Queries.GetGraphById;


public record GetGraphByIdResponse(GraphDto Graph);
public class GetGraphByIdEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/graphs/{id:guid}", async (Guid Id, ISender sender) =>
        {
            var result = await sender.Send(new GetGraphByIdQuery(Id));
            return Results.Ok(new GetGraphByIdResponse(result));
        }).WithTags("Graphs")
        .WithName("GetGraphById")
        .WithSummary("Retrives Graph by its identifier")
        .Produces<GetGraphByIdResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Queries\GetGraphById\GetGraphByIdHandler.cs
===============================
using sna_application.Graphs.Dtos;
using sna_domain.Entities;

namespace sna_application.Graphs.Queries.GetGraphById;

public record GetGraphByIdQuery(Guid Id): IRequest<GraphDto>;
internal class GetGraphByIdHandler(IGraphRepository _graphRepo) 
: IRequestHandler<GetGraphByIdQuery, GraphDto>
{
    public async Task<GraphDto> Handle(GetGraphByIdQuery request, CancellationToken cancellationToken)
    {
       var entity = await _graphRepo.GetGraphByIdAsync(request.Id,false) ??
        throw new NotFoundException($"Graph with Id:{request.Id} not found");
        var graphDto = new GraphDto(entity.Id, entity.Title, entity.Description!, entity.Order, entity.Size)
        {
            Nodes= entity.Nodes.ToList().Adapt<List<NodeDto>>(),
            Edges = entity.Edges.ToList().Adapt<List<EdgeDto>>()
        };
        return graphDto;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Queries\GetGraphByUserId\GetGraphByUserIdHandler.cs
===============================


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Queries\GetGraphSummary\GetGraphSummaryByIdHandler.cs
===============================

namespace sna_application.Graphs.Queries.GetGraphSummary;

public record GetGraphSummaryCommand(Guid Id):IRequest<GraphSummary>;

internal class GetGraphSummaryHandler(IGraphRepository graphRepository) :
IRequestHandler<GetGraphSummaryCommand, GraphSummary>
{
    public async Task<GraphSummary> Handle(GetGraphSummaryCommand request, CancellationToken cancellationToken)
    {
        var graph = await graphRepository.GetGraphByIdAsync(request.Id,false)
        ?? throw new NotFoundException($"Graph with Id: {request.Id} not found");
        var graphDto = new GraphSummary(
            Id:graph.Id,
            NodeCount: graph.Order,
            EdgeCount: graph.Size,
            Title:graph.Title,
            Description:graph.Description!,
            IsConnected: graph.IsConnected(),
            IsWeighted:true,
            IsDirected:false,
            Density:graph.Order <=1 ? 0 : 2.0 * graph.Size/(graph.Order *(graph.Order-1)),
            AverageDegree : graph.Order ==0 ? 0.0 : 2.0 * graph.Size/graph.Order
        );

        return graphDto;
    }
}





===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Graphs\Queries\GetGraphSummary\GetGraphSummaryEndpoint.cs
===============================

namespace sna_application.Graphs.Queries.GetGraphSummary;


public record GetGraphSummaryResponse(GraphSummary GraphSummary);
public class GetGraphSummaryEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/graphs/{id:guid}/summary", async(Guid id, ISender sender) =>
        {
            var result = await sender.Send(new GetGraphSummaryCommand(id));
            return Results.Ok(new GetGraphSummaryResponse(result));
        }).WithTags("Graphs")
        .WithName("GetGraphSummary")
        .Produces<GetGraphSummaryResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Commands\CreateMessage\CreateMessageEndpoint.cs
===============================

namespace sna_application.Messages.Commands.CreateMessage;


public record CreateMessageRequest(CreateMessageCommand Message);
public class CreateMessageEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapPost("api/messages", async (CreateMessageRequest request, ISender sender) =>
        {
            var result = await sender.Send(request.Message);
            return Results.Created($"messages/{result}", request);
        }).WithTags("Messages")
        .WithName("CreateMessage");
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Commands\CreateMessage\CreateMessageHandler.cs
===============================

using sna_domain.Entities;

namespace sna_application.Messages.Commands.CreateMessage;

public record CreateMessageCommand( 
    string FullName ,
    string Email,
    string Phone,
    string Content,
    string Subject
): IRequest<int>;

public class CreateMessageValidator : AbstractValidator<CreateMessageCommand>
{
    public CreateMessageValidator()
    {
        RuleFor(c=>c.FullName)
        .NotEmpty()
        .WithMessage("FullName is required");

        RuleFor(m=>m.Email)
        .EmailAddress()
        .WithMessage("Email is not a valid email address required");

        RuleFor(m=> m.Phone)
        .NotEmpty()
        .WithMessage("Phone Number is required");

        RuleFor(m=> m.Subject)
        .NotEmpty()
        .WithMessage("Subject is required");

        RuleFor(m=> m.Content)
        .MinimumLength(50)
        .MaximumLength(1000)
        .WithMessage("Your message must be at the range of 50 - 1000 characters");
        
    }
}

internal class CreateMessageHandler(IMessageRepository _repos, IUnitOfWork _unitOfWork)
: IRequestHandler<CreateMessageCommand, int>
{
    public async Task<int> Handle(CreateMessageCommand request, CancellationToken cancellationToken)
    {
        var message = new Message
        {
            FullName = request.FullName,
            Email = request.Email,
            Phone = request.Phone,
            Content = request.Content,
            Subject = request.Subject
        };
        await _repos.AddMessageAsync(message);
       await _unitOfWork.SaveChangesAsync(cancellationToken);
       
        return message.Id;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Commands\DeleteMessage\DeleteMessageEndpoint.cs
===============================
using Microsoft.AspNetCore.Http.HttpResults;

namespace sna_application.Messages.Commands.DeleteMessage;
public class DeleteMessageEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapDelete("api/messages/{id:int}", async (int id, ISender send) =>
        {
            var result = await send.Send(new DeleteMessageCommand(id));

            if(!result) return Results.BadRequest($"Failed to delete message with id:{id}");
            return Results.NoContent();
        }).WithTags("Messages")
        .WithName("DeleteMessage")
        .Produces<NoContent>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Commands\DeleteMessage\DeleteMessageHandler.cs
===============================

namespace sna_application.Messages.Commands.DeleteMessage;



public record DeleteMessageCommand(int Id): IRequest<bool>;
internal class DeleteMessageHandler(IMessageRepository _repository, IUnitOfWork _unitOfWork) : IRequestHandler<DeleteMessageCommand, bool>
{
    public async Task<bool> Handle(DeleteMessageCommand request, CancellationToken cancellationToken)
    {
        var entity = await _repository.GetOneMessageAsync(request.Id,false) ??
        throw new NotFoundException("Message",request.Id.ToString());
         _repository.DeleteMessage(entity);
         return await _unitOfWork.SaveChangesAsync(cancellationToken);
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Commands\EditMessage\EditMessageHandler.cs
===============================
namespace sna_application.Messages.Commands.EditMessage;

internal class EditMessageHandler
{
    
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Dtos\MessageDto.cs
===============================
namespace sna_application.Messages.Dtos;

public record MessageDto(int Id, 
                string FullName, 
                string Email, 
                string Phone,
                string Subject,
                string Content ,
                bool IsRead);



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Queries\GetAllMessages\GetAllMessagesEndpoint.cs
===============================
namespace sna_application.Messages.Queries.GetAllMessages;

public record GetAllMessagesResponse(List<MessageDto>? Messages);
public class GetAllMessagesEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/messages", async(ISender sender) =>
        {
            var result = await sender.Send(new GetMessagesQuery());
            return Results.Ok(new GetAllMessagesResponse(result));
        }).WithName("GetMessages")
        .WithTags("Messages")
        .WithDescription("Retrieves all messages")
        .Produces<GetAllMessagesResponse>();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Queries\GetAllMessages\GetAllMessagesHandler.cs
===============================
using sna_domain.Entities;

namespace sna_application.Messages.Queries.GetAllMessages;

public record GetMessagesQuery: IRequest<List<MessageDto>>;
internal class GetAllMessagesHandler(IMessageRepository _repository) :
IRequestHandler<GetMessagesQuery, List<MessageDto>>{
    public async Task<List<MessageDto>> Handle(GetMessagesQuery request, CancellationToken cancellationToken)
    {
        var entities= await _repository.GetAllMessagesAsync(false);
        var dtos= entities.Adapt<List<MessageDto>>();
        return dtos;
    }
}




===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Queries\GetMessageById\GetMessageByIdEndpoint.cs
===============================
namespace sna_application.Messages.Queries.GetMessageById;


public record GetMessageByIdResponse(MessageDto Message);

public class GetMessageByIdEndpoint : ICarterModule
{
    public void AddRoutes(IEndpointRouteBuilder app)
    {
        app.MapGet("api/messages/{id:int}", async ( int id, ISender sender) =>
        {
            var result = await sender.Send(new GetMessageByIdQuery(id));
            return Results.Ok(new GetMessageByIdResponse(result));
        }).WithTags("Messages")
        .WithName("GetMessageById")
        .Produces<GetMessageByIdResponse>()
        .WithDescription("Retrieves message by its identifier");
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\Messages\Queries\GetMessageById\GetMessageByIdHandler.cs
===============================
using sna_domain.Exceptions;

namespace sna_application.Messages.Queries.GetMessageById;

public record GetMessageByIdQuery(int Id) : IRequest<MessageDto>;

internal class GetMessageByIdHandler(IMessageRepository _repo) :
 IRequestHandler<GetMessageByIdQuery, MessageDto>
{
    public async Task<MessageDto> Handle(GetMessageByIdQuery request, CancellationToken cancellationToken)
    {
        var entity = await _repo.GetOneMessageAsync(request.Id,false)
         ?? throw new NotFoundException("Message",request.ToString());
        var dto = entity.Adapt<MessageDto>();
        return dto;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\obj\Debug\net9.0\.NETCoreApp,Version=v9.0.AssemblyAttributes.cs
===============================
// <autogenerated />
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(".NETCoreApp,Version=v9.0", FrameworkDisplayName = ".NET 9.0")]


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\obj\Debug\net9.0\sna-application.AssemblyInfo.cs
===============================
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Reflection;

[assembly: System.Reflection.AssemblyCompanyAttribute("sna-application")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Debug")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0+b5397b271850ce42f51b2f6a44a5b3442db8c0b6")]
[assembly: System.Reflection.AssemblyProductAttribute("sna-application")]
[assembly: System.Reflection.AssemblyTitleAttribute("sna-application")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]

// Generated by the MSBuild WriteCodeFragment class.



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-application\obj\Debug\net9.0\sna-application.GlobalUsings.g.cs
===============================
// <auto-generated/>
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Threading;
global using global::System.Threading.Tasks;


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-bootstrapper-api\Program.cs
===============================
using Carter;
using Scalar.AspNetCore;
using Serilog;
using sna_application.Extensions;
using sna_bootstrapper_api.Exceptions.Handlers;
using sna_infrastructure.Extensions;

var builder = WebApplication.CreateBuilder(args);

//Serilg Configuration
builder.Configuration.AddJsonFile("serilog.json");
builder.Host.UseSerilog((context, configuration) =>
    {
        //To configure minimally serilog, we need to provide these two parameters
        configuration.ReadFrom
                .Configuration(context.Configuration);
    });

// Add services to the container.
builder.Services.AddControllers();
builder.Services.AddOpenApi();
builder.Services.AddInfrastructure(builder.Configuration);
builder.Services.AddApplication();
builder.Services.AddAuthorization();
//builder.Services.AddScoped<CustomExceptionMiddleware>();

builder.Services.AddCors(options =>
{
    options.AddPolicy("AllowFrontend",
        policy =>
        {
            policy
                .WithOrigins(
                    "http://localhost:4200",   // Angular dev
                    "https://localhost:4200"
                )
                .AllowAnyHeader()
                .AllowAnyMethod();
        });
});

builder.Services.AddProblemDetails();
builder.Services.AddExceptionHandler<CustomExceptionHandler>();

var app = builder.Build();
//Logging configuration HTTP one
// Configure the HTTP request pipeline.

app.UseExceptionHandler();

if (app.Environment.IsDevelopment())
{
    app.MapOpenApi();
    app.MapScalarApiReference();
}

// 2. Logging des requï¿½tes (pour voir les logs incluant l'erreur gï¿½rï¿½e)
app.UseSerilogRequestLogging();

// 3. Sï¿½curitï¿½ et CORS
app.UseCors("AllowFrontend");
app.UseAuthorization();

// 4. Mapping des endpoints (Carter, Controllers)
app.MapCarter();
app.MapControllers();

app.Run();


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-bootstrapper-api\Exceptions\Handlers\CustomExceptionHandler.cs
===============================
using Microsoft.AspNetCore.Diagnostics;
using Microsoft.AspNetCore.Mvc;
using sna_domain.Exceptions;
using System.ComponentModel.DataAnnotations;
using System.Diagnostics;

namespace sna_bootstrapper_api.Exceptions.Handlers;

//public class CustomExceptionHandler(ILogger<CustomExceptionHandler> _logger): IMiddleware
//{
//    public async Task InvokeAsync(HttpContext context, RequestDelegate next)
//    {
//        try
//        {
//            await next.Invoke(context);
//        }
//        catch (FluentValidation.ValidationException validationException)
//        {
//            _logger.LogWarning("{Message}", validationException.Message);
//            context.Response.StatusCode = StatusCodes.Status400BadRequest;
//            var problemDetails = new ProblemDetails
//            {
//                Title = validationException.GetType().Name,
//                Status = context.Response.StatusCode,
//                Detail = validationException.Message,
//                Instance = context.Request.Path
//            };

//            problemDetails.Extensions.Add("TraceId", context.TraceIdentifier);
//            problemDetails.Extensions.Add("ValidationError", validationException.Errors);
//            await context.Response.WriteAsJsonAsync(problemDetails);

//        }
//        catch (NotFoundException notFoundException)
//        {
//            _logger.LogWarning("Resource not found:{@Resource}", notFoundException.Message);
//            context.Response.StatusCode = StatusCodes.Status404NotFound;
//            var problemDetails = new ProblemDetails
//            {
//                Title = notFoundException.GetType().Name,
//                Status = context.Response.StatusCode,
//                Detail = notFoundException.Message,
//                Instance = context.Request.Path
//            };

//            problemDetails.Extensions.Add("TraceId", context.TraceIdentifier);
//            await context.Response.WriteAsJsonAsync(problemDetails);
//        }
//        catch(BadRequestException badRequestException)
//        {
//            _logger.LogWarning("Resource not found:{@Resource}", badRequestException.Message);
//            context.Response.StatusCode = StatusCodes.Status400BadRequest;
//            var problemDetails = new ProblemDetails
//            {
//                Title = badRequestException.GetType().Name,
//                Status = context.Response.StatusCode,
//                Detail = badRequestException.Message,
//                Instance = context.Request.Path
//            };

//            problemDetails.Extensions.Add("TraceId", context.TraceIdentifier);
//            await context.Response.WriteAsJsonAsync(problemDetails);
//        }
//        catch(InternalServerException internalServerException)
//        {
//            _logger.LogWarning("Resource not found:{@Resource}", internalServerException.Message);
//            context.Response.StatusCode = StatusCodes.Status500InternalServerError;
//            var problemDetails = new ProblemDetails
//            {
//                Title = internalServerException.GetType().Name,
//                Status = context.Response.StatusCode,
//                Detail = internalServerException.Message,
//                Instance = context.Request.Path
//            };

//            problemDetails.Extensions.Add("TraceId", context.TraceIdentifier);
//            await context.Response.WriteAsJsonAsync(problemDetails);
//        }
//        catch (Exception ex)
//        {
//            _logger.LogError("Something went wrong:{Message}", ex.Message);

//            context.Response.StatusCode = StatusCodes.Status500InternalServerError;
//            await context.Response.WriteAsJsonAsync(new
//            {
//                statusCode = context.Response.StatusCode,
//                message = ex.Message
//            });

//        }
//    }

//}
public class CustomExceptionHandler(ILogger<CustomExceptionHandler> logger) : IExceptionHandler
{
    [DebuggerStepThrough]
    public async ValueTask<bool> TryHandleAsync(HttpContext context, Exception exception, CancellationToken cancellationToken)
    {
        logger.LogError(
            "Error Message: {exceptionMessage}, Time of occurrence {time}",
            exception.Message, DateTime.UtcNow);

        (string Detail, string Title, int StatusCode) details = exception switch
        {
            InternalServerException =>
            (
                exception.Message,
                exception.GetType().Name,
                context.Response.StatusCode = StatusCodes.Status500InternalServerError
            ),
            ValidationException =>
            (
                exception.Message,
                exception.GetType().Name,
                context.Response.StatusCode = StatusCodes.Status400BadRequest
            ),
            BadRequestException =>
            (
                exception.Message,
                exception.GetType().Name,
                context.Response.StatusCode = StatusCodes.Status400BadRequest
            ),
            DomainException =>
            (
                exception.Message,
                exception.GetType().Name,
                context.Response.StatusCode = StatusCodes.Status400BadRequest
            ),
            NotFoundException =>
            (
                exception.Message,
                exception.GetType().Name,
                context.Response.StatusCode = StatusCodes.Status404NotFound
            ),
            _ =>
            (
                exception.Message,
                exception.GetType().Name,
                context.Response.StatusCode = StatusCodes.Status500InternalServerError
            )
        };

        var problemDetails = new ProblemDetails
        {
            Title = details.Title,
            Status = details.StatusCode,
            Detail = details.Detail,
            Instance = context.Request.Path
        };

        problemDetails.Extensions.Add("TraceId", context.TraceIdentifier);
        if (exception is FluentValidation.ValidationException validationException)
            problemDetails.Extensions.Add("ValidationResult", validationException.Errors);

        await context.Response.WriteAsJsonAsync(problemDetails, cancellationToken);
        return true;

    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-bootstrapper-api\obj\Debug\net9.0\.NETCoreApp,Version=v9.0.AssemblyAttributes.cs
===============================
// <autogenerated />
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(".NETCoreApp,Version=v9.0", FrameworkDisplayName = ".NET 9.0")]


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-bootstrapper-api\obj\Debug\net9.0\sna-bootstrapper-api.AssemblyInfo.cs
===============================
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Reflection;

[assembly: System.Reflection.AssemblyCompanyAttribute("sna-bootstrapper-api")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Debug")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0+b5397b271850ce42f51b2f6a44a5b3442db8c0b6")]
[assembly: System.Reflection.AssemblyProductAttribute("sna-bootstrapper-api")]
[assembly: System.Reflection.AssemblyTitleAttribute("sna-bootstrapper-api")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]

// Generated by the MSBuild WriteCodeFragment class.



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-bootstrapper-api\obj\Debug\net9.0\sna-bootstrapper-api.GlobalUsings.g.cs
===============================
// <auto-generated/>
global using global::Microsoft.AspNetCore.Builder;
global using global::Microsoft.AspNetCore.Hosting;
global using global::Microsoft.AspNetCore.Http;
global using global::Microsoft.AspNetCore.Routing;
global using global::Microsoft.Extensions.Configuration;
global using global::Microsoft.Extensions.DependencyInjection;
global using global::Microsoft.Extensions.Hosting;
global using global::Microsoft.Extensions.Logging;
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Net.Http.Json;
global using global::System.Threading;
global using global::System.Threading.Tasks;


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-bootstrapper-api\obj\Debug\net9.0\sna-bootstrapper-api.MvcApplicationPartsAssemblyInfo.cs
===============================
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Reflection;

[assembly: Microsoft.AspNetCore.Mvc.ApplicationParts.ApplicationPartAttribute("Microsoft.AspNetCore.OpenApi")]
[assembly: Microsoft.AspNetCore.Mvc.ApplicationParts.ApplicationPartAttribute("sna-application")]

// Generated by the MSBuild WriteCodeFragment class.



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\GlobalUsings.cs
===============================
global using sna_domain.Entities;


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Entities\ApplicationUser.cs
===============================
using sna_domain.ValueObjects;

namespace sna_domain.Entities;

public class ApplicationUser
{
    public Guid Id {get;set;}
    public string FirstName { get; set; } = default!;
    public string LastName { get; set; } = default!;
    public string Image { get; set; } = default!;
    public Address Address { get; set; } = new();
    public IList<Graph> Graphs {get;set;}=[];

}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Entities\BaseEntity.cs
===============================
namespace sna_domain.Entities;

public abstract class BaseEntity
{
    public int Id { get; protected set; } 
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Entities\ContactInfo.cs
===============================
namespace sna_domain.Entities;

public class ContactInfo : BaseEntity
{
    public string Email { get; set; } = default!;
    public string Phone { get; set; } = default!;
    public string FullAddress { get; set; } = default!;
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Entities\Edge.cs
===============================
using sna_domain.Exceptions;

namespace sna_domain.Entities;

public class Edge
{
    public Guid GraphId {get; private set;}
    public Graph Graph { get; private set; } = default!;

    private int _nodeAId;
    private int _nodeBId;
    private Node _nodeA = default!;
    private Node _nodeB = default!;

    public int NodeAId => _nodeAId;
    public int NodeBId => _nodeBId;
    public Node NodeA => _nodeA;
    public Node NodeB => _nodeB;
    public double Weight { get; private set; }

    private void CalculateWeight()
    {
        double activity = Math.Pow(_nodeA.Activity - _nodeB.Activity, 2);

        double interaction = Math.Pow(_nodeA.Interaction - _nodeB.Interaction, 2);

        double connection = Math.Pow(_nodeA.Connections - _nodeB.Connections, 2);

        double sum_properties = activity + interaction + connection;
        var _weight = 1.0 / (1.0 + Math.Sqrt(sum_properties));
        var roundedWeight= Math.Round(_weight,3,MidpointRounding.AwayFromZero);
        Weight=roundedWeight;
    }
    private Edge() { }
    private Edge(Guid graphId,Node a, Node b)
    {
        // deterministic ordering (important!)
        if (a.Id.CompareTo(b.Id) < 0)
        {
            _nodeA = a;
            _nodeB = b;
        }
        else
        {
            _nodeA = b;
            _nodeB = a;
        }

        _nodeAId = _nodeA.Id;
        _nodeBId = _nodeB.Id;
        GraphId= graphId;

        CalculateWeight();
    }
    internal static Edge Create(Guid graphId,Node node_1, Node node_2)
    {
        //Est ce a node can be connected to itself
        //Thing to verify later on
        if (node_1.Equals(node_2))
            throw new DomainException("Self-loops are not allowed.");

        return new Edge(graphId,node_1, node_2 );
    }
    public bool Connects(Node a, Node b)
    {
        return (_nodeA.Equals(a) && _nodeB.Equals(b)) ||
               (_nodeA.Equals(b)  && _nodeB.Equals(a));
    }
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Entities\Graph.cs
===============================
using sna_domain.Exceptions;

namespace sna_domain.Entities;

public class Graph 
{
    //public Guid OwnerId {get; private set;}
    //public ApplicationUser Owner {get; private set;}= default!;
    public Guid Id {get;set;}
    private  List<Node> _nodes = [];
    private  List<Edge> _edges = [];
    public DateTime CreatedOn { get; private set; } = DateTime.UtcNow;
    public DateTime LastUpdatedAt { get; private set; }=default!;
    public string Title {get;set;} =default!;
    public string? Description { get; set;} =default!;
    public ICollection<Node> Nodes => _nodes;
    public ICollection<Edge> Edges => _edges;
    private readonly Dictionary<int, List<Edge>> _adjacencyList = new();


    public int Order => _nodes.Count;
    public int Size => _edges.Count;
    /*
    public Graph(ApplicationUser user)
    {
        Owner = user ?? throw new ArgumentNullException(nameof(user));
        OwnerId = user.Id;

    }*/
    private Graph()
    {
        Id= Guid.NewGuid();
    }
    private Graph(string title) 
    {
        Id=Guid.NewGuid();
        Title= title;
    }
    private Graph(string title, string? description)
    {
        Id=Guid.NewGuid();
        Title= title;
        Description = description;
    }
    public static Graph Create(string title)=> new(title);
    public static Graph Create(string title, string? description)=>new(title,description);
    public void Touch() => LastUpdatedAt = DateTime.UtcNow;

    #region Nodes operations

    
    public static Node CreateNode(Guid graphId,string tag,double activity,int interaction)
    {
        return Node.Create(graphId,tag,activity,interaction);
    }
    public Node? GetNodeFromGraphById(int nodeId) 
            => _nodes.FirstOrDefault(n=>n.Id==nodeId);
    public Node? GetNodeFromGraphByTag(string tag)
            => _nodes.FirstOrDefault(n=>n.Tag==tag);
    // Add one or more than one node
    public Node AddNode(Node node)
    {
        if (_nodes.Any(n => n.Equals(node) ))
            throw new DomainException($"Node already exists in this graph.");

        _nodes.Add(node);

        return node;
    }

    public void AddNodes(IEnumerable<Node> nodes)
    {
        foreach(var node in nodes)
        {
            AddNode(node);
        }
    }

    // Deleting a node 
    public bool DeleteOneNode( Node node)
    {
        if (_nodes.Contains(node))
        {
            var nodeId= node.Id;
            var edges = _edges.Where(e => e.NodeAId == nodeId ||  e.NodeBId == nodeId)
                            .ToList();
            if (edges.Count > 0)
            {
                foreach(var edge in edges)
                {
                    _edges.Remove(edge);
                }
            }
            
            _nodes.Remove(node);

            return true;
        }
        return false;
    }



    #endregion
    public void ConnectNodes(Node a, Node b)
    {
        if (!_nodes.Contains(a) || !_nodes.Contains(b))
            throw new DomainException("Both nodes must belong to the same graph.");
        
        if (_edges.Any(e => e.Connects(a, b)))
            throw new DomainException("Edge already exists.");

        var edge = Edge.Create(Id,a, b);

        _edges.Add(edge);
        a.UpdateLinksCount();
        b.UpdateLinksCount();

        Touch();
    }

    public Edge GetEdgeFromGraph(int nodeAId, int nodeBId)
    {
        if (!_nodes.Any(n=>n.Id==nodeAId) || !_nodes.Any(n=>n.Id==nodeBId))
            throw new DomainException("Both nodes must belong to the same graph.");
        
        return _edges.FirstOrDefault(e=>(e.NodeAId==nodeAId && e.NodeBId==nodeBId)
        || (e.NodeAId==nodeBId && e.NodeBId==nodeAId))!;
    }

    public void DisConnectNodes(Edge edge) => _edges.Remove(edge);
   
    public bool ContainsNode(Node node)
    {
        return _nodes.Contains(node);
    }

    //Computation
    public bool ComputeDegreeCentrality()
    {
        if (Order < 2) return false;
        foreach (var node in _nodes)
        {
            int degree = node.Connections;
            decimal normalized = Order > 1 ? (decimal)degree / (Order - 1) : 0m;
            var normalizedRounded = Math.Round(
                normalized,
                3,
                MidpointRounding.AwayFromZero
            );
            node.SetCentrality(degree, normalizedRounded);
        }
        return true;
    }
    public bool IsConnected()
    {
        if (Order <= 1)
            return true;

        var visited = new HashSet<int>();
        var stack = new Stack<Node>();

        var startNode = _nodes.First();
        stack.Push(startNode);
        visited.Add(startNode.Id);

        while (stack.Count > 0)
        {
            var current = stack.Pop();

            var neighbors = _edges
                .Where(e => e.NodeAId == current.Id || e.NodeBId == current.Id)
                .Select(e =>
                    e.NodeAId == current.Id
                        ? _nodes.First(n => n.Id == e.NodeBId)
                        : _nodes.First(n => n.Id == e.NodeAId)
                );

            foreach (var neighbor in neighbors)
            {
                if (!visited.Contains(neighbor.Id))
                {
                    visited.Add(neighbor.Id);
                    stack.Push(neighbor);
                }
            }
        }

        return visited.Count == Order;
    }

   
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Entities\Message.cs
===============================
namespace sna_domain.Entities;

public class Message : BaseEntity
{
    public string FullName {get;set;} = default!;
    public string Email {get;set;} = default!;
    public string Phone { get;set;} = default!;
    public string Subject {get;set;} =default!;
    public string Content {get;set;} = default!;
    public bool IsRead { get;set;} = false;
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Entities\Node.cs
===============================
using sna_domain.Exceptions;

namespace sna_domain.Entities;

public class Node : BaseEntity, IEquatable<Node>
{
    
    public Guid GraphId {get;private set;}
    public Graph Graph { get; private set; } = default!;
    public string Tag { get; set; } = default!;

    //Characteristic
    public double Activity { get; set; }
    public int Interaction { get; set; }
    public decimal? NormalizedDegreeCentrality { get; private set; }
    public int DegreeCentrality { get; private set; }
    public int Connections { get; private set; }

    private Node(Guid graphId) { GraphId = graphId; }

    private Node(Guid graphId,string tag) 
    {
        Tag = tag;
        GraphId = graphId;
    }
    private Node(Guid graphId,string tag, double activity, int interaction)
    {
        GraphId= graphId;
        Tag= tag;
        Activity = activity;
        Interaction = interaction;
    }
    
    internal static Node Create(Guid graphId,string tag,double activity,int interaction)
    =>new(graphId,tag,activity,interaction);

    internal static Node Create(Guid graphId) => new(graphId);
    internal static Node Create(Guid graphId, string tag)=>new(graphId,tag);

    public void UpdateLinksCount()
    {
        Connections++;
    }
    internal IEnumerable<Node> GetNeighbors(Graph graph)
    {
        return graph.Edges
            .Where(e => e.NodeAId == Id || e.NodeBId == Id)
            .Select(e => e.NodeAId == Id ? e.NodeB : e.NodeA);
    }
    internal void SetCentrality(int degree, decimal normalized)
    {
        //Need to handle edge cases when degree < 0 and normalize is not inside of [0,1]
        if (degree < 0)
        throw new DomainException("Degree cannot be negative.");

        if (normalized < 0 || normalized > 1)
        throw new DomainException("Normalized centrality must be in [0,1]."); 
        
        DegreeCentrality = degree;
        NormalizedDegreeCentrality = normalized;

    }

    public bool Equals(Node? other)
    {
        if(other is null) return false;
        if(ReferenceEquals(this, other)) return true;
        return Tag==other.Tag && GraphId==other.GraphId;
    }

    public override bool Equals(object? obj)
    {
        return Equals(obj as Node);
    }

    public override int GetHashCode()
    {
        return HashCode.Combine(GraphId,Id);
    }
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Entities\Enums\Algorithm.cs
===============================
namespace sna_domain.Entities.Enums;

public enum Algorithm
{
    BFS, DFS, Dijkstra, AStar,Centrality,Coloring,
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Exceptions\BadRequestException.cs
===============================
namespace sna_bootstrapper_api.Exceptions;
public class BadRequestException : Exception
{
    public IEnumerable<object> Errors = default!;

    public string? Details { get; }


    public BadRequestException(string message, string details)
        : base(message)
    {
        Details = details;
    }

    public BadRequestException(string? message, IEnumerable<object> enumerable) : base(message)
    {
        this.Errors = enumerable;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Exceptions\DomainException.cs
===============================
using Microsoft.IdentityModel.Tokens;
namespace sna_domain.Exceptions;

public class DomainException : Exception
{
    public DomainException(string message): base(message){}
}



public class EmptyGraphException : Exception
{
    public EmptyGraphException(string ressourceType): base($"Graph with Id: {ressourceType} is almost empty and contains less than two 2"){}
}




===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Exceptions\InternalServerException.cs
===============================
namespace sna_domain.Exceptions;

public class InternalServerException: Exception
{
    public string? Details { get; }
    
    public InternalServerException(string message)
        : base(message)
    {
    }

    public InternalServerException(string message, string details) 
        : base(message)
    {
        Details = details;
    }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Exceptions\NotFoundException.cs
===============================
namespace sna_domain.Exceptions;
public class NotFoundException : Exception
{
    public NotFoundException(string message) 
        : base(message)
    {
    }
    public NotFoundException(string ressourceType, string ressourceIdentifier, string reference)
    : base($"{ressourceType} with Id : {ressourceIdentifier} not found in reference :{reference}")
    {
        
    }

    public NotFoundException(string name, object key) 
        : base($"Ressource \"{name}\" ({key}) was not found.")
    {
    }
}


public class FailedToImportGraphSnapshotException(string message) : Exception(message)
{
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\obj\Debug\net9.0\.NETCoreApp,Version=v9.0.AssemblyAttributes.cs
===============================
// <autogenerated />
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(".NETCoreApp,Version=v9.0", FrameworkDisplayName = ".NET 9.0")]


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\obj\Debug\net9.0\sna-domain.AssemblyInfo.cs
===============================
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Reflection;

[assembly: System.Reflection.AssemblyCompanyAttribute("sna-domain")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Debug")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0+b5397b271850ce42f51b2f6a44a5b3442db8c0b6")]
[assembly: System.Reflection.AssemblyProductAttribute("sna-domain")]
[assembly: System.Reflection.AssemblyTitleAttribute("sna-domain")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]

// Generated by the MSBuild WriteCodeFragment class.



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\obj\Debug\net9.0\sna-domain.GlobalUsings.g.cs
===============================
// <auto-generated/>
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Threading;
global using global::System.Threading.Tasks;


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Repositories\IContactInfoRepository.cs
===============================
namespace sna_domain.Repositories;

public interface IContactInfoRepository
{
    Task<IEnumerable<ContactInfo>> GetAllContactInfosAsync(bool trackChChanges);
    Task<ContactInfo?> GetOneContactInfoAsync(int Id, bool trackChChanges);
    Task AddContactInfoAsync(ContactInfo contactInfo);
    void EditContactInfo(ContactInfo contactInfo);
    void DeleteContactInfo(ContactInfo contactInfo);
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Repositories\IGraphRepository.cs
===============================
namespace sna_domain.Repositories;

public interface IGraphRepository
{
    Task<List<Graph>> GetAllGraphsAsync(bool trackChChanges);
    Task<Graph?> GetGraphByIdAsync(Guid graphId, bool trackChChanges);
    Task AddGraphAsync(Graph graph);
    void EditGraph(Graph graph);
    void DeleteGraph(Graph graph);
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Repositories\IMessageRepository.cs
===============================
namespace sna_domain.Repositories;

public interface IMessageRepository
{
    Task<IEnumerable<Message>> GetAllMessagesAsync(bool trackChChanges);
    Task<Message?> GetOneMessageAsync(int Id, bool trackChChanges);
    Task AddMessageAsync(Message message);
    void DeleteMessage(Message message);
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Repositories\IRepositoryBase.cs
===============================
using System.Linq.Expressions;

namespace sna_domain.Repositories;
public interface IRepositoryBase<T> where T : class
{
    Task<IEnumerable<T>> GetAllAsync(bool trackChChanges);
    Task<T?> GetOneByIdAsync(Expression<Func<T,bool>> expression, bool trackChChanges);
    Task Create(T entity);
    void Delete(T entity);
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Repositories\IUnitOfWork.cs
===============================
namespace sna_domain.Repositories;
public interface IUnitOfWork
{
    Task<bool> SaveChangesAsync(CancellationToken cancellationToken= default);
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\Services\AlgorithmService.cs
===============================
using System.Linq;
using sna_domain.Exceptions;

namespace sna_domain.Services;

public record TraversalResult(
    IReadOnlyList<Node> Nodes,
    IReadOnlyList<Edge> Edges
);

public class GraphAlgorithms
{
    public static IReadOnlyList<Node> BFS(Graph graph, Node start, HashSet<Node> visited)
    {
        visited ??= [];
        var queue = new Queue<Node>();
        var result = new List<Node>();

        queue.Enqueue(start);
        visited.Add(start);

        while (queue.Count > 0)
        {
            var current = queue.Dequeue();
            result.Add(current);
            var neighbors = current.GetNeighbors(graph).ToList();
            foreach (var neighbor in neighbors )
            {
                if (visited.Add(neighbor))
                    queue.Enqueue(neighbor);
                
            }
        }

        return result;
    }
    //Making DFS symetric to BFS 
    public static IReadOnlyList<Node> DFS(Graph graph, Node start,HashSet<Node> visited)
    {
        if (!graph.ContainsNode(start))
            throw new NotFoundException($"Node {start.Tag}", start.Id.ToString(), graph.Title);
        visited ??= [];
        var result = new List<Node>();
        Visit(graph,start, visited, result);
        return result;
    }

    private static void Visit(Graph graph, Node node, HashSet<Node> visited, List<Node> result)
    {
        visited.Add(node);
        result.Add(node);

        foreach (var neighbor in node.GetNeighbors(graph))
        {
            if (!visited.Contains(neighbor))
                Visit(graph,neighbor, visited, result);
        }
    }

    public static IReadOnlyList<(Node Node, int Degree)> KDegreeCentrality(Graph graph, int? k)
    {
        if (k < 0)
            throw new DomainException("k must be positive.");
        if(!graph.ComputeDegreeCentrality())
            throw new EmptyGraphException(graph.Id.ToString());

        if(k is null)
            return [..graph.Nodes
                .Select(node => ( Node : node, node.DegreeCentrality))
                .OrderByDescending(node => node.DegreeCentrality)];

        return [..graph.Nodes
                .Select(node => ( Node : node, node.DegreeCentrality))
                .OrderByDescending(node => node.DegreeCentrality)
                .Take(k.Value)];
           
    }

    public static IReadOnlyList<IReadOnlyCollection<Node>> GetConnectedComponents(Graph graph)
    {
        var visited = new HashSet<Node>();
        var components = new List<IReadOnlyCollection<Node>>();

        foreach (var node in graph.Nodes)
        {
            if (visited.Contains(node)) continue;
            // components is a matrix here
            components.Add(BFS(graph,node, visited));
        }

        return components;
    }

    // Welsh-Powell graph coloring: assigns a color index to each node.
    // Color indices are integers; UI tarafÄ±nda gerÃ§ek renge palette ile dÃ¶nÃ¼ÅtÃ¼rÃ¼lebilir.
    public static IReadOnlyDictionary<Node, int> WelshPowell(Graph graph)
    {
        if (!graph.Nodes.Any())
            return new Dictionary<Node, int>();

        // Dereceye gÃ¶re azalan, aynÄ± derece iÃ§in Id ile deterministik sÄ±ra.
        var ordered = graph.Nodes
            .OrderByDescending(n => n.Connections)
            .ThenBy(n => n.Id)
            .ToList();

        var colorOf = new Dictionary<Node, int>();

        foreach (var node in ordered)
        {
            var neighborColors = node.GetNeighbors(graph)
                                      .Where(colorOf.ContainsKey)
                                      .Select(n => colorOf[n])
                                      .ToHashSet();

          /* Graph Color service 27.satÄ±r */  
            var color = 0;
            while (neighborColors.Contains(color))
                color++;

            colorOf[node] = color;
        }

        return colorOf;
    }

    public static IReadOnlyList<Node> Dijkstra(Graph graph, Node start, Node target)
    {
        if (!graph.Nodes.Contains(start))
            throw new NotFoundException(start.Tag, start.Id.ToString(), graph.Title);
        if (!graph.Nodes.Contains(target))
            throw new NotFoundException(target.Tag, target.Id.ToString(), graph.Title);

        var distances = graph.Nodes.ToDictionary(node => node, _ => double.PositiveInfinity);
        var previous = new Dictionary<Node, Node>();
        var queue = new PriorityQueue<Node, double>();

        distances[start] = 0;
        queue.Enqueue(start, 0);

        while (queue.Count > 0)
        {
            var current = queue.Dequeue();
            if (current.Equals(target))
                return ReconstructPath(previous, target);

            foreach (var neighbor in current.GetNeighbors(graph))
            {
                var weight = GetEdgeWeight(graph, current, neighbor);
                var tentative = distances[current] + weight;

                if (tentative < distances[neighbor])
                {
                    distances[neighbor] = tentative;
                    previous[neighbor] = current;
                    queue.Enqueue(neighbor, tentative);
                }
            }
        }

        throw new DomainException("No path found between the provided nodes.");
    }

    public static IReadOnlyList<Node> AStar(Graph graph, Node start, Node target)
    {
        if (!graph.Nodes.Contains(start))
            throw new NotFoundException(start.Tag, start.Id.ToString(), graph.Title);
        if (!graph.Nodes.Contains(target))
            throw new NotFoundException(target.Tag, target.Id.ToString(), graph.Title);

        var gScore = graph.Nodes.ToDictionary(node => node, _ => double.PositiveInfinity);
        var fScore = graph.Nodes.ToDictionary(node => node, _ => double.PositiveInfinity);
        var previous = new Dictionary<Node, Node>();
        var openSet = new PriorityQueue<Node, double>();

        gScore[start] = 0;
        fScore[start] = Heuristic(start, target);
        openSet.Enqueue(start, fScore[start]);

        while (openSet.Count > 0)
        {
            var current = openSet.Dequeue();
            if (current.Equals(target))
                return ReconstructPath(previous, target);

            foreach (var neighbor in current.GetNeighbors(graph))
            {
                var weight = GetEdgeWeight(graph, current, neighbor);
                var tentativeG = gScore[current] + weight;

                if (tentativeG < gScore[neighbor])
                {
                    previous[neighbor] = current;
                    gScore[neighbor] = tentativeG;
                    fScore[neighbor] = tentativeG + Heuristic(neighbor, target);
                    openSet.Enqueue(neighbor, fScore[neighbor]);
                }
            }
        }

        throw new DomainException("No path found between the provided nodes.");
    }

    private static double GetEdgeWeight(Graph graph, Node from, Node to)
    {
        var edge = graph.Edges.FirstOrDefault(e => e.Connects(from, to)) ??
         throw new DomainException("Edge not found between the provided nodes.");
        return edge.Weight;
    }

    private static IReadOnlyList<Node> ReconstructPath(Dictionary<Node, Node> previous, Node current)
    {
        var path = new List<Node>
        {
            current
        };

        while (previous.TryGetValue(current, out var prev))
        {
            current = prev;
            path.Add(current);
        }

        path.Reverse();
        return path;
    }

    private static double Heuristic(Node from, Node to)
    {
        // Admissible heuristic is zero; safe when no positional data exists.
        return 0;
    }

    

    public static IReadOnlyDictionary<Node, int> DetecteCommunity(Graph graph)
    {
        // 1. Initialize: Every node gets a unique label (usually its own ID)
        var labels = graph.Nodes.ToDictionary(n => n, n => n.Id);
        var nodesList = graph.Nodes.ToList();
        var rnd = new Random();
        bool changed = true;

        while (changed)
        {
            changed = false;
            
            // CRITICAL FIX 1: Shuffle processing order every iteration
            // (Using a standard Fisher-Yates shuffle extension or similar)
            nodesList.Shuffle(rnd); 

            foreach (var node in nodesList)
            {
                // Get neighbor labels
                var neighborLabels = node.GetNeighbors(graph)
                                        .Select(n => labels[n])
                                        .ToList();

                if (neighborLabels.Count == 0) continue;

                // Group by label frequency
                var groups = neighborLabels.GroupBy(l => l)
                                        .Select(g => new { Label = g.Key, Count = g.Count() })
                                        .ToList();

                int maxCount = groups.Max(g => g.Count);
                
                // Get all labels that have the max frequency (Candidates)
                var candidates = groups.Where(g => g.Count == maxCount)
                                    .Select(g => g.Label)
                                    .ToList();

                // CRITICAL FIX 2: Break ties randomly
                int newLabel = candidates[rnd.Next(candidates.Count)];

                if (labels[node] != newLabel)
                {
                    labels[node] = newLabel;
                    changed = true;
                }
            }
        }

        return labels;
    }

 
}

public static class ListExtensions
{
    public static void Shuffle<T>(this IList<T> list, Random rnd)
    {
        int n = list.Count;
        while (n > 1)
        {
            n--;
            int k = rnd.Next(n + 1);
            T value = list[k];
            list[k] = list[n];
            list[n] = value;
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-domain\ValueObjects\Address.cs
===============================
namespace sna_domain.ValueObjects;

public class Address
{
    public string Country { get; set; } = default!;
    public string City { get; set; } = default!;

}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\AssemblyReference.cs
===============================
namespace sna_infrastructure;

public sealed class AssemblyReference {}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\GlobalUsings.cs
===============================
global using Microsoft.Extensions.DependencyInjection;
global using Microsoft.EntityFrameworkCore.Metadata.Builders;
global using Microsoft.EntityFrameworkCore;
global using sna_infrastructure.Persistence;
global using sna_domain.Entities;
global using sna_domain.Repositories;


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Extensions\ServiceCollectionExtensions.cs
===============================
using Microsoft.Extensions.Configuration;
using sna_infrastructure.Persistence.Repositories;

namespace sna_infrastructure.Extensions;

public static class ServiceCollectionExtensions
{

    public static IServiceCollection AddInfrastructure(this IServiceCollection services, IConfiguration configuration)
    {

        services.AddDbContext<GraphVDbContext>(options=> {
            options.UseSqlServer(configuration.GetConnectionString("DatabaseConnection"));
        });

        services.AddScoped(typeof(IRepositoryBase<>),typeof(RepositoryBase<>));
        services.AddScoped<IUnitOfWork,UnitOfWork>();
        services.AddScoped<IMessageRepository,MessageRepository>();
        services.AddScoped<IContactInfoRepository,ContactInfoRepository>();
        services.AddScoped<IGraphRepository,GraphRepository>();
        return services;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251225194535_Initial.cs
===============================
using System;
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace sna_infrastructure.Migrations
{
    /// <inheritdoc />
    public partial class Initial : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.CreateTable(
                name: "ContactInfos",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    Email = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    Phone = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    FullAddress = table.Column<string>(type: "nvarchar(max)", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_ContactInfos", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "Graphs",
                columns: table => new
                {
                    Id = table.Column<Guid>(type: "uniqueidentifier", nullable: false),
                    CreatedOn = table.Column<DateTime>(type: "datetime2", nullable: false),
                    LastUpdatedAt = table.Column<DateTime>(type: "datetime2", nullable: false),
                    Title = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    Description = table.Column<string>(type: "nvarchar(max)", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Graphs", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "Messages",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    FullName = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    Email = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    Phone = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    Subject = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    Content = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    IsRead = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Messages", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "Nodes",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    GraphId = table.Column<Guid>(type: "uniqueidentifier", nullable: false),
                    Tag = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    Activity = table.Column<double>(type: "float", nullable: false),
                    Interaction = table.Column<int>(type: "int", nullable: false),
                    NormalizedDegreeCentrality = table.Column<double>(type: "float", nullable: true),
                    DegreeCentrality = table.Column<int>(type: "int", nullable: false),
                    Connections = table.Column<int>(type: "int", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Nodes", x => x.Id);
                    table.ForeignKey(
                        name: "FK_Nodes_Graphs_GraphId",
                        column: x => x.GraphId,
                        principalTable: "Graphs",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "Edges",
                columns: table => new
                {
                    GraphId = table.Column<Guid>(type: "uniqueidentifier", nullable: false),
                    NodeAId = table.Column<int>(type: "int", nullable: false),
                    NodeBId = table.Column<int>(type: "int", nullable: false),
                    Weight = table.Column<double>(type: "float", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Edges", x => new { x.GraphId, x.NodeAId, x.NodeBId });
                    table.CheckConstraint("CK_Edges_NodeOrder", "[NodeAId] < [NodeBId]");
                    table.ForeignKey(
                        name: "FK_Edges_Graphs_GraphId",
                        column: x => x.GraphId,
                        principalTable: "Graphs",
                        principalColumn: "Id");
                    table.ForeignKey(
                        name: "FK_Edges_Nodes_NodeAId",
                        column: x => x.NodeAId,
                        principalTable: "Nodes",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: "FK_Edges_Nodes_NodeBId",
                        column: x => x.NodeBId,
                        principalTable: "Nodes",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Restrict);
                });

            migrationBuilder.CreateIndex(
                name: "IX_Edges_GraphId_NodeAId_NodeBId",
                table: "Edges",
                columns: new[] { "GraphId", "NodeAId", "NodeBId" },
                unique: true);

            migrationBuilder.CreateIndex(
                name: "IX_Edges_NodeAId",
                table: "Edges",
                column: "NodeAId");

            migrationBuilder.CreateIndex(
                name: "IX_Edges_NodeBId",
                table: "Edges",
                column: "NodeBId");

            migrationBuilder.CreateIndex(
                name: "IX_Nodes_GraphId",
                table: "Nodes",
                column: "GraphId");
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropTable(
                name: "ContactInfos");

            migrationBuilder.DropTable(
                name: "Edges");

            migrationBuilder.DropTable(
                name: "Messages");

            migrationBuilder.DropTable(
                name: "Nodes");

            migrationBuilder.DropTable(
                name: "Graphs");
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251225194535_Initial.Designer.cs
===============================
// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using sna_infrastructure.Persistence;

#nullable disable

namespace sna_infrastructure.Migrations
{
    [DbContext(typeof(GraphVDbContext))]
    [Migration("20251225194535_Initial")]
    partial class Initial
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("sna_domain.Entities.ContactInfo", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullAddress")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("ContactInfos");
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("NodeAId")
                        .HasColumnType("int");

                    b.Property<int>("NodeBId")
                        .HasColumnType("int");

                    b.Property<double>("Weight")
                        .HasColumnType("float");

                    b.HasKey("GraphId", "NodeAId", "NodeBId");

                    b.HasIndex("NodeAId");

                    b.HasIndex("NodeBId");

                    b.HasIndex("GraphId", "NodeAId", "NodeBId")
                        .IsUnique();

                    b.ToTable("Edges", null, t =>
                        {
                            t.HasCheckConstraint("CK_Edges_NodeOrder", "[NodeAId] < [NodeBId]");
                        });
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime>("CreatedOn")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("LastUpdatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Graphs");
                });

            modelBuilder.Entity("sna_domain.Entities.Message", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsRead")
                        .HasColumnType("bit");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Messages");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<double>("Activity")
                        .HasColumnType("float");

                    b.Property<int>("Connections")
                        .HasColumnType("int");

                    b.Property<int>("DegreeCentrality")
                        .HasColumnType("int");

                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("Interaction")
                        .HasColumnType("int");

                    b.Property<double?>("NormalizedDegreeCentrality")
                        .HasColumnType("float");

                    b.Property<string>("Tag")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("GraphId");

                    b.ToTable("Nodes", (string)null);
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Edges")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeA")
                        .WithMany()
                        .HasForeignKey("NodeAId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeB")
                        .WithMany()
                        .HasForeignKey("NodeBId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Graph");

                    b.Navigation("NodeA");

                    b.Navigation("NodeB");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Nodes")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Graph");
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Navigation("Edges");

                    b.Navigation("Nodes");
                });
#pragma warning restore 612, 618
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251229202005_EditNode.cs
===============================
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace sna_infrastructure.Migrations
{
    /// <inheritdoc />
    public partial class EditNode : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropForeignKey(
                name: "FK_Edges_Nodes_NodeBId",
                table: "Edges");

            migrationBuilder.AlterColumn<decimal>(
                name: "NormalizedDegreeCentrality",
                table: "Nodes",
                type: "decimal(3,2)",
                precision: 3,
                nullable: true,
                oldClrType: typeof(double),
                oldType: "float",
                oldNullable: true);

            migrationBuilder.AddForeignKey(
                name: "FK_Edges_Nodes_NodeBId",
                table: "Edges",
                column: "NodeBId",
                principalTable: "Nodes",
                principalColumn: "Id",
                onDelete: ReferentialAction.Restrict);
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropForeignKey(
                name: "FK_Edges_Nodes_NodeBId",
                table: "Edges");

            migrationBuilder.AlterColumn<double>(
                name: "NormalizedDegreeCentrality",
                table: "Nodes",
                type: "float",
                nullable: true,
                oldClrType: typeof(decimal),
                oldType: "decimal(3,2)",
                oldPrecision: 3,
                oldNullable: true);

            migrationBuilder.AddForeignKey(
                name: "FK_Edges_Nodes_NodeBId",
                table: "Edges",
                column: "NodeBId",
                principalTable: "Nodes",
                principalColumn: "Id",
                onDelete: ReferentialAction.Cascade);
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251229202005_EditNode.Designer.cs
===============================
// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using sna_infrastructure.Persistence;

#nullable disable

namespace sna_infrastructure.Migrations
{
    [DbContext(typeof(GraphVDbContext))]
    [Migration("20251229202005_EditNode")]
    partial class EditNode
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("sna_domain.Entities.ContactInfo", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullAddress")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("ContactInfos");
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("NodeAId")
                        .HasColumnType("int");

                    b.Property<int>("NodeBId")
                        .HasColumnType("int");

                    b.Property<double>("Weight")
                        .HasColumnType("float");

                    b.HasKey("GraphId", "NodeAId", "NodeBId");

                    b.HasIndex("NodeAId");

                    b.HasIndex("NodeBId");

                    b.HasIndex("GraphId", "NodeAId", "NodeBId")
                        .IsUnique();

                    b.ToTable("Edges", null, t =>
                        {
                            t.HasCheckConstraint("CK_Edges_NodeOrder", "[NodeAId] < [NodeBId]");
                        });
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime>("CreatedOn")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("LastUpdatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Graphs");
                });

            modelBuilder.Entity("sna_domain.Entities.Message", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsRead")
                        .HasColumnType("bit");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Messages");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<double>("Activity")
                        .HasColumnType("float");

                    b.Property<int>("Connections")
                        .HasColumnType("int");

                    b.Property<int>("DegreeCentrality")
                        .HasColumnType("int");

                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("Interaction")
                        .HasColumnType("int");

                    b.Property<decimal?>("NormalizedDegreeCentrality")
                        .HasPrecision(3)
                        .HasColumnType("decimal(3,2)");

                    b.Property<string>("Tag")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("GraphId");

                    b.ToTable("Nodes", (string)null);
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Edges")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeA")
                        .WithMany()
                        .HasForeignKey("NodeAId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeB")
                        .WithMany()
                        .HasForeignKey("NodeBId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Graph");

                    b.Navigation("NodeA");

                    b.Navigation("NodeB");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Nodes")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Graph");
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Navigation("Edges");

                    b.Navigation("Nodes");
                });
#pragma warning restore 612, 618
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251229202355_EditNodeDecimalPrecision.cs
===============================
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace sna_infrastructure.Migrations
{
    /// <inheritdoc />
    public partial class EditNodeDecimalPrecision : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.AlterColumn<decimal>(
                name: "NormalizedDegreeCentrality",
                table: "Nodes",
                type: "decimal(4,3)",
                precision: 4,
                scale: 3,
                nullable: true,
                oldClrType: typeof(decimal),
                oldType: "decimal(3,2)",
                oldPrecision: 3,
                oldNullable: true);
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.AlterColumn<decimal>(
                name: "NormalizedDegreeCentrality",
                table: "Nodes",
                type: "decimal(3,2)",
                precision: 3,
                nullable: true,
                oldClrType: typeof(decimal),
                oldType: "decimal(4,3)",
                oldPrecision: 4,
                oldScale: 3,
                oldNullable: true);
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251229202355_EditNodeDecimalPrecision.Designer.cs
===============================
// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using sna_infrastructure.Persistence;

#nullable disable

namespace sna_infrastructure.Migrations
{
    [DbContext(typeof(GraphVDbContext))]
    [Migration("20251229202355_EditNodeDecimalPrecision")]
    partial class EditNodeDecimalPrecision
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("sna_domain.Entities.ContactInfo", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullAddress")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("ContactInfos");
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("NodeAId")
                        .HasColumnType("int");

                    b.Property<int>("NodeBId")
                        .HasColumnType("int");

                    b.Property<double>("Weight")
                        .HasColumnType("float");

                    b.HasKey("GraphId", "NodeAId", "NodeBId");

                    b.HasIndex("NodeAId");

                    b.HasIndex("NodeBId");

                    b.HasIndex("GraphId", "NodeAId", "NodeBId")
                        .IsUnique();

                    b.ToTable("Edges", null, t =>
                        {
                            t.HasCheckConstraint("CK_Edges_NodeOrder", "[NodeAId] < [NodeBId]");
                        });
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime>("CreatedOn")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("LastUpdatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Graphs");
                });

            modelBuilder.Entity("sna_domain.Entities.Message", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsRead")
                        .HasColumnType("bit");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Messages");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<double>("Activity")
                        .HasColumnType("float");

                    b.Property<int>("Connections")
                        .HasColumnType("int");

                    b.Property<int>("DegreeCentrality")
                        .HasColumnType("int");

                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("Interaction")
                        .HasColumnType("int");

                    b.Property<decimal?>("NormalizedDegreeCentrality")
                        .HasPrecision(4, 3)
                        .HasColumnType("decimal(4,3)");

                    b.Property<string>("Tag")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("GraphId");

                    b.ToTable("Nodes", (string)null);
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Edges")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeA")
                        .WithMany()
                        .HasForeignKey("NodeAId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeB")
                        .WithMany()
                        .HasForeignKey("NodeBId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Graph");

                    b.Navigation("NodeA");

                    b.Navigation("NodeB");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Nodes")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Graph");
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Navigation("Edges");

                    b.Navigation("Nodes");
                });
#pragma warning restore 612, 618
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251229204128_EditEdge.cs
===============================
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace sna_infrastructure.Migrations
{
    /// <inheritdoc />
    public partial class EditEdge : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.AlterColumn<double>(
                name: "Weight",
                table: "Edges",
                type: "float(4)",
                precision: 4,
                scale: 3,
                nullable: false,
                oldClrType: typeof(double),
                oldType: "float");
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.AlterColumn<double>(
                name: "Weight",
                table: "Edges",
                type: "float",
                nullable: false,
                oldClrType: typeof(double),
                oldType: "float(4)",
                oldPrecision: 4,
                oldScale: 3);
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251229204128_EditEdge.Designer.cs
===============================
// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using sna_infrastructure.Persistence;

#nullable disable

namespace sna_infrastructure.Migrations
{
    [DbContext(typeof(GraphVDbContext))]
    [Migration("20251229204128_EditEdge")]
    partial class EditEdge
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("sna_domain.Entities.ContactInfo", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullAddress")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("ContactInfos");
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("NodeAId")
                        .HasColumnType("int");

                    b.Property<int>("NodeBId")
                        .HasColumnType("int");

                    b.Property<double>("Weight")
                        .HasPrecision(4, 3)
                        .HasColumnType("float(4)");

                    b.HasKey("GraphId", "NodeAId", "NodeBId");

                    b.HasIndex("NodeAId");

                    b.HasIndex("NodeBId");

                    b.HasIndex("GraphId", "NodeAId", "NodeBId")
                        .IsUnique();

                    b.ToTable("Edges", null, t =>
                        {
                            t.HasCheckConstraint("CK_Edges_NodeOrder", "[NodeAId] < [NodeBId]");
                        });
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime>("CreatedOn")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("LastUpdatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Graphs");
                });

            modelBuilder.Entity("sna_domain.Entities.Message", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsRead")
                        .HasColumnType("bit");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Messages");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<double>("Activity")
                        .HasColumnType("float");

                    b.Property<int>("Connections")
                        .HasColumnType("int");

                    b.Property<int>("DegreeCentrality")
                        .HasColumnType("int");

                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("Interaction")
                        .HasColumnType("int");

                    b.Property<decimal?>("NormalizedDegreeCentrality")
                        .HasPrecision(4, 3)
                        .HasColumnType("decimal(4,3)");

                    b.Property<string>("Tag")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("GraphId");

                    b.ToTable("Nodes", (string)null);
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Edges")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeA")
                        .WithMany()
                        .HasForeignKey("NodeAId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeB")
                        .WithMany()
                        .HasForeignKey("NodeBId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Graph");

                    b.Navigation("NodeA");

                    b.Navigation("NodeB");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Nodes")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Graph");
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Navigation("Edges");

                    b.Navigation("Nodes");
                });
#pragma warning restore 612, 618
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251231191641_EditEdgeKey.cs
===============================
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace sna_infrastructure.Migrations
{
    /// <inheritdoc />
    public partial class EditEdgeKey : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropPrimaryKey(
                name: "PK_Edges",
                table: "Edges");

            migrationBuilder.DropIndex(
                name: "IX_Edges_GraphId_NodeAId_NodeBId",
                table: "Edges");

            migrationBuilder.AddPrimaryKey(
                name: "PK_Edges",
                table: "Edges",
                columns: new[] { "GraphId", "NodeAId" });

            migrationBuilder.CreateIndex(
                name: "IX_Edges_GraphId_NodeAId",
                table: "Edges",
                columns: new[] { "GraphId", "NodeAId" },
                unique: true);
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropPrimaryKey(
                name: "PK_Edges",
                table: "Edges");

            migrationBuilder.DropIndex(
                name: "IX_Edges_GraphId_NodeAId",
                table: "Edges");

            migrationBuilder.AddPrimaryKey(
                name: "PK_Edges",
                table: "Edges",
                columns: new[] { "GraphId", "NodeAId", "NodeBId" });

            migrationBuilder.CreateIndex(
                name: "IX_Edges_GraphId_NodeAId_NodeBId",
                table: "Edges",
                columns: new[] { "GraphId", "NodeAId", "NodeBId" },
                unique: true);
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251231191641_EditEdgeKey.Designer.cs
===============================
// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using sna_infrastructure.Persistence;

#nullable disable

namespace sna_infrastructure.Migrations
{
    [DbContext(typeof(GraphVDbContext))]
    [Migration("20251231191641_EditEdgeKey")]
    partial class EditEdgeKey
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("sna_domain.Entities.ContactInfo", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullAddress")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("ContactInfos");
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("NodeAId")
                        .HasColumnType("int");

                    b.Property<int>("NodeBId")
                        .HasColumnType("int");

                    b.Property<double>("Weight")
                        .HasPrecision(4, 3)
                        .HasColumnType("float(4)");

                    b.HasKey("GraphId", "NodeAId");

                    b.HasIndex("NodeAId");

                    b.HasIndex("NodeBId");

                    b.HasIndex("GraphId", "NodeAId")
                        .IsUnique();

                    b.ToTable("Edges", null, t =>
                        {
                            t.HasCheckConstraint("CK_Edges_NodeOrder", "[NodeAId] < [NodeBId]");
                        });
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime>("CreatedOn")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("LastUpdatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Graphs");
                });

            modelBuilder.Entity("sna_domain.Entities.Message", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsRead")
                        .HasColumnType("bit");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Messages");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<double>("Activity")
                        .HasColumnType("float");

                    b.Property<int>("Connections")
                        .HasColumnType("int");

                    b.Property<int>("DegreeCentrality")
                        .HasColumnType("int");

                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("Interaction")
                        .HasColumnType("int");

                    b.Property<decimal?>("NormalizedDegreeCentrality")
                        .HasPrecision(4, 3)
                        .HasColumnType("decimal(4,3)");

                    b.Property<string>("Tag")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("GraphId");

                    b.ToTable("Nodes", (string)null);
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Edges")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeA")
                        .WithMany()
                        .HasForeignKey("NodeAId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeB")
                        .WithMany()
                        .HasForeignKey("NodeBId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Graph");

                    b.Navigation("NodeA");

                    b.Navigation("NodeB");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Nodes")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Graph");
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Navigation("Edges");

                    b.Navigation("Nodes");
                });
#pragma warning restore 612, 618
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251231192920_EditEdgeKeys.cs
===============================
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace sna_infrastructure.Migrations
{
    /// <inheritdoc />
    public partial class EditEdgeKeys : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropPrimaryKey(
                name: "PK_Edges",
                table: "Edges");

            migrationBuilder.DropIndex(
                name: "IX_Edges_GraphId_NodeAId",
                table: "Edges");

            migrationBuilder.AddPrimaryKey(
                name: "PK_Edges",
                table: "Edges",
                columns: new[] { "GraphId", "NodeAId", "NodeBId" });

            migrationBuilder.CreateIndex(
                name: "IX_Edges_GraphId_NodeAId_NodeBId",
                table: "Edges",
                columns: new[] { "GraphId", "NodeAId", "NodeBId" },
                unique: true);
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropPrimaryKey(
                name: "PK_Edges",
                table: "Edges");

            migrationBuilder.DropIndex(
                name: "IX_Edges_GraphId_NodeAId_NodeBId",
                table: "Edges");

            migrationBuilder.AddPrimaryKey(
                name: "PK_Edges",
                table: "Edges",
                columns: new[] { "GraphId", "NodeAId" });

            migrationBuilder.CreateIndex(
                name: "IX_Edges_GraphId_NodeAId",
                table: "Edges",
                columns: new[] { "GraphId", "NodeAId" },
                unique: true);
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\20251231192920_EditEdgeKeys.Designer.cs
===============================
// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using sna_infrastructure.Persistence;

#nullable disable

namespace sna_infrastructure.Migrations
{
    [DbContext(typeof(GraphVDbContext))]
    [Migration("20251231192920_EditEdgeKeys")]
    partial class EditEdgeKeys
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("sna_domain.Entities.ContactInfo", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullAddress")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("ContactInfos");
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("NodeAId")
                        .HasColumnType("int");

                    b.Property<int>("NodeBId")
                        .HasColumnType("int");

                    b.Property<double>("Weight")
                        .HasPrecision(4, 3)
                        .HasColumnType("float(4)");

                    b.HasKey("GraphId", "NodeAId", "NodeBId");

                    b.HasIndex("NodeAId");

                    b.HasIndex("NodeBId");

                    b.HasIndex("GraphId", "NodeAId", "NodeBId")
                        .IsUnique();

                    b.ToTable("Edges", null, t =>
                        {
                            t.HasCheckConstraint("CK_Edges_NodeOrder", "[NodeAId] < [NodeBId]");
                        });
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime>("CreatedOn")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("LastUpdatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Graphs");
                });

            modelBuilder.Entity("sna_domain.Entities.Message", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsRead")
                        .HasColumnType("bit");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Messages");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<double>("Activity")
                        .HasColumnType("float");

                    b.Property<int>("Connections")
                        .HasColumnType("int");

                    b.Property<int>("DegreeCentrality")
                        .HasColumnType("int");

                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("Interaction")
                        .HasColumnType("int");

                    b.Property<decimal?>("NormalizedDegreeCentrality")
                        .HasPrecision(4, 3)
                        .HasColumnType("decimal(4,3)");

                    b.Property<string>("Tag")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("GraphId");

                    b.ToTable("Nodes", (string)null);
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Edges")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeA")
                        .WithMany()
                        .HasForeignKey("NodeAId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeB")
                        .WithMany()
                        .HasForeignKey("NodeBId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Graph");

                    b.Navigation("NodeA");

                    b.Navigation("NodeB");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Nodes")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Graph");
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Navigation("Edges");

                    b.Navigation("Nodes");
                });
#pragma warning restore 612, 618
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Migrations\GraphVDbContextModelSnapshot.cs
===============================
// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using sna_infrastructure.Persistence;

#nullable disable

namespace sna_infrastructure.Migrations
{
    [DbContext(typeof(GraphVDbContext))]
    partial class GraphVDbContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("sna_domain.Entities.ContactInfo", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullAddress")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("ContactInfos");
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("NodeAId")
                        .HasColumnType("int");

                    b.Property<int>("NodeBId")
                        .HasColumnType("int");

                    b.Property<double>("Weight")
                        .HasPrecision(4, 3)
                        .HasColumnType("float(4)");

                    b.HasKey("GraphId", "NodeAId", "NodeBId");

                    b.HasIndex("NodeAId");

                    b.HasIndex("NodeBId");

                    b.HasIndex("GraphId", "NodeAId", "NodeBId")
                        .IsUnique();

                    b.ToTable("Edges", null, t =>
                        {
                            t.HasCheckConstraint("CK_Edges_NodeOrder", "[NodeAId] < [NodeBId]");
                        });
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uniqueidentifier");

                    b.Property<DateTime>("CreatedOn")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("LastUpdatedAt")
                        .HasColumnType("datetime2");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Graphs");
                });

            modelBuilder.Entity("sna_domain.Entities.Message", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("FullName")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsRead")
                        .HasColumnType("bit");

                    b.Property<string>("Phone")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Subject")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("Messages");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<double>("Activity")
                        .HasColumnType("float");

                    b.Property<int>("Connections")
                        .HasColumnType("int");

                    b.Property<int>("DegreeCentrality")
                        .HasColumnType("int");

                    b.Property<Guid>("GraphId")
                        .HasColumnType("uniqueidentifier");

                    b.Property<int>("Interaction")
                        .HasColumnType("int");

                    b.Property<decimal?>("NormalizedDegreeCentrality")
                        .HasPrecision(4, 3)
                        .HasColumnType("decimal(4,3)");

                    b.Property<string>("Tag")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("GraphId");

                    b.ToTable("Nodes", (string)null);
                });

            modelBuilder.Entity("sna_domain.Entities.Edge", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Edges")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeA")
                        .WithMany()
                        .HasForeignKey("NodeAId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("sna_domain.Entities.Node", "NodeB")
                        .WithMany()
                        .HasForeignKey("NodeBId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Graph");

                    b.Navigation("NodeA");

                    b.Navigation("NodeB");
                });

            modelBuilder.Entity("sna_domain.Entities.Node", b =>
                {
                    b.HasOne("sna_domain.Entities.Graph", "Graph")
                        .WithMany("Nodes")
                        .HasForeignKey("GraphId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Graph");
                });

            modelBuilder.Entity("sna_domain.Entities.Graph", b =>
                {
                    b.Navigation("Edges");

                    b.Navigation("Nodes");
                });
#pragma warning restore 612, 618
        }
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\obj\Debug\net9.0\.NETCoreApp,Version=v9.0.AssemblyAttributes.cs
===============================
// <autogenerated />
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(".NETCoreApp,Version=v9.0", FrameworkDisplayName = ".NET 9.0")]


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\obj\Debug\net9.0\sna-infrastructure.AssemblyInfo.cs
===============================
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Reflection;

[assembly: System.Reflection.AssemblyCompanyAttribute("sna-infrastructure")]
[assembly: System.Reflection.AssemblyConfigurationAttribute("Debug")]
[assembly: System.Reflection.AssemblyFileVersionAttribute("1.0.0.0")]
[assembly: System.Reflection.AssemblyInformationalVersionAttribute("1.0.0+b5397b271850ce42f51b2f6a44a5b3442db8c0b6")]
[assembly: System.Reflection.AssemblyProductAttribute("sna-infrastructure")]
[assembly: System.Reflection.AssemblyTitleAttribute("sna-infrastructure")]
[assembly: System.Reflection.AssemblyVersionAttribute("1.0.0.0")]

// Generated by the MSBuild WriteCodeFragment class.



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\obj\Debug\net9.0\sna-infrastructure.GlobalUsings.g.cs
===============================
// <auto-generated/>
global using global::System;
global using global::System.Collections.Generic;
global using global::System.IO;
global using global::System.Linq;
global using global::System.Net.Http;
global using global::System.Threading;
global using global::System.Threading.Tasks;


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\GraphVDbContext.cs
===============================
namespace sna_infrastructure.Persistence;

internal class GraphVDbContext : DbContext
{
    internal DbSet<Graph> Graphs => Set<Graph>();
    internal DbSet<ContactInfo> ContactInfos => Set<ContactInfo>();
    internal DbSet<Message> Messages => Set<Message>();

    public GraphVDbContext(DbContextOptions options): base(options){}

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.ApplyConfigurationsFromAssembly(typeof(AssemblyReference).Assembly);
        base.OnModelCreating(modelBuilder);
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Configurations\ContactInfoConfiguration.cs
===============================
namespace sna_infrastructure.Persistence.Configurations;

public class ContactInfoConfiguration : IEntityTypeConfiguration<ContactInfo>
{
      public void Configure(EntityTypeBuilder<ContactInfo> builder)
    {
        builder.HasKey(m=>m.Id);
        builder.Property(m=>m.Email).IsRequired();
        builder.Property(m=>m.FullAddress).IsRequired();
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Configurations\EdgeConfiguration.cs
===============================
namespace sna_infrastructure.Persistence.Configurations;

public class EdgeConfiguration : IEntityTypeConfiguration<Edge>
{
    public void Configure(EntityTypeBuilder<Edge> builder)
    {
        builder.HasKey(e=> new {e.GraphId, e.NodeAId, e.NodeBId});
        
        builder.HasIndex(e => new { e.GraphId, e.NodeAId, e.NodeBId})
       .IsUnique();


        builder.ToTable("Edges", table =>
        {
            table.HasCheckConstraint(
                "CK_Edges_NodeOrder",
                "[NodeAId] < [NodeBId]"
            );
        });


        builder.HasOne(e=>e.NodeA)
            .WithMany()
            .HasForeignKey(n=>n.NodeAId)
            .OnDelete(DeleteBehavior.Cascade);

        builder.HasOne(e=>e.NodeB)
            .WithMany()
            .HasForeignKey(n=>n.NodeBId)
            .OnDelete(DeleteBehavior.Restrict);

        builder.HasOne(e => e.Graph)
               .WithMany(g => g.Edges)
               .HasForeignKey(e => e.GraphId)
               .OnDelete(DeleteBehavior.NoAction);

        builder.Property(e=>e.Weight).HasPrecision(4,3);
    }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Configurations\GraphConfig.cs
===============================

namespace sna_infrastructure.Persistence.Configurations;

public class GraphConfiguration : IEntityTypeConfiguration<Graph>
{
    public void Configure(EntityTypeBuilder<Graph> builder)
    {
        builder.HasKey(g=>g.Id);

        builder.Property(g=>g.Title)
                .IsRequired(true);
        builder.Property(g => g.Description).IsRequired(false);

        builder.Navigation(g => g.Nodes)
                .HasField("_nodes")
                .UsePropertyAccessMode(PropertyAccessMode.Field);


        builder.Metadata
            .FindNavigation(nameof(Graph.Edges))!
            .SetPropertyAccessMode(PropertyAccessMode.Field);

        builder.HasMany(g=>g.Nodes)
                .WithOne(n=>n.Graph)
                .HasForeignKey(g=>g.GraphId)
                .OnDelete(DeleteBehavior.Cascade);

        builder.HasMany(g=>g.Edges)
                .WithOne(e=>e.Graph)
                .HasForeignKey(e=>e.GraphId)
                .OnDelete(DeleteBehavior.NoAction);
        
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Configurations\MessageConfiguration.cs
===============================
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using sna_domain.Entities;

namespace sna_infrastructure.Persistence.Configurations;

public class MessageConfiguration : IEntityTypeConfiguration<Message>
{
    public void Configure(EntityTypeBuilder<Message> builder)
    {
        builder.HasKey(m=>m.Id);
        builder.Property(m=>m.FullName).IsRequired();
        builder.Property(m=>m.Email).IsRequired();
        builder.Property(m=>m.Phone).IsRequired();
      
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Configurations\NodeConfiguration.cs
===============================
namespace sna_infrastructure.Persistence.Configurations;
public class NodeConfiguration : IEntityTypeConfiguration<Node>
{
        public void Configure(EntityTypeBuilder<Node> builder)
        {
            builder.ToTable("Nodes");
            builder.HasKey(node => node.Id);

            builder.Property(n=>n.GraphId).IsRequired();
            
            builder.HasOne(n=> n.Graph)
                    .WithMany(g=> g.Nodes)
                    .HasForeignKey(g => g.GraphId)
                    .OnDelete(DeleteBehavior.Cascade);
            builder.Property(n => n.NormalizedDegreeCentrality)
            .HasPrecision(4,3);
        }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Repositories\ContactInfoRepository.cs
===============================
namespace sna_infrastructure.Persistence.Repositories;

internal class ContactInfoRepository(GraphVDbContext context)
: RepositoryBase<ContactInfo>(context), IContactInfoRepository
{
    public async Task AddContactInfoAsync(ContactInfo contactInfo)
                    =>await Create(contactInfo);
    public void DeleteContactInfo(ContactInfo contactInfo)
            => Delete(contactInfo);
    public void EditContactInfo(ContactInfo contactInfo) 
            => _context.Update(entity:contactInfo);
    public async Task<IEnumerable<ContactInfo>> GetAllContactInfosAsync(bool trackChChanges)
        => await GetAllAsync(trackChChanges);

    public async Task<ContactInfo?> GetOneContactInfoAsync(int Id, bool trackChChanges)
        => await GetOneByIdAsync(c=>c.Id==Id,trackChChanges)!;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Repositories\GraphRepository.cs
===============================
namespace sna_infrastructure.Persistence.Repositories;

internal class GraphRepository(GraphVDbContext context)
        : RepositoryBase<Graph>(context), IGraphRepository
{
    public async Task AddGraphAsync(Graph graph)
        => await Create(entity: graph);

    public void DeleteGraph(Graph graph)
        => Delete(graph);

    public void EditGraph(Graph graph)
        => _context.Update(graph);

    public async Task<List<Graph>> GetAllGraphsAsync(bool trackChChanges)
    {
        IQueryable<Graph> query = _context.Graphs;
        if(!trackChChanges) 
            query= query.AsNoTracking();
        var graphs= query.Include(g=>g.Nodes)
                        .Include(g=>g.Edges);
        return await graphs.ToListAsync();
    }

    public async Task<Graph?> GetGraphByIdAsync(Guid graphId, bool trackChChanges)
    {
        IQueryable<Graph> query = _context.Graphs;

        if(!trackChChanges) query = query.AsNoTracking();
        var graph = await query.Include(g=>g.Nodes)
                    .Include(g=>g.Edges)
                        .ThenInclude(e=>e.NodeA)
                    .Include(g=>g.Edges)
                        .ThenInclude(e=>e.NodeB)
                    .FirstOrDefaultAsync(g=>g.Id==graphId); 
            
        return graph;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Repositories\MessageRepository.cs
===============================

namespace sna_infrastructure.Persistence.Repositories;

internal class MessageRepository(GraphVDbContext context) 
    : RepositoryBase<Message>(context), IMessageRepository
{
    public async Task AddMessageAsync(Message message) => await Create(message);
    public void DeleteMessage(Message message) => Delete(message);
    public async Task<IEnumerable<Message>> GetAllMessagesAsync(bool trackChChanges)
            => await GetAllAsync(trackChChanges);
    public async Task<Message?> GetOneMessageAsync(int Id, bool trackChChanges)
        =>  await GetOneByIdAsync(m=>m.Id==Id,trackChChanges);
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Repositories\RepositoryBase.cs
===============================
using System.Linq.Expressions;

namespace sna_infrastructure.Persistence.Repositories;

internal class RepositoryBase<T>(GraphVDbContext context) : IRepositoryBase<T> where T : class
{
    protected GraphVDbContext _context = context;
    public async Task Create(T entity)
    {
        await _context.Set<T>().AddAsync(entity);
    }

    public void Delete(T entity)
    {
        _context.Set<T>().Remove(entity);
    }

    public async Task<IEnumerable<T>> GetAllAsync(bool trackChChanges)
    {
        return !trackChChanges ?
            await _context.Set<T>().AsNoTracking().ToListAsync() :
            await _context.Set<T>().ToListAsync();

    }

    public async Task<T?> GetOneByIdAsync(Expression<Func<T,bool>> expression, bool trackChChanges = false)
    {
        return !trackChChanges ?
         await _context.Set<T>().AsNoTracking().Where(expression).FirstOrDefaultAsync()!:
         await _context.Set<T>().Where(expression).FirstOrDefaultAsync()!;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\backend\src\sna-infrastructure\Persistence\Repositories\UnitOfWork.cs
===============================

namespace sna_infrastructure.Persistence.Repositories;

internal class UnitOfWork(GraphVDbContext _context) : IUnitOfWork
{
    public async Task<bool> SaveChangesAsync(CancellationToken cancellationToken = default)
    {
        
        var ligne =await _context.SaveChangesAsync(cancellationToken);
        return ligne > 0;
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\index.html
===============================
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SNA Pro</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body class="mat-typography">
  <app-root></app-root>
</body>
</html>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\main.ts
===============================
import { bootstrapApplication } from '@angular/platform-browser';
import { appConfig } from './app/app.config';
import { AppComponent } from './app/app.component';

bootstrapApplication(AppComponent, appConfig)
  .catch((err) => console.error(err));


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\styles.css
===============================
/* You can add global styles to this file, and also import other style files */
@import "bootstrap/dist/css/bootstrap.min.css";
@import '@angular/cdk/overlay-prebuilt.css';

/* Light Theme (Default) */
:root {
  --text-primary: #2c3e50;
  --text-secondary: #7f8c8d;
  --bg-primary: #ffffff;
  --bg-secondary: #f7f8fb;
  --border-color: #e8e9eb;
  --bg-hover: #f5f7ff;
  --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* Dark Theme */
[data-theme="dark"] {
  --text-primary: #e4e6eb;
  --text-secondary: #b0b3b8;
  --bg-primary: #242526;
  --bg-secondary: #18191a;
  --border-color: #3a3b3c;
  --bg-hover: #3a3b3c;
  --shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

* {
  color-scheme: light dark;
}

body {
  transition: background-color 0.3s ease, color 0.3s ease;
  background-color: var(--bg-secondary);
  color: var(--text-primary);
}

/* Dark theme iÃ§in dropdown ve diÄer Ã¶Äelerin text renklerini dÃ¼zelt */
[data-theme="dark"] .dropdown-menu .dropdown-item {
  color: var(--text-primary);
}

[data-theme="dark"] .dropdown-menu .dropdown-item:hover {
  background: var(--bg-hover);
}

/* Dark theme iÃ§in shadow gÃ¼ncellemeleri */
[data-theme="dark"] .stat-card,
[data-theme="dark"] .recent-activity,
[data-theme="dark"] .quick-actions,
[data-theme="dark"] .settings-card {
  box-shadow: var(--shadow);
}

html, body { height: 100%; }
body { margin: 0; font-family: Roboto, "Helvetica Neue", sans-serif; }

/* Base overlay centering */
.cdk-overlay-pane {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Dialog Panel Stilleri */
.graph-creation-panel {
  width: 420px !important;
  max-width: 90vw !important;
}

.edge-add-panel,
.edge-delete-panel,
.edge-list-panel,
.node-list-panel {
  width: auto !important;
  max-width: 950px !important;
}

.graph-creation-panel .cdk-dialog-container {
  padding: 0 !important;
  border-radius: 14px;
  background: transparent !important;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15), 0 4px 10px rgba(0, 0, 0, 0.08);
}

.cdk-overlay-pane.edge-add-panel,
.cdk-overlay-pane.edge-delete-panel,
.cdk-overlay-pane.edge-list-panel,
.cdk-overlay-pane.node-list-panel {
  pointer-events: auto !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 0 !important;
}

/* Remove background override so modal card is visible */
.cdk-overlay-pane.edge-add-panel > .cdk-dialog-container,
.cdk-overlay-pane.edge-delete-panel > .cdk-dialog-container,
.cdk-overlay-pane.edge-list-panel > .cdk-dialog-container,
.cdk-overlay-pane.node-list-panel > .cdk-dialog-container {
  padding: 0 !important;
  background: unset !important;
  box-shadow: none !important;
  border: none !important;
  display: block !important;
}

/* CDK Dialog Overlay backdrop */
.cdk-overlay-backdrop {
  background: rgba(0, 0, 0, 0.5) !important;
}

/* Focus outline kaldÄ±r */
.cdk-dialog-container {
  outline: none !important;
  overflow: visible !important;
  background: transparent !important;
  box-shadow: none !important;
}

/* Modal content */
.cdk-dialog-container app-node-add,
.cdk-dialog-container app-graph-creation-modal,
.cdk-dialog-container app-import-graph,
.cdk-dialog-container app-node-edit,
.cdk-dialog-container app-node-delete,
.cdk-dialog-container app-node-select,
.cdk-dialog-container app-node-list,
.cdk-dialog-container app-edge-add,
.cdk-dialog-container app-edge-select,
.cdk-dialog-container app-edge-delete,
.cdk-dialog-container app-edge-list {
  display: block;
  width: 100%;
}

.graph-summary-panel .cdk-dialog-container{
  max-width: 90vw;
  background: #ffffff;
  color: #040404;
  border-radius: 14px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.4);
  animation: fadeInScale 150ms ease-out;
}

.dialog-sm { width: 360px; }
.dialog-md { width: 420px; }
.dialog-lg { width: 680px; }


line.link {
  cursor: pointer;
}

line.link:hover {
  stroke-opacity: 0.9;
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}



.toast-success {
  background: #16a34a !important;
  color: white;
  font-weight: 500;
}

.toast-error {
  background: #dc2626 !important;
  color: white;
  font-weight: 500;
}

.toast-info {
  background: #2563eb !important;
  color: white;
}
.toast-algo {
  background: #25eb9c !important;
  color: rgb(49, 47, 47);
}

.graph-tooltip {
  background: rgba(0, 0, 0, 0.85);
  color: #fff;
  padding: 10px 12px;
  border-radius: 8px;
  font-size: 12px;
  min-width: 140px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

/* Title */
.graph-tooltip .tooltip-title {
  font-weight: 600;
  text-align: center;
  margin-bottom: 6px;
  font-size: 13px;
  border-bottom: 1px solid rgba(255,255,255,0.2);
  padding-bottom: 4px;
}

/* Rows */
.graph-tooltip .tooltip-row {
  display: flex;
  justify-content: space-between;
  margin-top: 4px;
}

.graph-tooltip .tooltip-key {
  opacity: 0.7;
}

.graph-tooltip .tooltip-value {
  font-weight: 500;
}

/*  JSON VIEW*/
.json-view {
  max-height: 450px;
  overflow: auto;
  background: #020617;
  border-radius: 10px;
  padding: 14px;
}

.json-pre {
  margin: 0;
  font-family: 'JetBrains Mono', monospace;
  font-size: 13px;
  line-height: 1.55;
  color: #e5e7eb;
  white-space: pre;
}

/* syntax colors */
.json-key {
  color: #60a5fa;
}

.json-string {
  color: #34d399;
}

.json-number {
  color: #fbbf24;
}

.json-boolean {
  color: #f472b6;
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\app.component.css
===============================


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\app.component.html
===============================
<router-outlet></router-outlet>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\app.component.spec.ts
===============================
import { TestBed } from '@angular/core/testing';
import { AppComponent } from './app.component';

describe('AppComponent', () => {
  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [AppComponent],
    }).compileComponents();
  });

  it('should create the app', () => {
    const fixture = TestBed.createComponent(AppComponent);
    const app = fixture.componentInstance;
    expect(app).toBeTruthy();
  });

  it(`should have the 'frontend' title`, () => {
    const fixture = TestBed.createComponent(AppComponent);
    const app = fixture.componentInstance;
    expect(app.title).toEqual('frontend');
  });

  it('should render title', () => {
    const fixture = TestBed.createComponent(AppComponent);
    fixture.detectChanges();
    const compiled = fixture.nativeElement as HTMLElement;
    expect(compiled.querySelector('h1')?.textContent).toContain('Hello, frontend');
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\app.component.ts
===============================
import { Component } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import { ThemeService } from './services/theme.service';

@Component({
  selector: 'app-root',
  imports: [RouterOutlet],
  templateUrl: './app.component.html',
  styleUrl: './app.component.css'
})
export class AppComponent {
  title = 'frontend';

  constructor(private themeService: ThemeService) {
    // Tema servisi constructor'da initialize edilir ve localStorage'dan tema yÃ¼klenir
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\app.config.ts
===============================
import { DialogModule } from '@angular/cdk/dialog';
import { ApplicationConfig, importProvidersFrom, provideZoneChangeDetection } from '@angular/core';
import { provideRouter } from '@angular/router';
import { provideHttpClient } from '@angular/common/http';


import { routes } from './app.routes';

export const appConfig: ApplicationConfig = {
  providers: [provideZoneChangeDetection({ eventCoalescing: true }),
    provideRouter(routes),
    importProvidersFrom(DialogModule),
    provideHttpClient()
  ]
};


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\app.routes.ts
===============================
import { Routes } from '@angular/router';
import { LoginComponent } from './public/authentication/login/login.component';
import { RegisterComponent } from './public/authentication/register/register.component';
import { MainLayoutComponent } from './User-Interface/main-layout/main-layout.component';
import { MainContentComponent } from './User-Interface/main-content/main-content.component';
import { DashboardComponent } from './User-Interface/main-content/dashboard/dashboard.component';
import { GraphlarimComponent } from './User-Interface/main-content/graphlarim/graphlarim.component';
import { SettingsComponent } from './User-Interface/main-content/settings/settings.component';
import { LandingLayoutComponent } from './layout/landing-layout/landing-layout.component';
import { HomeComponent } from './public/landing/home/home.component';
import { AboutComponent } from './public/landing/about/about.component';
import { ContactComponent } from './public/landing/contact/contact.component';
import { FeaturesComponent } from './public/landing/features/features.component';
import { WorkspaceComponent } from './workspace/workspace.component';

export const routes: Routes = [
  // Public Landing Pages
  {
    path: '',
    component: LandingLayoutComponent,
    children: [
      { path: '', component: HomeComponent },
      { path: 'features', component: FeaturesComponent },
      { path: 'about', component: AboutComponent },
      { path: 'contact', component: ContactComponent }
    ]
  },

  // Auth routes (layout dÄ±ÅÄ±nda)
  { path: 'login', component: LoginComponent },
  { path: 'register', component: RegisterComponent },

  // User-Interface (Authenticated area)
  {
    path: 'user',
    component: MainLayoutComponent,
    children: [
      {
        path: '',
        component: MainContentComponent,
        children: [
          { path: '', redirectTo: 'dashboard', pathMatch: 'full' },
          { path: 'dashboard', component: DashboardComponent },
          { path: 'graphlarim', component: GraphlarimComponent },
          { path: 'settings', component: SettingsComponent },
        ]
      }
    ]
  },

  // Workspace (Graf Ã§alÄ±Åma alanÄ±)
  { path: 'workspace', component: WorkspaceComponent},

  // Fallback
  { path: '**', redirectTo: '' }
];


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\services\algorithm-result-adapter.service.ts
===============================
import { Injectable } from '@angular/core';
import { TraversalResult } from '../../models/algorith.model';
import { GraphStateService } from './graph.service';
import { Edge } from '../../models/edge.model';

@Injectable({
  providedIn: 'root'
})

export class AlgorithmResultAdapterService {

  constructor(private graphStateService: GraphStateService) { }

  buildTraversalResult(result: TraversalResult) {
    const visitOrder = result.nodes.map(n => n.id);
    const edges = this.graphStateService.getCurrentGraphEdgesSnapshot();

    return {
      visitOrder,
      edgesTraversed: this.buildTraversalEdges(visitOrder, edges),
    };
  }

  
  private buildTraversalEdges(
    visitOrder: number[],
    edges: Edge[]
  ): [number, number][] {

    if (visitOrder.length < 2) return [];

    const visited = new Set<number>();
    const traversed: [number, number][] = [];

    visited.add(visitOrder[0]); // start node

    for (let i = 1; i < visitOrder.length; i++) {
      const current = visitOrder[i];

      const edge = edges.find(e =>
        (visited.has(e.nodeAId) && e.nodeBId === current) ||
        (visited.has(e.nodeBId) && e.nodeAId === current)
      );

      if (edge) {
        traversed.push([edge.nodeAId, edge.nodeBId]);
      }

      visited.add(current);
    }

    return traversed;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\services\algorithms-state.service.ts
===============================
import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { AlgorithmDefinition } from '../utils/algorithm-definition';

@Injectable({
  providedIn: 'root'
})
export class AlgorithmsStateService {

  constructor() { }
  private selectedAlgorithmSubject =
    new BehaviorSubject<AlgorithmDefinition | null>(null);

  readonly selectedAlgorithm$ = this.selectedAlgorithmSubject.asObservable();

  setSelectedAlgorithm(algo: AlgorithmDefinition) {
    this.selectedAlgorithmSubject.next(algo);
  }

  clear() {
    this.selectedAlgorithmSubject.next(null);
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\services\edges.service.ts
===============================
import { Injectable } from '@angular/core';
import { EdgeApiService } from '../../services/edges.service';
import { GraphStateService } from './graph.service';
import { filter, map, Observable, switchMap, take, tap } from 'rxjs';
import { Graph } from '../../models/graph.model';
import { AddEdgeDto, Edge } from '../../models/edge.model';

@Injectable({
  providedIn: 'root'
})
export class EdgesService {

  constructor(private edgesApi: EdgeApiService,
    private graphState:GraphStateService) { }

  private withCurrentGraph<T>(
      action: (graph: Graph) => Observable<T>
    ): Observable<T> {
      return this.graphState.currentGraph$.pipe(
        take(1),
        filter((g): g is Graph => !!g && !!g.id),
        switchMap(action)
      );
    }

  addEdge(sourceId:number, targetId:number):Observable<Edge>{

      return this.withCurrentGraph(graph => {
        const payload: AddEdgeDto = {
          graphId:graph.id,
          nodeAId:sourceId,
          nodeBId:targetId
        };

        return this.edgesApi.addEdgeToGraph(payload).pipe(
          tap(res => {
            const edge = res.edge
            if (!edge) return;
            const updatedGraph: Graph = {
              ...graph,
              edges: [...(graph.edges ?? []), edge]
            };
            this.graphState.setCurrentGraph(updatedGraph);
          }),
            map(res => res.edge as Edge )
          );
        });
  }

  deleteEdge(sourceId:number,targetId:number) : Observable<Graph>
  {
    return this.withCurrentGraph(graph => {

        return this.edgesApi.deleteEdgeFromGraphByNodes(graph.id,sourceId,targetId).pipe(
          tap(res => {
            const new_graph = res.graph
            if (!new_graph) return;
            this.graphState.setCurrentGraph(new_graph);
          }),
            map(res => res.graph )
          );
        });
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\services\graph.service.ts
===============================
import { Injectable } from '@angular/core';
import { BehaviorSubject, combineLatest, map, Observable, shareReplay, switchMap, take, tap, throwError } from 'rxjs';
import { EditGraphCommand,
  EditGraphResponse,
  Graph,
  GraphSnapshot,
  GraphSummary,
  Guid,
  ImportGraphCommand,
  ImportGraphResponse } from '../../models/graph.model';
import { GraphsService } from '../../services/graphs.service';
import { Node } from '../../models/node.model'
import { Edge } from '../../models/edge.model';
import { mapToGraphVisualization } from '../utils/mapperHelper';

@Injectable({ providedIn: 'root' })

export class GraphStateService {

  private currentGraphSubject = new BehaviorSubject<Graph | null>(null);
  currentGraph$ = this.currentGraphSubject.asObservable();

  //Visualisation Settings
  visualizationGraph$ = combineLatest([
    this.getCurrentGraphNodes(),
    this.getCurrentGraphEdges()
  ]).pipe(
    map(([nodes, edges]) => {
      if (!nodes || !edges) {
        return { nodes: [], links: [] };
      }

      return mapToGraphVisualization(nodes, edges);
    }),
    shareReplay(1)
  );

  graphNodes$ = this.visualizationGraph$.pipe(map(g => g.nodes));
  graphLinks$ = this.visualizationGraph$.pipe(map(g => g.links));

  // End of Visualization settings
  constructor(private graphsApi: GraphsService) {}

  /** CREATE GRAPH */
  createGraph(title: string) {
    return this.graphsApi.createGraph({ title: title }).pipe(
      tap((res) => {
        const graph: Graph = {
          id: res.id,
          title: res.title,
          description: null,
          order: 0,
          size: 0,
          nodes: [],
          edges: []
        };
        this.setCurrentGraph(graph);
      })
    );
  }
  importGraph(command: ImportGraphCommand) {
  return this.graphsApi.importGraph(command).pipe(
    tap((response: ImportGraphResponse) => {
        this.setCurrentGraph(response.graph);
      })
    );
  }
  importSnapshot(snapshot: GraphSnapshot){
    return this.graphsApi.importSnapshot(snapshot).pipe(
      tap((graph : Graph)=>{
        this.setCurrentGraph(graph);
      })
    )
  }
  /** SET CURRENT GRAPH */
  setCurrentGraph(graph: Graph) {
    console.log('â setCurrentGraph called:', graph);
    const cloned: Graph={... graph};
    this.currentGraphSubject.next(cloned);
    localStorage.setItem('currentGraph', JSON.stringify(cloned));
  }
  getNodeById$(id: number): Observable<Node | undefined> {
    return this.getCurrentGraphNodes().pipe(
      take(1),
      map(nodes => nodes.find(n => n.id === id))
    );
  }
  loadCurrentGraphFromStorage() {
    const raw = localStorage.getItem('currentGraph');
    console.log('ð¦ localStorage raw:', raw);
    if (raw) {
      try {
        const parsed = JSON.parse(raw);
        console.log('â Parsed from localStorage:', parsed);
        this.currentGraphSubject.next(parsed);
      } catch (err) {
        console.error('â Error parsing localStorage graph:', err);
      }
    } else {
      console.log('â ï¸ No graph in localStorage');
    }
  }
  /** LOAD GRAPH */
  loadGraph(graphId: Guid) {
    return this.graphsApi.getGraph(graphId);
  }

  /** GET CURRENT */
  getCurrentGraph$(): Observable<Graph | null> {
    return this.currentGraph$;
  }
  getCurrentGraphNodes(): Observable<Node[] | []> {
    return this.currentGraph$.pipe(
      map(g => g ? [...g?.nodes]: [])
    );
  }

  getCurrentGraphEdges(): Observable<Edge[]| []>{
    return this.currentGraph$.pipe(
      map(g =>g? [...g?.edges] : [])
    )
  }

  getCurrentGraphEdgesSnapshot(): Edge[] {
    return this.currentGraphSubject.value?.edges ?? [];
  }

  getCurrentGraphNodesSnapshot(): Node[] {
    return this.currentGraphSubject.value?.nodes ?? [];
  }

   getCurrentGraphTitle$(): Observable<string | undefined> {
    return this.currentGraph$.pipe(
      map(graph => graph?.title)
    );
  }

  clear() {
    this.currentGraphSubject.next(null);
  }
   clearCurrentGraph() {
    this.currentGraphSubject.next(null);
    localStorage.removeItem('currentGraph');
  }

  getGraphSummary(): Observable<GraphSummary> {
    return this.currentGraph$.pipe(
      take(1), // On prend juste l'Ã©tat Ã  l'instant T (snapshot rÃ©actif)
      switchMap(graph => {
        if (!graph || !graph.id) {
          return throwError(() => new Error('No graph selected'));
        }
        // Appel API
        return this.graphsApi.getGraphSummary(graph.id).pipe(
          map((res: any) => res.graphSummary)
        );
      })
    );
  }

  updateGraphMetaData(command: EditGraphCommand): Observable<EditGraphResponse> {
    return this.currentGraph$.pipe(
      take(1),
      switchMap(currentGraph => {
        if (!currentGraph) {
          return throwError(() => new Error('No active graph selected'));
        }
        if (!currentGraph.id) {
          return throwError(() => new Error('Graph Id is undefined'));
        }

        return this.graphsApi.editGraph(currentGraph.id, command).pipe(
          tap((response: EditGraphResponse) => {
            const updatedGraph: Graph = {
              ...currentGraph,
              title: response.title,
              description: command.description
            };

            this.setCurrentGraph(updatedGraph);
          })
        );
      })
    );
  }

  resetGraph(graphId:Guid){
    this.graphsApi.clearGraph(graphId).subscribe(graph=>{
      this.setCurrentGraph(graph);
    })
  }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\services\graphrender.service.ts
===============================
import { inject, Injectable } from '@angular/core';
import { GraphLink, GraphNode } from '../../models/graph.model';
import * as d3 from 'd3';
import { Dialog } from '@angular/cdk/dialog';
import { AddNodeComponent } from '../../workspace/modals/add-node/add-node.component';
import { GraphStateService } from './graph.service';
import { take } from 'rxjs';
import { EdgesService } from './edges.service';
import { ToastService } from '../utils/toast-service.service';

@Injectable({
  providedIn: 'root'
})
export class GraphrenderService {

  private width = 0;
  private height = 0;

  private svg!: d3.Selection<SVGSVGElement, unknown, null, undefined>;
  private containerG!: d3.Selection<SVGGElement, unknown, null, undefined>;

  private links!: d3.Selection<SVGLineElement, GraphLink, SVGGElement, unknown>;
  private nodes!: d3.Selection<SVGCircleElement, GraphNode, SVGGElement, unknown>;
  private labels!: d3.Selection<SVGTextElement, GraphNode, SVGGElement, unknown>;

  private simulation!: d3.Simulation<GraphNode, GraphLink>;

  private tooltip!: d3.Selection<HTMLDivElement, unknown, any, any>;
  private readonly defaultNodeColor = '#2f757dff';
  private readonly nodeHighlightColor = '#450722ff'
  private readonly defaultNodeRadius = 20;
  private readonly scaleNodeRadius = 30;

  //Algorithm Visualization & Animation
  private traversalTimer: any;
  private traversalSpeed = 600;
  private selectedNodes = new Set<string>();
  private selectionCallback?: (ids: string[]) => void;
  private traversalActive = false;
  selectionEnabled: boolean=false;
  private selectionMax = 0;
  private colorScale = d3.scaleOrdinal<number, string>()
  .range(d3.schemeTableau10);
  private degreeColorScale = d3.scaleLinear<string>()
        .range(['#e0f3ff', '#6b0857ff']);

  private degreeRadiusScale = d3.scaleLinear<number, number>();
  private readonly minNodeRadius = this.defaultNodeRadius;
  private readonly maxNodeRadius = 35;
  private componentColorScale = d3
  .scaleOrdinal<number, string>()
  .unknown('#bc2c9dff')
  .range(d3.schemePaired.concat(d3.schemeSet3));

  private exploredEdgeColor = '#4085a8ff';   // light gray-blue
  private pathNodeColor = '#fba185ff';       // strong orange
  private pathEdgeColor = '#D84315';

  private communityColorScale = d3.scaleOrdinal<string, string>()
  .range(
    d3.schemeTableau10
      .concat(d3.schemeSet3)
      .concat(d3.schemePaired)
  );
  // Ends

  //Modal select node for edit
  private dialog = inject(Dialog)

  //Edge operations
  private edgeMode = false;
  private edgeSourceNodeId: number | null = null;
  edgeDeleted?: (sourceId: number, targetId: number) => void;
  edgeCreated? :(sourceId: number, targetId:number) => void;

  constructor(private graphStateService: GraphStateService,
              private toast: ToastService
  ) { }

  init(container: HTMLElement): void {
    this.width = container.clientWidth;
    this.height = container.clientHeight;

    d3.select(container).selectAll('*').remove();


    this.tooltip = d3.select(container)
    .style('position', 'relative')
    .append('div')
    .attr('class', 'graph-tooltip')
    .style('position', 'absolute')
    .style('pointer-events', 'none')
    .style('opacity', 0);


    this.svg = d3.select(container)
    .append('svg')
    .attr('width', '100%')
    .attr('height', '100%')
    .attr('viewBox', `0 0 ${this.width} ${this.height}`);

    this.containerG = this.svg.append('g');

    this.simulation = d3.forceSimulation<GraphNode>()
    .force('link', d3.forceLink<GraphNode, GraphLink>().id(d => d.id).distance(120))
    .force('charge', d3.forceManyBody().strength(-300))
    .force('center', d3.forceCenter(this.width / 2, this.height / 2))
    .force('collide', d3.forceCollide(30));

    this.simulation.on('tick', () => this.ticked());
    this.enableZoom()
  }

  setData(nodes: GraphNode[], links: GraphLink[]): void {
    // --- LINKS ---
    this.links = this.containerG.selectAll<SVGLineElement, GraphLink>('line')
      .data(links, d => d.id ?? `${d.source}-${d.target}`)
      .join(
        enter => enter
          .append('line')
          .attr('class', 'link')
          .attr('stroke', '#484b4bff')
          .attr('stroke-width', 2)
          .on('mouseenter', (event) => {
            this.tooltip
              .style('opacity', 1)
              .html('Hold <b>Alt</b> + Click to delete edge');
          })
          .on('mousemove', (event) => {
            this.tooltip
              .style('left', event.offsetX + 12 + 'px')
              .style('top', event.offsetY + 12 + 'px');

            // Optional visual cue when Alt is pressed
            d3.select(event.currentTarget)
              .attr('stroke', event.altKey ? '#e53935' : '#484b4bff')
              .attr('stroke-width', event.altKey ? 4 : 2);
          })
          .on('mouseleave', (event) => {
                this.tooltip.style('opacity', 0);
                d3.select(event.currentTarget)
                  .attr('stroke', '#484b4bff')
                  .attr('stroke-width', 2);
          })
          .on('click', (event, d) => {
            if (!event.altKey) return;

            event.stopPropagation();
            this.emitDeleteEdge(d);
          }),
        update => update,
        exit => exit.remove()
      );

    // --- NODES ---
    this.nodes = this.containerG
            .selectAll<SVGCircleElement, GraphNode>('circle')
            .data(nodes, d => d.id)
            .join(
              enter => enter
                .append('circle')
                .attr('r', this.defaultNodeRadius)
                .attr('fill', d => d.color ?? this.defaultNodeColor)
                .attr('stroke', '#fff')
                .attr('stroke-width', 2)
                .call(this.createDrag())
                .on('mouseenter', (event, d) => {
                  d3.select(event.currentTarget)
                    .transition()
                    .duration(200)
                    .attr('r', 32)
                    .attr('fill', '#74190dff');

                  this.highlightLinks(d.id);
                  this.tooltip
                    .style('opacity', 1)
                    .html(`
                      <div class="tooltip-title">${d.label}</div>
                      <div class="tooltip-row">
                        <span class="tooltip-key">Activity</span>
                        <span class="tooltip-value text-info">${d.domain.activity ?? '-'}</span>
                      </div>
                      <div class="tooltip-row">
                        <span class="tooltip-key">Interaction</span>
                        <span class="tooltip-value text-info">${d.domain.interaction ?? '-'}</span>
                      </div>
                    `);
                })
                .on('mousemove', event => {
                  this.tooltip
                    .style('left', event.offsetX + 15 + 'px')
                    .style('top', event.offsetY + 15 + 'px');
                })
                .on('mouseleave', (event, d) => {
                  if (this.traversalActive) return;

                  d3.select(event.currentTarget)
                    .transition()
                    .duration(200)
                    .attr('r', this.defaultNodeRadius)
                    .attr('fill', d.color ?? this.defaultNodeColor);

                  this.tooltip.style('opacity', 0);
                  this.resetStyles();
                })
                .on('click', (_, d) => {
                  if (this.edgeMode) {
                    this.handleEdgeClick(d);
                    return;
                  }

                  if (!this.selectionEnabled) {
                    const id = Number(d.id);
                    this.graphStateService.getNodeById$(id)
                      .pipe(take(1))
                      .subscribe(editnode => {
                        if (!editnode) return;

                        this.dialog.open(AddNodeComponent, {
                          disableClose: true,
                          panelClass: 'add-node-panel',
                          data: { mode: 'edit', node: editnode }
                        });
                      });
                    return;
                  }

                  if (this.selectedNodes.has(d.id)) return;
                  if (this.selectedNodes.size >= this.selectionMax) return;

                  this.selectedNodes.add(d.id);
                  this.highlightNode(d.id);
                  this.selectionCallback?.([...this.selectedNodes]);
                }),

              // UPDATE
              update => update
                .attr('fill', d => d.color ?? this.defaultNodeColor),

              // EXIT
              exit => exit.remove()
            );

    // --- LABELS ---
    this.labels = this.containerG.selectAll<SVGTextElement, GraphNode>('text')
      .data(nodes, d => d.id)
      .join(
      enter => enter
        .append('text')
        .attr('class', 'label')
        .attr('font-size', 12)
        .attr('dx', 22)
        .attr('dy', 5)
        .text(d => d.label),
      update => update.text(d => d.label),
      exit => exit.remove()
  );

    // Restart simulation
    this.simulation.nodes(nodes);
    (this.simulation.force('link') as d3.ForceLink<GraphNode, GraphLink>)
      .links(links);

    this.simulation.alpha(1).restart();
  }

  private ticked(): void {
    this.links
      .attr('x1', d => (d.source as GraphNode).x!)
      .attr('y1', d => (d.source as GraphNode).y!)
      .attr('x2', d => (d.target as GraphNode).x!)
      .attr('y2', d => (d.target as GraphNode).y!);

    this.nodes
      .attr('cx', d => d.x!)
      .attr('cy', d => d.y!);

    this.labels
      .attr('x', d => d.x!)
      .attr('y', d => d.y!);
  }


  private createDrag() {
    return d3.drag<SVGCircleElement, GraphNode>()
      .on('start', (event, d) => {
        if (!event.active) this.simulation.alphaTarget(0.3).restart();
        d.fx = d.x;
        d.fy = d.y;
      })
      .on('drag', (event, d) => {
        d.fx = event.x;
        d.fy = event.y;
      })
      .on('end', (event, d) => {
        if (!event.active) this.simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
      });
  }

  resetStyles(): void {
    this.nodes
      .transition()
      .duration(300)
      .attr('fill', this.defaultNodeColor)
      .attr('r', 20);
  }

  private enableZoom(): void {
    const zoom = d3.zoom<SVGSVGElement, unknown>()
      .scaleExtent([0.1, 5]) // min / max zoom
      .on('zoom', (event) => {
        this.containerG.attr('transform', event.transform);
      });

    this.svg.call(zoom as any);
  }

  private highlightLinks(nodeId: string): void {
    this.links
      .attr('stroke', d =>
        (d.source as GraphNode).id === nodeId ||
        (d.target as GraphNode).id === nodeId
          ? '#ff9800'
          : '#ccc'
      )
      .attr('stroke-width', d =>
        (d.source as GraphNode).id === nodeId ||
        (d.target as GraphNode).id === nodeId
          ? 4
          : 1
      );
  }

  //Algorithm Visualisation & Animation
  reset(): void {
    this.traversalActive = false;

    if (this.traversalTimer) {
      clearTimeout(this.traversalTimer);
      this.traversalTimer = null;
    }

    this.resetStyles();
  }

  private highlightNode(nodeId: string) {
    this.nodes
      .filter(d => d.id === nodeId)
      .interrupt() // IMPORTANT
      .raise()
      .transition()
      .duration(300)
      .attr('fill', this.nodeHighlightColor)
      .attr('r', this.scaleNodeRadius);
  }
  private highlightEdge(a: string, b: string) {
    this.links
      .filter(d =>
        ((d.source as GraphNode).id === a &&
        (d.target as GraphNode).id === b) ||
        ((d.source as GraphNode).id === b &&
        (d.target as GraphNode).id === a)
      )
      .interrupt() // IMPORTANT
      .raise()
      .transition()
      .duration(300)
      .attr('stroke', '#ff2290ff')
      .attr('stroke-width', 4);
  }


  renderTraversal(result: {
    visitOrder: number[];
    edgesTraversed: [number, number][];
    }) {
    this.simulation.stop();
    this.reset();
    this.traversalActive = true;

    let step = 0;

    const animate = () => {
      if (!this.traversalActive) return;
      if (step >= result.visitOrder.length) return;

      const nodeId = result.visitOrder[step];
      console.log('highlight node:',nodeId)
      this.highlightNode(String(nodeId));

      if (step > 0 && result.edgesTraversed[step - 1]) {
        const [a, b] = result.edgesTraversed[step - 1];
        console.log('highlight edge:',a,b)
        this.highlightEdge(String(a), String(b));
      }

      step++;
      console.log('step:', step);
      this.traversalTimer = setTimeout(
        animate,
        this.traversalSpeed
      );
    };

    animate();
  }

  enableNodeSelection(options: { max: number; label: string }) {
    this.selectionEnabled = true;
    this.selectionMax = options.max;
    this.selectedNodes.clear();
  }

  disableNodeSelection() {
    this.selectionEnabled=false;
    this.nodes.on('click', null);
  }


  onSelectionChange(cb: (ids: string[]) => void) {
    this.selectionCallback = cb;
  }

  //WelshPowell
  renderColoring(nodeWithColors: Record<number, number>): Record<string,string> {
    // Coloring cancels traversal visuals
    this.traversalActive = false;
    if (this.traversalTimer) {
      clearTimeout(this.traversalTimer);
      this.traversalTimer = null;
    }
    const colorsUsedPerNode: Record<string,string>={}
    this.nodes
      .interrupt() // stop ongoing transitions
      .transition()
      .duration(400)
      .attr('fill', d => {
        const colorIndex = nodeWithColors[Number(d.id)];
        if(colorIndex!==undefined){
          const color = this.colorScale(colorIndex);
          colorsUsedPerNode[d.id]=color;
          return color;
        }
        return this.defaultNodeColor
      })
      .attr('r', 20);

    // Reset links to neutral state
    this.links
      .transition()
      .duration(300)
      .attr('stroke', '#ccc')
      .attr('stroke-width', 1);

      return colorsUsedPerNode
  }
  //Degree Centrality

  renderDegreeCentrality(nodeDegrees: Record<string, number>, maxDegree: number): void {
    this.simulation.stop();
    this.reset();

    this.degreeColorScale.domain([0, maxDegree]);
    this.degreeRadiusScale.domain([0, maxDegree])
    .range([this.minNodeRadius, this.maxNodeRadius]);

    this.nodes
      .transition()
      .duration(500)
      .attr('r', d => {
          const degree = nodeDegrees[d.id];
          return degree !== undefined
            ? this.degreeRadiusScale(degree)
            : this.defaultNodeRadius;
      })
      .attr('fill', d => {
        const degree = nodeDegrees[d.id];
        return degree !== undefined
          ? this.degreeColorScale(degree)
          : this.defaultNodeColor;
      });
  }


  //Path Finding

  renderShortestPathResult(
    exploredEdges: [number, number][],
    path: number[]
  ): void {
    this.simulation.stop();
    this.reset();

    this.renderPathExploration(exploredEdges);
    this.renderShortestPath(path);
  }

  private renderShortestPath(path: number[]): void {
    this.simulation.stop();
    this.reset();
    this.traversalActive = true;

    let step = 0;

    const animate = () => {
      if (!this.traversalActive) return;
      if (step >= path.length) return;

      const nodeId = String(path[step]);

      this.nodes
      .filter(d => d.id === nodeId)
      .attr('fill', this.pathNodeColor)
      .attr('r', 10);

      if (step > 0) {
        const prev = String(path[step - 1]);

        this.links
        .filter(d =>
          (d.source === prev && d.target === nodeId) ||
          (d.source === nodeId && d.target === prev)
        )
        .attr('stroke', this.pathEdgeColor)
        .attr('stroke-width', 3);
      }

      step++;
      this.traversalTimer = setTimeout(
        animate,
        this.traversalSpeed
      );
    };

    animate();
  }

  private renderPathExploration(exploredEdges: [number, number][]): void {
    exploredEdges.forEach(([a, b]) => {
      this.links
      .filter(d =>
        (d.source === String(a) && d.target === String(b)) ||
        (d.source === String(b) && d.target === String(a))
      )
      .attr('stroke', this.exploredEdgeColor)
      .attr('stroke-width', 1)
      .attr('stroke-dasharray', '3,3');
    });
  }

  //Detection Connected Components

  renderConnectedComponents(nodeToComponent: Record<string, number>): void {
    this.simulation.stop();
    this.reset();

    this.nodes
      .transition()
      .duration(600)
      .attr('fill', d => {
        const componentId = nodeToComponent[d.id];
        return componentId !== undefined
          ? this.componentColorScale(componentId)
          : this.defaultNodeColor;
      })
      .attr('stroke', d => {
        const componentId = nodeToComponent[d.id];
        return componentId !== undefined
          ? d3.color(this.componentColorScale(componentId))!
              .darker(0.9)
              .toString()
          : '#09097eff';
      })
      .attr('stroke-width', 3)
      .attr('r', 22);

    this.links
      .transition()
      .duration(600)
      .attr('stroke', '#09097eff')
      .attr('stroke-opacity', 0.25)
      .attr('stroke-width', 1.5);

      this.simulation
      .force(
        'component-x',
        d3.forceX<GraphNode>(d => {
          const c = nodeToComponent[d.id] ?? 0;
          return (c % 4) * (this.width / 4) + this.width / 8;
        }).strength(0.25)
      )
      .force(
        'component-y',
        d3.forceY<GraphNode>(d => {
          const c = nodeToComponent[d.id] ?? 0;
          return Math.floor(c / 4) * (this.height / 3) + this.height / 6;
        }).strength(0.25)
      )
      .alpha(1)
      .restart();
  }

  //Communtity Detection
  renderCommunities(nodeToCommunity: Record<string, number>): void {
      this.simulation.stop();
      this.reset();

      // Normalize community IDs â strings
      const communities = Array.from(
        new Set(Object.values(nodeToCommunity))
      );

      const communityKey = new Map<number, string>();
      communities.forEach((id, index) => {
        communityKey.set(id, `community-${index}`);
      });

      this.nodes
        .transition()
        .duration(600)
        .attr('fill', d => {
          const communityId = nodeToCommunity[d.id];
          if (communityId === undefined) {
            return this.defaultNodeColor;
          }

          return this.communityColorScale(
            communityKey.get(communityId)!
          );
        })
        .attr('r', d => {
          const communityId = nodeToCommunity[d.id];
          return communityId !== undefined
            ? this.defaultNodeRadius + 6
            : this.defaultNodeRadius;
        }).on("mouseenter", null);

      // Optional: soften inter-community edges
      this.links
        .transition()
        .duration(600)
        .attr('stroke', d => {
          const a = nodeToCommunity[(d.source as GraphNode).id];
          const b = nodeToCommunity[(d.target as GraphNode).id];
          return a === b ? '#555' : '#ddd';
        })
        .attr('stroke-width', d => {
          const a = nodeToCommunity[(d.source as GraphNode).id];
          const b = nodeToCommunity[(d.target as GraphNode).id];
          return a === b ? 2.5 : 1;
        });
  }

  //Edge Operations

  enterEdgeMode() {
    this.edgeMode = true;
    this.containerG.classed('edge-mode', true);
  }

  exitEdgeMode() {
    this.edgeMode = false;
    console.log(`value of edgeMode in existMode:${this.edgeMode}`)
    this.resetStyles();
    this.containerG.classed('edge-mode', false);
  }

  private handleEdgeClick(node: GraphNode) {
    if (this.edgeSourceNodeId === null) {
      // First click â source
      this.edgeSourceNodeId = Number(node.id);
      this.highlightNodeSource(node.id);
      return;
    }

    // Second click â target
    const sourceId = this.edgeSourceNodeId;
    const targetId = Number(node.id);
    this.highlightNode(node.id);

    if (sourceId === targetId) {
      console.log(`No serf-loop allowed`)
      this.toast.error(`Self-loop detected`)
      return;
    }

    this.edgeCreated?.(sourceId,targetId);
    this.exitEdgeMode();
  }

  private highlightNodeSource(nodeId: string){
      this.nodes
      .filter(d => d.id === nodeId)
      .interrupt() // IMPORTANT
      .raise()
      .transition()
      .duration(300)
      .attr('fill', '#e5c140ff')
      .attr('r', 38);
  }


  private emitDeleteEdge(edge: GraphLink) {
    const sourceId =
      typeof edge.source === 'object'
        ? Number(edge.source.id)
        : Number(edge.source);

    const targetId =
      typeof edge.target === 'object'
        ? Number(edge.target.id)
        : Number(edge.target);

    this.edgeDeleted?.(sourceId, targetId);
  }


  disableEdgeCreation(): void{
    this.edgeSourceNodeId=null;
  }

}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\services\nodes.service.ts
===============================
import { Injectable } from '@angular/core';
import { GraphStateService } from './graph.service';
import { NodeApiService as NodesApiService } from '../../services/nodes.service';
import { AddNodeDto, EditNodeDto, Node } from '../../models/node.model';
import { Graph } from '../../models/graph.model';
import { filter, map, Observable, switchMap, take, tap } from 'rxjs';

/**
 * NodeStateService - Handles node operations and state management
 * Works with GraphStateService to keep graph state in sync
 */
@Injectable({
  providedIn: 'root'
})
export class NodesService {

  constructor(
    private graphState: GraphStateService,
    private nodesApi: NodesApiService
  ) { }

  /**
   * Add node to current graph
   */
  addNode(
  tag: string,
  activity: number,
  interaction: number
): Observable<Node> {

  const payloadBase = {
    tag,
    activity: Number(activity),
    interaction: Number(interaction)
  };

  return this.withCurrentGraph(graph => {
    const payload: AddNodeDto = {
      graphId: graph.id,
      ...payloadBase
    };

    return this.nodesApi.addNodeToGraph(payload).pipe(
      tap(res => {
        const node = res.node
        if (!node) return;
        const updatedGraph: Graph = {
          ...graph,
          nodes: [...(graph.nodes ?? []), node]
        };
        this.graphState.setCurrentGraph(updatedGraph);
      }),
        map(res => res.node as Node )
      );
    });
  }

  editNode(
      nodeId: number,
      tag: string,
      activity: number,
      interaction: number
      ): Observable<Node> {
      const payload: EditNodeDto = {
        nodeId,
        tag,
        activity: Number(activity),
        interaction: Number(interaction)
      };

      return this.withCurrentGraph(graph =>
        this.nodesApi.editNodeInGraph(graph.id, payload).pipe(
          tap(res => {
            const node =(res as any)?.node as Node
            console.log(node)
            if (!node) return;
            const updatedGraph: Graph = {
              ...graph,
              nodes: (graph.nodes ?? []).map(n =>
                n.id === node.id ? node : n
              )
            };
            if(!updatedGraph){
              console.log('updated graph:',updatedGraph)
            }
            console.log("new graph",updatedGraph);
            this.graphState.setCurrentGraph(updatedGraph);
          }),
          map(res =>(res.node as Node))
        )
      );
    }

  /**
   * Delete node from current graph
   */
  deleteNode(nodeId: number): Observable<void> {
    return this.withCurrentGraph(graph =>
      this.nodesApi.deleteNodeFromGraph(graph.id, nodeId).pipe(
        tap(res => {
          const updatedGraph = res.result
          console.log('new graph:',updatedGraph)
          this.graphState.setCurrentGraph(updatedGraph);
        }),
        map(() => void 0)
      )
    );
  }

  private withCurrentGraph<T>(
    action: (graph: Graph) => Observable<T>
  ): Observable<T> {
    return this.graphState.currentGraph$.pipe(
      take(1),
      filter((g): g is Graph => !!g && !!g.id),
      switchMap(action)
    );
  }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\storage\algorithm-result-storage.service.ts
===============================
import { Injectable } from '@angular/core';
import { AlgorithmResult } from '../../models/algorith.model';
import { Guid } from '../../models/graph.model';
import { BehaviorSubject, take } from 'rxjs';
import { GraphStateService } from '../services/graph.service';

@Injectable({
  providedIn: 'root'
})
export class AlgorithmResultStorageService {
  private currentAlgorithmResultSubject = new BehaviorSubject<AlgorithmResult[] | null>(null);
  currentAlgorithmResult$ = this.currentAlgorithmResultSubject.asObservable();

  constructor(private graphState: GraphStateService) { }

  save(result : AlgorithmResult): void{

    const key = this.key(result.graphId)
    const list = this.load(result.graphId);
    list.push(result);
    localStorage.setItem(key,JSON.stringify(list));
  }

  private load(graphId : Guid): AlgorithmResult[]{
    const raw= localStorage.getItem(this.key(graphId));
    return raw ? JSON.parse(raw) : []
  }
  private key(graphId: Guid):Guid{
    return `algorithm-result:${graphId}`
  }
  isAlgorithmExist(graphId : Guid) : boolean {
      const result= localStorage.getItem(this.key(graphId))
      return result ? true: false;
  }
  loadAlgorithmResulsFromLocalStorage(){
    this.graphState.currentGraph$.pipe(take(1)).subscribe({
      next: graph=>{
        if(!graph) return ;
        const raw= localStorage.getItem(this.key(graph.id))
        const results = raw ? JSON.parse(raw) : []
        this.currentAlgorithmResultSubject.next(results);
      }
    })
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\utils\algorithm-definition.ts
===============================
// algorithm-registry.ts
export enum AlgorithmCategory {
  Traversal = 'traversal',
  Pathfinding = 'pathfinding',
  Centrality = 'centrality',
  Clustering = 'clustering'
}

export interface AlgorithmDefinition {
  key: string;
  label: string;
  category: AlgorithmCategory;
  requiresStartNode: boolean;
  requiresEndNode: boolean;
  animated: boolean;
}


export const ALGORITHMS: AlgorithmDefinition[] = [
  {
    key: 'bfs',
    label: 'Breadth-First Search',
    category: AlgorithmCategory.Traversal,
    requiresStartNode: true,
    requiresEndNode: false,
    animated: true
  },
  {
    key: 'dfs',
    label: 'Depth-First Search',
    category: AlgorithmCategory.Traversal,
    requiresStartNode: true,
    requiresEndNode: false,
    animated: true
  },
  {
    key: 'dijkstra',
    label: 'Dijkstra',
    category: AlgorithmCategory.Pathfinding,
    requiresStartNode: true,
    requiresEndNode: true,
    animated: true
  },
  {
    key: 'astar',
    label: 'A* Search',
    category: AlgorithmCategory.Pathfinding,
    requiresStartNode: true,
    requiresEndNode: true,
    animated: true
  },
  {
    key: 'degree-centrality',
    label: 'Degree Centrality',
    category: AlgorithmCategory.Centrality,
    requiresStartNode: false,
    requiresEndNode: false,
    animated: false
  },
  {
    key: 'connected-components',
    label: 'Connected Components',
    category: AlgorithmCategory.Clustering,
    requiresStartNode: false,
    requiresEndNode: false,
    animated: false
  },
  {
    key: 'community-detection',
    label: 'Community Detection',
    category: AlgorithmCategory.Clustering,
    requiresStartNode: false,
    requiresEndNode: false,
    animated: false
  },
  {
    key: 'coloring',
    label: 'coloring',
    category: AlgorithmCategory.Traversal,
    requiresStartNode: false,
    requiresEndNode: false,
    animated: false
  }
];

export interface AlgorithmResultSummary {
  executionTimeMs: number;
  nodeCount?: number;
  edgeCount?: number;
  pathLength?: number;
}




===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\utils\algorithm-result.ts
===============================

export interface CommunityLegendItem {
  id: number;
  color: string;
  size: number; // number of nodes
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\utils\mapperHelper.ts
===============================
import { Node } from './../../models/node.model';
import { Edge } from "../../models/edge.model";
import { GraphLink, GraphNode } from "../../models/graph.model";
import { ComponentDto } from '../../models/algorith.model';

export function mapToGraphVisualization(
  nodes: Node[],
  edges: Edge[]
): { nodes: GraphNode[]; links: GraphLink[] } {

  const nodeMap = new Map<number, GraphNode>();

  const vizNodes: GraphNode[] = nodes.map(node => {
    const vn: GraphNode = {
      id: node.id.toString(),
      domain: node,
      label: node.tag,
      color: '#69b3a2'
    };
    nodeMap.set(node.id, vn);
    return vn;
  });

  const vizLinks: GraphLink[] = edges.map(e => ({
    id: `${e.nodeAId}-${e.nodeBId}`,
    source: nodeMap.get(e.nodeAId)!.id,
    target: nodeMap.get(e.nodeBId)!.id,
    weight: e.weight,
    domain: e
  }));

  return { nodes: vizNodes, links: vizLinks };
}


export function buildComponentColorMap(components: ComponentDto[]): Record<string, number> {
  const map: Record<string, number> = {};

  for (const component of components) {
    for (const node of component.nodes) {
      map[node.id] = component.id;
    }
  }

  return map;
}




===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\utils\toast-service.service.ts
===============================
import { Injectable } from '@angular/core';
import { MatSnackBar } from '@angular/material/snack-bar';


@Injectable({
  providedIn: 'root'
})
export class ToastService {


  constructor(private snackBar : MatSnackBar) { }

  success(message: string) {
    this.snackBar.open(message, 'OK', {
      duration: 3000,
      panelClass: ['toast-success'],
      horizontalPosition: 'right',
      verticalPosition: 'bottom'
    });
  }

  error(message: string) {
    this.snackBar.open(message, 'Close', {
      duration: 4000,
      panelClass: ['toast-error'],
      horizontalPosition: 'right',
      verticalPosition: 'bottom'
    });
  }

  info(message: string) {
    this.snackBar.open(message, undefined, {
      duration: 2500,
      panelClass: ['toast-info'],
      horizontalPosition: 'right',
      verticalPosition: 'bottom'
    });
  }
  algo(message: string) {
    this.snackBar.open(message, undefined, {
      duration: 5000,
      panelClass: ['toast-algo'],
      horizontalPosition: 'right',
      verticalPosition: 'top'
    });
  }
  runtime(message: string) {
    this.snackBar.open(message, undefined, {
      duration: 6000,
      panelClass: ['toast-runtime'],
      horizontalPosition: 'right',
      verticalPosition: 'top'
    });
  }
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\core\validators\graph.import.validator.ts
===============================
import { GraphSnapshot, ImportGraph } from "../../models/graph.model";

export function validateImportGraph(graph: ImportGraph): string[] {
  const errors: string[] = [];
  const nodeTags = new Set<string>();

  if (!graph.title || graph.title.trim().length === 0) {
    errors.push('Graph tag is required');
  }

  for (const node of graph.nodes ?? []) {
    if (node.activity < 0 || node.activity > 1) {
      errors.push(`Node ${node.tag}: activity must be between 0 and 1`);
    }

    if (node.interaction < 0) {
      errors.push(`Node ${node.tag}: interaction must be >= 0`);
    }

    if (nodeTags.has(node.tag)) {
      errors.push(`Duplicate node tag: ${node.tag}`);
    }

    nodeTags.add(node.tag);
  }

  for (const edge of graph.edges ?? []) {
    if (!nodeTags.has(edge.nodeTagA) || !nodeTags.has(edge.nodeTagB)) {
      errors.push(
        `Invalid edge: ${edge.nodeTagA} -> ${edge.nodeTagB}`
      );
    }
  }

  return errors;
}

export function validateSnapshot(snapshot: GraphSnapshot): boolean {

  if (!snapshot.title || !snapshot.nodes?.length){
    console.error('snapshot missing title and or nodes are empty')
    return false;
  }

  const tempIds = snapshot.nodes.map(n => n.id);
  if (new Set(tempIds).size !== tempIds.length){
    console.error('invalid tempId')
    return false;
  }

  for (const edge of snapshot.edges) {
    if (!tempIds.includes(edge.nodeAId) || !tempIds.includes(edge.nodeBId)){
      console.error('edges do not includes nodeIds');
      return false;
    }
  }

  return true;
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\feature\admin\admin-module.ts
===============================
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';



@NgModule({
  declarations: [],
  imports: [
    CommonModule
  ]
})
export class AdminModule { }


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\layout-module.ts
===============================
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';



@NgModule({
  declarations: [],
  imports: [
    CommonModule
  ]
})
export class LayoutModule { }


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\landing-layout.component.css
===============================
.landing-wrapper {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.content {
  flex: 1;
  background: #f7f8fb;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\landing-layout.component.html
===============================
<div class="landing-wrapper">
  <app-navbar></app-navbar>
  <main class="content">
    <router-outlet></router-outlet>
  </main>
  <app-footer></app-footer>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\landing-layout.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { LandingLayoutComponent } from './landing-layout.component';

describe('LandingLayoutComponent', () => {
  let component: LandingLayoutComponent;
  let fixture: ComponentFixture<LandingLayoutComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [LandingLayoutComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(LandingLayoutComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\landing-layout.component.ts
===============================
import { Component } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import { NavbarComponent } from './navbar/navbar.component';
import { FooterComponent } from './footer/footer.component';

@Component({
  selector: 'app-landing-layout',
  standalone: true,
  imports: [RouterOutlet, NavbarComponent, FooterComponent],
  templateUrl: './landing-layout.component.html',
  styleUrl: './landing-layout.component.css'
})
export class LandingLayoutComponent {

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\footer\footer.component.css
===============================
.footer {
  background: #2c3e50;
  color: #ecf0f1;
  padding: 48px 0 24px;
  margin-top: auto;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.footer-content {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 28px;
  margin-bottom: 28px;
}

.footer-section h3 {
  color: #3498db;
  margin-bottom: 15px;
  font-size: 20px;
}

.footer-section h4 {
  color: #ecf0f1;
  margin-bottom: 15px;
  font-size: 16px;
}

.footer-section p {
  color: #bdc3c7;
  line-height: 1.6;
}

.footer-section ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.footer-section ul li {
  margin-bottom: 10px;
}

.footer-section ul li a {
  color: #bdc3c7;
  text-decoration: none;
  transition: color 0.2s;
}

.footer-section ul li a:hover {
  color: #3498db;
}

.footer-bottom {
  text-align: center;
  padding-top: 20px;
  border-top: 1px solid rgba(255,255,255,0.08);
  color: #95a5a6;
  font-size: 14px;
}

@media (max-width: 768px) {
  .footer-content {
    grid-template-columns: 1fr;
    text-align: center;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\footer\footer.component.html
===============================
<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <h3>SNA Platform</h3>
        <p>Sosyal aÄ analizi ve gÃ¶rselleÅtirme aracÄ±</p>
      </div>

      <div class="footer-section">
        <h4>Sayfalar</h4>
        <ul>
          <li><a routerLink="/">Anasayfa</a></li>
          <li><a routerLink="/features">Ãzellikler</a></li>
          <li><a routerLink="/about">HakkÄ±mÄ±zda</a></li>
          <li><a routerLink="/contact">Ä°letiÅim</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h4>Ä°letiÅim</h4>
        <ul>
          <li>ð§ emreyildan&#64;gmail.com</li>
          <li>ð +90 533 967 46 24</li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; {{ currentYear }} SNA Platform. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
    </div>
  </div>
</footer>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\footer\footer.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { FooterComponent } from './footer.component';

describe('FooterComponent', () => {
  let component: FooterComponent;
  let fixture: ComponentFixture<FooterComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [FooterComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(FooterComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\footer\footer.component.ts
===============================
import { Component } from '@angular/core';
import { RouterLink } from '@angular/router';

@Component({
  selector: 'app-footer',
  standalone: true,
  imports: [RouterLink],
  templateUrl: './footer.component.html',
  styleUrl: './footer.component.css'
})
export class FooterComponent {
  currentYear = new Date().getFullYear();
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\navbar\navbar.component.css
===============================
.navbar {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: saturate(180%) blur(8px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  position: sticky;
  top: 0;
  z-index: 1000;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 72px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  color: #2c3e50;
  font-weight: 700;
  font-size: 20px;
}

.logo-icon {
  font-size: 28px;
}

.menu-toggle {
  display: none;
  flex-direction: column;
  gap: 5px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 5px;
}

.menu-toggle span {
  width: 24px;
  height: 2px;
  background: #2c3e50;
  border-radius: 2px;
  transition: 0.3s;
}

.nav-links {
  display: flex;
  list-style: none;
  gap: 28px;
  margin: 0;
  padding: 0;
  align-items: center;
}

.nav-links a {
  text-decoration: none;
  color: #555;
  font-weight: 600;
  transition: color 0.2s;
  padding: 8px 0;
}

.nav-links a:hover,
.nav-links a.active {
  color: #3498db;
}

.btn-login {
  color: #3498db !important;
  border: 2px solid #3498db;
  padding: 8px 20px !important;
  border-radius: 8px;
}

.btn-login:hover {
  background: #3498db;
  color: #fff !important;
}

.btn-register {
  background: #3498db;
  color: #fff !important;
  padding: 8px 20px !important;
  border-radius: 8px;
}

.btn-register:hover {
  background: #2980b9;
}

.btn-workspace {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff !important;
  padding: 8px 20px !important;
  border-radius: 8px;
  font-weight: 700;
}

.btn-workspace:hover {
  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.35);
}

.btn-logout {
  background: #fff;
  color: #e74c3c !important;
  padding: 8px 20px !important;
  border-radius: 8px;
  border: 2px solid #e74c3c;
  font-weight: 700;
  cursor: pointer;
}

.btn-logout:hover {
  background: #e74c3c;
  color: #fff !important;
  transform: translateY(-1px);
}

@media (max-width: 768px) {
  .menu-toggle {
    display: flex;
  }

  .nav-links {
    position: absolute;
    top: 72px;
    left: 0;
    right: 0;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    flex-direction: column;
    gap: 0;
    padding: 16px 20px;
    box-shadow: 0 10px 24px rgba(0,0,0,0.12);
    display: none;
  }

  .nav-links.active {
    display: flex;
  }

  .nav-links li {
    width: 100%;
    text-align: center;
    padding: 8px 0;
  }

  .nav-links a {
    display: block;
    padding: 10px;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\navbar\navbar.component.html
===============================
<nav class="navbar">
  <div class="container">
    <a routerLink="/" class="logo">
      <span class="logo-icon">ð</span>
      <span class="logo-text">SNA Platform</span>
    </a>

    <button class="menu-toggle" (click)="toggleMenu()" [class.active]="isMenuOpen">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <ul class="nav-links" [class.active]="isMenuOpen">
      <li><a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Anasayfa</a></li>
      <li><a routerLink="/features" routerLinkActive="active">Ãzellikler</a></li>
      <li><a routerLink="/about" routerLinkActive="active">HakkÄ±mÄ±zda</a></li>
      <li><a routerLink="/contact" routerLinkActive="active">Ä°letiÅim</a></li>
      @if (isLoggedIn) {
        <li><a routerLink="/workspace" class="btn-workspace">ð Workspace</a></li>
        <li><a (click)="logout()" class="btn-logout">ðª ÃÄ±kÄ±Å Yap</a></li>
      } @else {
        <li><a routerLink="/login" class="btn-login">GiriÅ Yap</a></li>
        <li><a routerLink="/register" class="btn-register">KayÄ±t Ol</a></li>
      }
    </ul>
  </div>
</nav>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\navbar\navbar.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { NavbarComponent } from './navbar.component';

describe('NavbarComponent', () => {
  let component: NavbarComponent;
  let fixture: ComponentFixture<NavbarComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [NavbarComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(NavbarComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\layout\landing-layout\navbar\navbar.component.ts
===============================
import { Component, OnInit } from '@angular/core';
import { RouterLink, RouterLinkActive, Router } from '@angular/router';
import { CommonModule } from '@angular/common';
import { AuthService } from '../../../services/auth.service';

@Component({
  selector: 'app-navbar',
  standalone: true,
  imports: [RouterLink, RouterLinkActive, CommonModule],
  templateUrl: './navbar.component.html',
  styleUrl: './navbar.component.css'
})
export class NavbarComponent implements OnInit {
  isMenuOpen = false;
  isLoggedIn = false;

  constructor(
    private authService: AuthService,
    private router: Router
  ) {}

  ngOnInit() {
    this.authService.isLoggedIn$.subscribe(status => {
      this.isLoggedIn = status;
    });
  }

  toggleMenu() {
    this.isMenuOpen = !this.isMenuOpen;
  }

  logout() {
    this.authService.logout();
    this.router.navigate(['/']);
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\models\algorith.model.ts
===============================
import { Guid } from "./graph.model"
import {Node } from "./node.model"



export interface BFSRequest{
  command : any
}
export interface TraversalResult{
  id: Guid,
  nodes:Node[],
  executionTime: number
}
export interface BFSResponse{
  result:TraversalResult
}

export interface DFSResponse{
  result : TraversalResult
}


export interface WelshPowellResult{
  graphId:Guid,
  colorsUsed:number,
  nodeWithColors: Record<number, number>;
  executionTime:number
}

export interface WelshPowellResponse{
  result:WelshPowellResult
}

export interface NodeWithDegree{
  id: number,
  tag:string,
  degree: number,
  normalizeDegree: number
}

export interface DegreeCentralityResult{
  id: Guid,
  maxDegree:number,
  nodeDegrees:Record<string, number>,
  executionTime:number
}

export interface DegreeCentralityResponse{
  result : DegreeCentralityResult
}

export interface TopFiveNodeInDegreeResult{
  id:Guid,
  maxDegree:number,
  nodes:NodeWithDegree[],
  executionTime:number
}
export interface TopFiveNodeInDegreeResponse{
  result: TopFiveNodeInDegreeResult
}


export interface ComponentDto{
  id:number,
  nodes:Node[]
}
export interface ConnectedComponentResult{
  graphId: Guid,
  components:ComponentDto[]
  executionTime:number
}
export interface ConnectedComponentResponse{
  result : ConnectedComponentResult
}


export interface AStarPathFindingResponse{
  result:TraversalResult
}

export interface DijsktraPathFindingResponse{
  result:TraversalResult
}


export interface CommunityDetectionResult{
  graphId: Guid,
  nodeToCommunity:Record<number, number>,
  communityCount:number,
  executionTime:number
}

export interface AlgorithmResult{
  id:Guid,
  graphId:Guid,
  algorithm:string,
  createdAt:number,
  parameters:Record<string, any>
  result:any
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\models\edge.model.ts
===============================
import { Graph, Guid } from "./graph.model";

export interface Edge {
  weight: number;
  nodeAId: number;
  nodeBId: number;
}
export interface EdgeImportDto {
  nodeTagA: string;
  nodeTagB: string;
}
export interface AddEdgeDto {
  graphId: Guid;
  nodeAId: number;
  nodeBId: number;
}
export interface ExportEdgeDto{
  nodeA: number
  nodeB: number,
  weight: number
}

export interface EdgeSnapshot {
  nodeAId: number;
  nodeBId: number;
  weight?: number;
}
export interface AddEdgeResponse{
  isSuccess: boolean,
  edge:Edge
}
export interface DeleteEdgeResponse{
  graph:Graph
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\models\graph.model.ts
===============================
import { Edge, EdgeImportDto,EdgeSnapshot,ExportEdgeDto } from "./edge.model";
import { ExportNodeDto, NodeImportDto, NodeSnapshot, Node } from "./node.model";


export type Guid = string;

export interface Graph {
  id: Guid;
  title: string,
  description?: string | null,
  order: number | 0;
  size: number | 0;
  nodes:Node[];
  edges:Edge[];
}
export interface ImportGraph {
  title: string;
  description?: string;
  nodes: NodeImportDto[];
  edges: EdgeImportDto[];
};

export interface GraphDto {
  id: Guid;
  title: string;
  description?: string;
  order: number;
  size: number;
  nodes: NodeImportDto[];
  edges: EdgeImportDto[];
}
export interface CreateGraphDto {
  title: string;
}

export interface ImportGraphCommand {
  title: string;
  description?: string;
  nodes: NodeImportDto[];
  edges: EdgeImportDto[];
}

export interface ImportGraphRequest {
  importGraph: ImportGraphCommand;
}

export interface ImportGraphResponse {
  graph: Graph;
}
export interface GraphSummary {
  id: Guid;
  nodeCount: number;
  edgeCount: number;
  title: string;
  description: string;
  isConnected: boolean;
  isWeighted: boolean;
  isDirected: boolean;
  density: number;
  averageDegree: number;
}

export interface GetGraphSummaryResponse {
  graphSummary: GraphSummary;
}
export interface EditGraphResponse{
  title: string;
  description: string
}
export interface EditGraphCommand{
  id : Guid;
  title:string;
  description: string
}
export interface EditGraphRequest{
  graph : EditGraphCommand
}

export interface ExportGraphDto{
  id: Guid,
  title:string,
  description: string,
  isConnected:boolean,
  isWeighted:boolean,
  order:number,
  size: number,
  nodes:ExportNodeDto[],
  edges:ExportEdgeDto[]
}
export interface ExportGraphResponse{
  graph: ExportGraphDto
}

export interface GraphSnapshot {
  id:Guid,
  title: string;
  description?: string;
  nodes: NodeSnapshot[];
  edges: EdgeSnapshot[];
}

export interface GraphNode extends d3.SimulationNodeDatum {
  id: string;
  label: string;
  color?: string;
  domain: Node
}

export interface GraphLink extends d3.SimulationLinkDatum<GraphNode> {
  id?: string;
  source: string | GraphNode;
  target: string | GraphNode;
  weight:number;
  domain: Edge
}







===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\models\message.model.ts
===============================
export interface Message extends MessageDto {
  id : number;
  isread: boolean;
}

export interface MessageDto{
  fullname:string;
  email:string;
  phone: string;
  content: string;
  subject: string;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\models\node.model.ts
===============================
import { Graph, Guid } from "./graph.model";

export interface NodeImportDto {
  tag: string;
  activity: number;
  interaction: number;
}
export interface Node {
  id: number;
  graphId: Guid;
  tag: string;
  activity: number;
  interaction: number;
}
export interface AddNodeDto extends NodeImportDto {
  graphId: Guid;
}

export interface EditNodeDto {
  nodeId: number;
  tag: string;
  activity: number;
  interaction: number;
}
export interface ExportNodeDto{
  id:number,
  graphId:Guid,
  tag : string,
  activity: number,
  interaction: number
}
export interface ExportEdge{
  nodeA: number
  nodeB: number,
  weight:number
}


export interface NodeSnapshot {
  id: number;
  tag: string;
  activity: number;
  interaction: number;
}

export interface DeleteNodeRespose{
  result: Graph
}





===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\pipes\pretty-csv.pipe.spec.ts
===============================
import { PrettyCsvPipe } from './pretty-csv.pipe';

describe('PrettyCsvPipe', () => {
  it('create an instance', () => {
    const pipe = new PrettyCsvPipe();
    expect(pipe).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\pipes\pretty-csv.pipe.ts
===============================
import { Pipe, PipeTransform } from '@angular/core';

@Pipe({
  name: 'prettyCsv'
})
export class PrettyCsvPipe implements PipeTransform {

  transform(value: any): string {
    if (!value) return '';

    // Normalize to array
    const data = Array.isArray(value) ? value : [value];

    if (!data.length || typeof data[0] !== 'object') return '';

    const headers = Object.keys(data[0]);

    const csvRows = [
      headers.join(','), // header row
      ...data.map(row =>
        headers.map(h => this.escape(row[h])).join(',')
      )
    ];

    return csvRows.join('\n');
  }

  private escape(value: any): string {
    if (value === null || value === undefined) return '';
    const str = String(value);
    return `"${str.replace(/"/g, '""')}"`;
  }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\pipes\pretty-json.pipe.spec.ts
===============================
import { PrettyJsonPipe } from './pretty-json.pipe';

describe('PrettyJsonPipe', () => {
  it('create an instance', () => {
    const pipe = new PrettyJsonPipe();
    expect(pipe).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\pipes\pretty-json.pipe.ts
===============================
import { Pipe, PipeTransform } from '@angular/core';

@Pipe({
  name: 'prettyJson'
})
export class PrettyJsonPipe implements PipeTransform {

  transform(value: any): string {
    if (!value) return '';

    const json = JSON.stringify(value, null, 2);

    return json
      .replace(/"(.*?)":/g, '<span class="json-key">"$1"</span>:')
      .replace(/: "(.*?)"/g, ': <span class="json-string">"$1"</span>')
      .replace(/: (\d+(\.\d+)?)/g, ': <span class="json-number">$1</span>')
      .replace(/: (true|false)/g, ': <span class="json-boolean">$1</span>');
  }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\authentication\authentication-module.ts
===============================
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';



@NgModule({
  declarations: [],
  imports: [
    CommonModule
  ]
})
export class AuthenticationModule { }


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\authentication\login\login.component.css
===============================
.login-container {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.login-box {
  background: white;
  border-radius: 10px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  padding: 40px;
  width: 100%;
  max-width: 400px;
  animation: slideIn 0.5s ease-out;
}

@keyframes slideIn {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.login-header {
  text-align: center;
  margin-bottom: 40px;
}

.login-header h1 {
  margin: 0;
  color: #2c3e50;
  font-size: 28px;
  font-weight: 700;
  letter-spacing: 0.5px;
}

.login-header p {
  margin: 5px 0 0 0;
  color: #7f8c8d;
  font-size: 14px;
}

.login-form {
  margin-bottom: 20px;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  color: #2c3e50;
  font-weight: 600;
  font-size: 14px;
}

.form-group input {
  width: 100%;
  padding: 12px;
  border: 2px solid #ecf0f1;
  border-radius: 6px;
  font-size: 14px;
  transition: all 0.3s ease;
  box-sizing: border-box;
  font-family: inherit;
}

.form-group input:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.form-group input::placeholder {
  color: #95a5a6;
}

.error-message {
  background-color: #fee;
  color: #c33;
  padding: 12px;
  border-radius: 6px;
  margin-bottom: 15px;
  font-size: 14px;
  border-left: 4px solid #c33;
}

.login-button {
  width: 100%;
  padding: 12px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.login-button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
}

.login-button:active:not(:disabled) {
  transform: translateY(0);
}

.login-button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.login-footer {
  text-align: center;
  border-top: 1px solid #ecf0f1;
  padding-top: 20px;
}

.login-footer p {
  margin: 0;
  color: #7f8c8d;
  font-size: 14px;
}

.login-footer a {
  color: #667eea;
  text-decoration: none;
  font-weight: 600;
  transition: color 0.3s ease;
}

.login-footer a:hover {
  color: #764ba2;
  text-decoration: underline;
}

@media (max-width: 480px) {
  .login-box {
    padding: 30px 20px;
  }

  .login-header h1 {
    font-size: 24px;
  }

  .login-button {
    font-size: 14px;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\authentication\login\login.component.html
===============================
<div class="login-container">
  <div class="login-box">
    <div class="login-header">
      <h1>SNA UygulamasÄ±</h1>
      <p>Sosyal AÄ Analizi</p>
    </div>

    <form (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          [(ngModel)]="email"
          name="email"
          placeholder="E-posta adresinizi girin"
          required
        />
      </div>

      <div class="form-group">
        <label for="password">Åifre</label>
        <input
          type="password"
          id="password"
          [(ngModel)]="password"
          name="password"
          placeholder="Åifrenizi girin"
          required
        />
      </div>

      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>

      <button 
        type="submit" 
        class="login-button"
        [disabled]="isLoading"
      >
        {{ isLoading ? 'GiriÅ yapÄ±lÄ±yor...' : 'GiriÅ Yap' }}
      </button>
    </form>

    <div class="login-footer">
      <p>HesabÄ±nÄ±z yok mu? <a routerLink="/register">Kaydol</a></p>
    </div>
  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\authentication\login\login.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { LoginComponent } from './login.component';

describe('LoginComponent', () => {
  let component: LoginComponent;
  let fixture: ComponentFixture<LoginComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [LoginComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(LoginComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\authentication\login\login.component.ts
===============================
import { Component } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { CommonModule } from '@angular/common';
import { Router, RouterLink } from '@angular/router';
import { AuthService } from '../../../services/auth.service';

@Component({
  selector: 'app-login',
  standalone: true,
  imports: [FormsModule, CommonModule, RouterLink],
  templateUrl: './login.component.html',
  styleUrl: './login.component.css'
})
export class LoginComponent {
  email: string = '';
  password: string = '';
  errorMessage: string = '';
  isLoading: boolean = false;

  constructor(
    private authService: AuthService,
    private router: Router
  ) {}

  onSubmit() {
    this.errorMessage = '';
    
    if (!this.email || !this.password) {
      this.errorMessage = 'Email ve Åifre gerekli';
      return;
    }

    if (!this.email.includes('@')) {
      this.errorMessage = 'GeÃ§erli bir email adresi girin';
      return;
    }

    this.isLoading = true;
    
    setTimeout(() => {
      const success = this.authService.login(this.email, this.password);
      this.isLoading = false;
      
      if (success) {
        this.router.navigate(['/']);
      } else {
        this.errorMessage = 'Email veya Åifre hatalÄ±';
      }
    }, 500);
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\authentication\register\register.component.css
===============================
.register-container {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.register-box {
  background: white;
  border-radius: 10px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  padding: 40px;
  width: 100%;
  max-width: 400px;
  animation: slideIn 0.5s ease-out;
}

@keyframes slideIn {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.register-header {
  text-align: center;
  margin-bottom: 40px;
}

.register-header h1 {
  margin: 0;
  color: #2c3e50;
  font-size: 28px;
  font-weight: 700;
  letter-spacing: 0.5px;
}

.register-header p {
  margin: 5px 0 0 0;
  color: #7f8c8d;
  font-size: 14px;
}

.register-form {
  margin-bottom: 20px;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  color: #2c3e50;
  font-weight: 600;
  font-size: 14px;
}

.form-group input {
  width: 100%;
  padding: 12px;
  border: 2px solid #ecf0f1;
  border-radius: 6px;
  font-size: 14px;
  transition: all 0.3s ease;
  box-sizing: border-box;
  font-family: inherit;
}

.form-group input:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.form-group input::placeholder {
  color: #95a5a6;
}

.error-message {
  background-color: #fee;
  color: #c33;
  padding: 12px;
  border-radius: 6px;
  margin-bottom: 15px;
  font-size: 14px;
  border-left: 4px solid #c33;
}

.register-button {
  width: 100%;
  padding: 12px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.register-button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
}

.register-button:active:not(:disabled) {
  transform: translateY(0);
}

.register-button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.register-footer {
  text-align: center;
  border-top: 1px solid #ecf0f1;
  padding-top: 20px;
}

.register-footer p {
  margin: 0;
  color: #7f8c8d;
  font-size: 14px;
}

.register-footer a {
  color: #667eea;
  text-decoration: none;
  font-weight: 600;
  transition: color 0.3s ease;
}

.register-footer a:hover {
  color: #764ba2;
  text-decoration: underline;
}

@media (max-width: 480px) {
  .register-box {
    padding: 30px 20px;
  }

  .register-header h1 {
    font-size: 24px;
  }

  .register-button {
    font-size: 14px;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\authentication\register\register.component.html
===============================
<div class="register-container">
  <div class="register-box">
    <div class="register-header">
      <h1>Kaydol</h1>
      <p>Sosyal AÄ Analizi UygulamasÄ±</p>
    </div>

    <form (ngSubmit)="onSubmit()" class="register-form">
      <div class="form-group">
        <label for="name">Ad Soyad</label>
        <input
          type="text"
          id="name"
          [(ngModel)]="name"
          name="name"
          placeholder="AdÄ±nÄ±z ve soyadÄ±nÄ±z"
          required
        />
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          [(ngModel)]="email"
          name="email"
          placeholder="E-posta adresinizi girin"
          required
        />
      </div>

      <div class="form-group">
        <label for="password">Åifre</label>
        <input
          type="password"
          id="password"
          [(ngModel)]="password"
          name="password"
          placeholder="Minimum 6 karakter"
          required
        />
      </div>

      <div class="form-group">
        <label for="confirmPassword">Åifre TekrarÄ±</label>
        <input
          type="password"
          id="confirmPassword"
          [(ngModel)]="confirmPassword"
          name="confirmPassword"
          placeholder="Åifrenizi tekrar girin"
          required
        />
      </div>

      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>

      <button 
        type="submit" 
        class="register-button"
        [disabled]="isLoading"
      >
        {{ isLoading ? 'KayÄ±t yapÄ±lÄ±yor...' : 'Kaydol' }}
      </button>
    </form>

    <div class="register-footer">
      <p>Zaten bir hesabÄ±nÄ±z var mÄ±? <a routerLink="/login">GiriÅ Yap</a></p>
    </div>
  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\authentication\register\register.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { RegisterComponent } from './register.component';

describe('RegisterComponent', () => {
  let component: RegisterComponent;
  let fixture: ComponentFixture<RegisterComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [RegisterComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(RegisterComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\authentication\register\register.component.ts
===============================
import { Component } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { CommonModule } from '@angular/common';
import { Router, RouterLink } from '@angular/router';
import { AuthService } from '../../../services/auth.service';

@Component({
  selector: 'app-register',
  standalone: true,
  imports: [FormsModule, CommonModule, RouterLink],
  templateUrl: './register.component.html',
  styleUrl: './register.component.css'
})
export class RegisterComponent {
  name: string = '';
  email: string = '';
  password: string = '';
  confirmPassword: string = '';
  errorMessage: string = '';
  isLoading: boolean = false;

  constructor(
    private authService: AuthService,
    private router: Router
  ) {}

  onSubmit() {
    this.errorMessage = '';
    
    if (!this.name || !this.email || !this.password || !this.confirmPassword) {
      this.errorMessage = 'TÃ¼m alanlarÄ± doldurunuz';
      return;
    }

    if (!this.email.includes('@')) {
      this.errorMessage = 'GeÃ§erli bir email adresi girin';
      return;
    }

    if (this.password.length < 6) {
      this.errorMessage = 'Åifre en az 6 karakter olmalÄ±dÄ±r';
      return;
    }

    if (this.password !== this.confirmPassword) {
      this.errorMessage = 'Åifreler eÅleÅmiyor';
      return;
    }

    this.isLoading = true;
    
    setTimeout(() => {
      const success = this.authService.register(this.name, this.email, this.password);
      this.isLoading = false;
      
      if (success) {
        this.router.navigate(['/dashboard']);
      } else {
        this.errorMessage = 'KayÄ±t iÅlemi baÅarÄ±sÄ±z oldu';
      }
    }, 500);
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\landing-module.ts
===============================
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';



@NgModule({
  declarations: [],
  imports: [
    CommonModule
  ]
})
export class LandingModule { }



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\about\about.component.css
===============================
.about-page {
  background: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.hero {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  padding: 40px 20px;
  text-align: center;
}

.hero h1 {
  font-size: 42px;
  margin-bottom: 15px;
}

.hero p {
  font-size: 18px;
  opacity: 0.95;
  padding: 0;
  font-weight: 500;
}

.story {
  padding: 80px 20px;
  background: #fff;
}

.story h2 {
  font-size: 32px;
  color: #2c3e50;
  margin-bottom: 30px;
  text-align: center;
}

.story p {
  font-size: 17px;
  line-height: 1.9;
  color: #2c3e50;
  max-width: 900px;
  margin: 0 auto 24px;
  font-weight: 500;
}

.values {
  padding: 80px 20px;
}

.values-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 28px;
}

.value-card {
  background: #fff;
  padding: 36px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

.icon {
  font-size: 48px;
  margin-bottom: 15px;
}

.value-card h3 {
  color: #2c3e50;
  margin-bottom: 12px;
  font-size: 18px;
  font-weight: 600;
}

.value-card p {
  color: #555;
  font-size: 15px;
  line-height: 1.6;
}

@media (max-width: 768px) {
  .hero h1 { font-size: 32px; }
  .story h2 { font-size: 28px; }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\about\about.component.html
===============================
<div class="about-page">
  <section class="hero">
    <div class="container">
      <h1>HakkÄ±mÄ±zda</h1>
      <p>Sosyal aÄ analizini herkes iÃ§in kolaylaÅtÄ±rÄ±yoruz</p>
    </div>
  </section>

  <section class="story">
    <div class="container">
      <h2>Hikayemiz</h2>
        <p>
            SNA Platform, 2025-2026 Yazlab II dersi kapsamÄ±nda Emre Yasin YÄ±ldan ve Aboubacar Sow tarafÄ±ndan geliÅtirilmiÅtir. Proje, sosyal aÄ analizi alanÄ±nda yaÅanan karmaÅÄ±klÄ±klarÄ± ortadan kaldÄ±rarak, araÅtÄ±rmacÄ±lar, Ã¶Ärenciler ve meraklÄ± kullanÄ±cÄ±larÄ±n sosyal aÄlarÄ±n yapÄ±sÄ±nÄ± anlamasÄ±nÄ± saÄlamayÄ± hedefler.
        </p>
        <p>
            Ä°nsan iliÅkilerinin dijital dÃ¼nyada giderek Ã¶nem kazandÄ±ÄÄ± bu Ã§aÄda, sosyal aÄlarÄ±n dinamiklerini anlamak Ã¶nemlidir. Biz, bu analizi eriÅilebilir, kullanÄ±cÄ± dostu ve gÃ¶rsel olarak anlaÅÄ±lÄ±r kÄ±lmak iÃ§in SNA Platform'u inÅa ettik. KarmaÅÄ±k veri setlerini interaktif grafiklere dÃ¶nÃ¼ÅtÃ¼rerek, her kullanÄ±cÄ±nÄ±n sosyal aÄlar hakkÄ±nda derinden Ã¶Ärenmesini mÃ¼mkÃ¼n kÄ±lÄ±yoruz.
        </p>
        <p>
            Vizyonumuz, sosyal aÄ analizini demokratikleÅtirmek ve bu gÃ¼Ã§lÃ¼ aracÄ± herkesin eline ulaÅtÄ±rmaktÄ±r. Akademikten uygulamaya, eÄitimden araÅtÄ±rmaya kadar geniÅ bir yelpazede hizmet saÄlayan bir platform olmayÄ± amaÃ§lÄ±yoruz.
        </p>
    </div>
  </section>

  <section class="values">
    <div class="container">
      <div class="values-grid">
        <div class="value-card" *ngFor="let value of values">
          <div class="icon">{{ value.icon }}</div>
          <h3>{{ value.title }}</h3>
          <p>{{ value.desc }}</p>
        </div>
      </div>
    </div>
  </section>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\about\about.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { AboutComponent } from './about.component';

describe('AboutComponent', () => {
  let component: AboutComponent;
  let fixture: ComponentFixture<AboutComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [AboutComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(AboutComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\about\about.component.ts
===============================
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';

@Component({
  selector: 'app-about',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './about.component.html',
  styleUrl: './about.component.css'
})
export class AboutComponent {
  values = [
    { icon: 'ð¯', title: 'Misyonumuz', desc: 'Sosyal aÄ analizini herkes iÃ§in eriÅilebilir kÄ±lmak' },
    { icon: 'ð', title: 'Vizyonumuz', desc: 'AÄ analizi alanÄ±nda lider platform olmak' },
    { icon: 'ð¤', title: 'DeÄerlerimiz', desc: 'ÅeffaflÄ±k, inovasyon ve kullanÄ±cÄ± odaklÄ±lÄ±k' }
  ];
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\contact\contact.component.css
===============================
.contact-page {
  background: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.hero {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  padding: 80px 20px;
  text-align: center;
}

.hero h1 {
  font-size: 42px;
  margin-bottom: 15px;
}

.hero p {
  font-size: 18px;
  opacity: 0.95;
}

.contact-content {
  padding: 80px 20px;
}

.contact-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 40px;
}

.contact-info h2 {
  color: #2c3e50;
  margin-bottom: 20px;
  font-size: 24px;
  font-weight: 600;
}

.contact-info > p {
  color: #555;
  margin-bottom: 30px;
  font-size: 16px;
  line-height: 1.7;
}

.info-item {
  display: flex;
  gap: 15px;
  margin-bottom: 25px;
}

.info-item .icon {
  font-size: 32px;
}

.info-item h3 {
  color: #2c3e50;
  margin-bottom: 6px;
  font-size: 16px;
  font-weight: 600;
}

.info-item p {
  color: #555;
  margin: 0;
  font-size: 15px;
}

.contact-form {
  background: #fff;
  padding: 36px;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  color: #2c3e50;
  font-weight: 600;
  font-size: 15px;
}

.form-group input,
.form-group textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 14px;
  transition: border-color 0.2s;
}

.form-group input:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.15);
}

.error {
  color: #e74c3c;
  font-size: 12px;
  margin-top: 5px;
  display: block;
}

.btn-submit {
  width: 100%;
  padding: 14px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  border: none;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.2s;
}

.btn-submit:hover {
  transform: translateY(-2px);
}

.map-section {
  padding: 80px 20px;
  background: #fff;
  margin-top: 40px;
}

.map-section h2 {
  text-align: center;
  font-size: 32px;
  color: #2c3e50;
  margin-bottom: 40px;
  font-weight: 600;
}

.map-container {
  width: 100%;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

.map-container iframe {
  width: 100%;
  display: block;
}


@media (max-width: 768px) {
  .contact-grid {
    grid-template-columns: 1fr;
  }
  .hero h1 { font-size: 32px; }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\contact\contact.component.html
===============================
<div class="contact-page">
  <section class="hero">
    <div class="container">
      <h1>Ä°letiÅim</h1>
      <p>SorularÄ±nÄ±z iÃ§in bize ulaÅÄ±n</p>
    </div>
  </section>

  <section class="contact-content">
    <div class="container">
      <div class="contact-grid">
        <div class="contact-info">
          <h2>Bizimle Ä°letiÅime GeÃ§in</h2>
          <p>SorularÄ±nÄ±zÄ± cevaplamaktan mutluluk duyarÄ±z.</p>

          <div class="info-item">
            <div class="icon">ð§</div>
            <div>
              <h3>E-posta</h3>
              <p>emreyildan&#64;gmail.com</p>
            </div>
          </div>

          <div class="info-item">
            <div class="icon">ð</div>
            <div>
              <h3>Telefon</h3>
              <p>+90 533 967 46 24</p>
            </div>
          </div>

          <div class="info-item">
            <div class="icon">ð</div>
            <div>
              <h3>Adres</h3>
              <p>Kocaeli Ãniversitesi, Kocaeli, TÃ¼rkiye</p>
            </div>
          </div>
        </div>

        <app-message-form></app-message-form>
      </div>

      <div class="map-section">
        <h2>Konumumuz</h2>
        <p style="text-align: center; color: #555; margin-bottom: 30px;">Kocaeli Ãniversitesi Teknoloji FakÃ¼ltesi</p>
        <div class="map-container">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3074.856827604!2d29.914869!3d40.823908!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14cb5badf629fe45%3A0xc81fa849234e8755!2sKocaeli%20%C3%9Cniversitesi%20Teknoloji%20FakÃ¼ltesi!5e0!3m2!1str!2str!4v1702654800000" width="100%" height="500" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </div>
    </div>
  </section>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\contact\contact.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { ContactComponent } from './contact.component';

describe('ContactComponent', () => {
  let component: ContactComponent;
  let fixture: ComponentFixture<ContactComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [ContactComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(ContactComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\contact\contact.component.ts
===============================
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MessageFormComponent } from "../message-form/message-form.component";

@Component({
  selector: 'app-contact',
  standalone: true,
  imports: [CommonModule, MessageFormComponent],
  templateUrl: './contact.component.html',
  styleUrl: './contact.component.css'
})
export class ContactComponent {

  constructor() {

  }


}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\features\features.component.css
===============================
.features-page {
  background: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.hero {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  padding: 80px 20px;
  text-align: center;
}

.hero h1 {
  font-size: 42px;
  margin-bottom: 15px;
}

.hero p {
  font-size: 18px;
  opacity: 0.95;
}

.features-content {
  padding: 80px 20px;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 28px;
}

.feature-card {
  background: #fff;
  padding: 36px;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.feature-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.12);
}

.icon {
  font-size: 48px;
  margin-bottom: 20px;
}

.feature-card h3 {
  color: #2c3e50;
  margin-bottom: 15px;
  font-size: 20px;
  font-weight: 600;
}

.feature-card p {
  color: #555;
  margin-bottom: 20px;
  line-height: 1.7;
  font-size: 15px;
}

.feature-card ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.feature-card li {
  color: #555;
  padding: 10px 0;
  border-bottom: 1px solid #f0f0f0;
  font-size: 15px;
}

.feature-card li:last-child {
  border-bottom: none;
}

@media (max-width: 768px) {
  .hero h1 { font-size: 32px; }
  .features-grid { grid-template-columns: 1fr; }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\features\features.component.html
===============================
<div class="features-page">
  <section class="hero">
    <div class="container">
      <h1>Ãzellikler</h1>
      <p>GÃ¼Ã§lÃ¼ araÃ§larla sosyal aÄ analizini keÅfedin</p>
    </div>
  </section>

  <section class="features-content">
    <div class="container">
      <div class="features-grid">
        <div class="feature-card" *ngFor="let feature of features">
          <div class="icon">{{ feature.icon }}</div>
          <h3>{{ feature.title }}</h3>
          <p>{{ feature.desc }}</p>
          <ul>
            <li *ngFor="let item of feature.items">â {{ item }}</li>
          </ul>
        </div>
      </div>
    </div>
  </section>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\features\features.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { FeaturesComponent } from './features.component';

describe('FeaturesComponent', () => {
  let component: FeaturesComponent;
  let fixture: ComponentFixture<FeaturesComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [FeaturesComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(FeaturesComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\features\features.component.ts
===============================
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';

@Component({
  selector: 'app-features',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './features.component.html',
  styleUrl: './features.component.css'
})
export class FeaturesComponent {
  features = [
    { 
      icon: 'ð', 
      title: 'GeliÅmiÅ AÄ Analizi', 
      desc: 'Merkezilik Ã¶lÃ§Ã¼leri, topluluk tespiti, yol analizi ve daha fazlasÄ±',
      items: ['Derece MerkeziliÄi', 'ArasÄ±nda MerkeziliÄi', 'YakÄ±nlÄ±k MerkeziliÄi', 'PageRank']
    },
    { 
      icon: 'ð', 
      title: 'Ä°nteraktif GÃ¶rselleÅtirme', 
      desc: 'KullanÄ±cÄ± dostu araÃ§larla graflarÄ±nÄ±zÄ± gÃ¶rselleÅtirin',
      items: ['Zoom & Pan', 'DÃ¼ÄÃ¼m Filtreleme', 'Layout AlgoritmasÄ±', 'Renk Kodlama']
    },
    { 
      icon: 'ð¾', 
      title: 'Veri YÃ¶netimi', 
      desc: 'FarklÄ± formatlardan veri iÃ§e/dÄ±Åa aktarma',
      items: ['CSV Import', 'JSON Export', 'GraphML DesteÄi', 'Excel Entegrasyonu']
    },
    { 
      icon: 'â¡', 
      title: 'Performans', 
      desc: 'BÃ¼yÃ¼k veri setleri iÃ§in optimize edilmiÅ iÅleme',
      items: ['HÄ±zlÄ± Hesaplama', 'Paralel Ä°Åleme', 'Bellek Optimizasyonu', 'GerÃ§ek ZamanlÄ± GÃ¼ncelleme']
    }
  ];
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\home\home.component.css
===============================
.home-page {
  background: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.hero {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  padding: 96px 20px;
  text-align: center;
}

.hero h1 {
  font-size: 48px;
  margin-bottom: 20px;
  font-weight: 800;
}

.subtitle {
  font-size: 20px;
  margin-bottom: 40px;
  opacity: 0.95;
}
.subtitle .accent {
  display: inline-block;
  padding: 6px 12px;
  margin-left: 6px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.16);
  border: 1px solid rgba(255, 255, 255, 0.24);
  box-shadow: 0 6px 16px rgba(0,0,0,0.12);
}

.cta-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
  flex-wrap: wrap;
}

.btn {
  padding: 14px 32px;
  border-radius: 10px;
  text-decoration: none;
  font-weight: 700;
  transition: transform 0.2s, box-shadow 0.2s;
  display: inline-block;
}

.btn-primary {
  background: #fff;
  color: #667eea;
  box-shadow: 0 6px 16px rgba(0,0,0,0.12);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.18);
}

.btn-outline {
  border: 2px solid #fff;
  color: #fff;
}

.btn-outline:hover {
  background: #fff;
  color: #667eea;
}

.features-preview {
  padding: 80px 20px;
}

.features-preview h2 {
  text-align: center;
  font-size: 36px;
  margin-bottom: 50px;
  color: #2c3e50;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 30px;
}

.feature-card {
  background: #fff;
  padding: 30px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  transition: transform 0.2s;
}

.feature-card:hover {
  transform: translateY(-5px);
}

.icon {
  font-size: 48px;
  margin-bottom: 15px;
}

.feature-card h3 {
  color: #2c3e50;
  margin-bottom: 12px;
  font-size: 18px;
  font-weight: 600;
}

.feature-card p {
  color: #555;
  font-size: 15px;
  line-height: 1.6;
}

.workspace-access {
  padding: 64px 20px;
  background: #f8f9fa;
}

.access-card {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  padding: 56px 44px;
  border-radius: 16px;
  text-align: center;
  box-shadow: 0 14px 34px rgba(102, 126, 234, 0.28);
}

.access-card h2 {
  font-size: 32px;
  margin-bottom: 15px;
}

.access-card p {
  font-size: 18px;
  margin-bottom: 30px;
  opacity: 0.95;
}

.access-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
  flex-wrap: wrap;
}

.cta-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  padding: 84px 20px;
  text-align: center;
}

.cta-section h2 {
  font-size: 36px;
  margin-bottom: 15px;
}

.cta-section p {
  font-size: 18px;
  margin-bottom: 30px;
  opacity: 0.95;
}

.btn-large {
  background: #fff;
  color: #667eea;
  padding: 16px 40px;
  font-size: 18px;
}

@media (max-width: 768px) {
  .hero h1 { font-size: 32px; }
  .subtitle { font-size: 16px; }
  .features-preview h2 { font-size: 28px; }
  .cta-section h2 { font-size: 28px; }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\home\home.component.html
===============================
<div class="home-page">
  <section class="hero">
    <div class="container">
      <h1>Sosyal AÄ Analizi Platformu</h1>
      <p class="subtitle">AÄ yapÄ±larÄ±nÄ± analiz edin, gÃ¶rselleÅtirin ve anlamÄ±nÄ± keÅfedin.</p>
      <p class="subtitle">KullanÄ±cÄ± ArayÃ¼zÃ¼ sayfamÄ±za tek tÄ±kla geÃ§mek iÃ§in: <span class="accent">Hemen BaÅlayÄ±n</span></p>
      <div class="cta-buttons">
        <a [routerLink]="ctaLink" class="btn btn-primary">{{ ctaText }}</a>
        <a routerLink="/features" class="btn btn-outline">Ãzellikleri Ä°nceleyin</a>
      </div>
    </div>
  </section>

  <section class="features-preview">
    <div class="container">
      <h2>Neden SNA Platform?</h2>
      <div class="features-grid">
        <div class="feature-card" *ngFor="let feature of features">
          <div class="icon">{{ feature.icon }}</div>
          <h3>{{ feature.title }}</h3>
          <p>{{ feature.desc }}</p>
        </div>
      </div>
    </div>
  </section>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\home\home.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { HomeComponent } from './home.component';

describe('HomeComponent', () => {
  let component: HomeComponent;
  let fixture: ComponentFixture<HomeComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [HomeComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(HomeComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\home\home.component.ts
===============================
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterLink } from '@angular/router';
import { AuthService } from '../../../services/auth.service';

@Component({
  selector: 'app-home',
  standalone: true,
  imports: [CommonModule, RouterLink],
  templateUrl: './home.component.html',
  styleUrl: './home.component.css'
})
export class HomeComponent implements OnInit {
  isLoggedIn = false;
  
  features = [
    { icon: 'ð', title: 'AÄ Analizi', desc: 'KapsamlÄ± sosyal aÄ analizi araÃ§larÄ±' },
    { icon: 'ð', title: 'GÃ¶rselleÅtirme', desc: 'Ä°nteraktif graf gÃ¶rselleri' },
    { icon: 'ð¾', title: 'Veri YÃ¶netimi', desc: 'Kolay iÃ§e/dÄ±Åa aktarma' },
    { icon: 'â¡', title: 'HÄ±zlÄ± Ä°Åleme', desc: 'BÃ¼yÃ¼k veri setleri iÃ§in optimize' }
  ];

  constructor(private authService: AuthService) {}

  ngOnInit() {
    this.authService.isLoggedIn$.subscribe(status => {
      this.isLoggedIn = status;
    });
  }

  get ctaLink(): string {
    return this.isLoggedIn ? '/User-Interface/dashboard' : '/register';
  }

  get ctaText(): string {
    return 'Hemen BaÅlayÄ±n';
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\message-form\message-form.component.css
===============================


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\message-form\message-form.component.html
===============================
<form
  [formGroup]="messageForm"
  (ngSubmit)="onSubmit()"
  class="contact-form"
  novalidate
>
  <!-- Full Name -->
  <div class="form-group">
    <label for="fullname">Full Name</label>
    <input
      id="fullname"
      type="text"
      formControlName="fullname"
      placeholder="Enter your full name"
    />
    <span class="error" *ngIf="submitted && messageForm.get('fullname')?.hasError('required')">
      Full name is required
    </span>
  </div>

  <!-- Email -->
  <div class="form-group">
    <label for="email">Email</label>
    <input
      id="email"
      type="email"
      formControlName="email"
      placeholder="Enter your email address"
    />
    <span class="error" *ngIf="submitted && messageForm.get('email')?.hasError('required')">
      Email is required
    </span>
    <span class="error" *ngIf="submitted && messageForm.get('email')?.hasError('email')">
      Please enter a valid email address
    </span>
  </div>

  <!-- Phone -->
  <div class="form-group">
    <label for="phone">Phone</label>
    <input
      id="phone"
      type="tel"
      formControlName="phone"
      placeholder="+90 5xx xxx xx xx"
    />
    <span class="error" *ngIf="submitted && messageForm.get('phone')?.hasError('required')">
      Phone number is required
    </span>
  </div>

  <!-- Subject -->
  <div class="form-group">
    <label for="subject">Subject</label>
    <input
      id="subject"
      type="text"
      formControlName="subject"
      placeholder="Message subject"
    />
    <span class="error" *ngIf="submitted && messageForm.get('subject')?.hasError('required')">
      Subject is required
    </span>
  </div>

  <!-- Content -->
  <div class="form-group">
    <label for="content">Message</label>
    <textarea
      id="content"
      formControlName="content"
      rows="5"
      placeholder="Write your message here"
    ></textarea>
    <span class="error" *ngIf="submitted && messageForm.get('content')?.hasError('required')">
      Message content is required
    </span>
  </div>

  <button type="submit" class="btn-submit">
    Send Message
  </button>
</form>



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\message-form\message-form.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { MessageFormComponent } from './message-form.component';

describe('MessageFormComponent', () => {
  let component: MessageFormComponent;
  let fixture: ComponentFixture<MessageFormComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [MessageFormComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(MessageFormComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\public\landing\message-form\message-form.component.ts
===============================
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';
import { MessageDto } from '../../../models/message.model';
import { MessageService } from '../../../services/message.service';

@Component({
  selector: 'app-message-form',
  standalone: true,
  imports: [CommonModule, ReactiveFormsModule],
  templateUrl: './message-form.component.html',
  styleUrl: './message-form.component.css'
})
export class MessageFormComponent {

  messageForm: FormGroup;
  submitted = false;

  constructor(
    private formbuilder: FormBuilder,
    private messageService: MessageService
  ) {
    this.messageForm = this.formbuilder.group({
      fullName: ['', Validators.required],
      email: ['', [Validators.required, Validators.email]],
      phone: ['', Validators.required],
      subject: ['', Validators.required],
      content: ['', Validators.required],
    });
  }

  onSubmit(): void {
    this.submitted = true;

    if (this.messageForm.invalid) return;

    const dto: MessageDto = this.messageForm.value;
    this.messageService.sendMessage(dto);

    this.messageForm.reset();
    this.submitted = false;
    console.log("Message sent successfully")
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\services\algorithms.service.ts
===============================
import { AStarPathFindingResponse, CommunityDetectionResult, ConnectedComponentResponse, DijsktraPathFindingResponse, TopFiveNodeInDegreeResponse } from './../models/algorith.model';
import { Injectable } from '@angular/core';
import { environment } from '../../environments/environment';
import { Guid } from '../models/graph.model';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
import { BFSResponse, DFSResponse, DegreeCentralityResponse, WelshPowellResponse } from '../models/algorith.model';

@Injectable({
  providedIn: 'root'
})
export class AlgorithmsService {

  private BASE_URL : string = environment.apiUrl + 'analysis'

  private readonly BFS=(graphId: Guid)=>`${this.BASE_URL}/bfs/graphId=${graphId}`
  private readonly DFS=(graphId: Guid)=>`${this.BASE_URL}/dfs/graphId=${graphId}`
  private readonly DEGREE_CENTRALITY =(graphId : Guid)=> `${this.BASE_URL}/degree-centrality/graphId=${graphId}`
  private readonly TOP_FIVE =(graphId : Guid)=> `${this.BASE_URL}/top-five-node/graphId=${graphId}`
  private readonly COLORING =(graphId : Guid)=> `${this.BASE_URL}/coloring/graphId=${graphId}`
  private readonly COMPONENTS_DETECTION =(graphId: Guid) => `${this.BASE_URL}/connected-components/graphId=${graphId}`
  private readonly COMMUNITY_DETECTION =(graphId: Guid) => `${this.BASE_URL}/community-detection/graphId=${graphId}`
  private readonly ASTAR_PATH=(graphId:Guid)=>`${this.BASE_URL}/astar/graphId=${graphId}`
  private readonly DIKSTRA_PATH=(graphId:Guid)=>`${this.BASE_URL}/dijkstra/graphId=${graphId}`

  constructor(private http : HttpClient) { }

  runBFS(graphId : Guid, startNodeId: number) : Observable<BFSResponse>{
    console.log("BFS running:")
    const command = {
      graphId:graphId,
      startNodeId: startNodeId
    }
    return this.http.post<BFSResponse>(this.BFS(graphId),{command});
  }

  runDFS(graphId: Guid, startNodeId: number): Observable<DFSResponse> {
     const command = {
      graphId:graphId,
      startNodeId: startNodeId
    }
    return this.http.post<DFSResponse>(this.DFS(graphId), {command});
  }
  runWelshPowellColoring(graphId:Guid): Observable<WelshPowellResponse>{
    return this.http.get<WelshPowellResponse>(this.COLORING(graphId));
  }

  runDegreeCentrality(graphId: Guid): Observable<DegreeCentralityResponse> {
    return this.http.get<DegreeCentralityResponse>(
        this.DEGREE_CENTRALITY(graphId)
    );
  }

  getTopFiveNodeInDegree(graphId:Guid): Observable<TopFiveNodeInDegreeResponse>{
    return this.http.get<TopFiveNodeInDegreeResponse>(this.TOP_FIVE(graphId));
  }

  getConnectedComponents(graphId:Guid): Observable<ConnectedComponentResponse>{
    return this.http.get<ConnectedComponentResponse>(this.COMPONENTS_DETECTION(graphId));
  }
  runAStarPathFinding(graphId: Guid,startNodeId:number,targetNodeId:number): Observable<AStarPathFindingResponse>{
    const command ={
      graphId:graphId,
      startNodeId:startNodeId,
      targetNodeId:targetNodeId
    }
    return this.http.post<AStarPathFindingResponse>(this.ASTAR_PATH(graphId),{command})
  }
  runDijkstraPathFinding(graphId: Guid,startNodeId:number,targetNodeId:number): Observable<DijsktraPathFindingResponse>{
    const command ={
      graphId:graphId,
      startNodeId:startNodeId,
      targetNodeId:targetNodeId
    }
    return this.http.post<DijsktraPathFindingResponse>(this.DIKSTRA_PATH(graphId),{command})
  }

  runCommunityDetection(graphId:Guid):Observable<CommunityDetectionResult>{
    return this.http.get<CommunityDetectionResult>(this.COMMUNITY_DETECTION(graphId))
  }




}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\services\auth.service.ts
===============================
import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class AuthService {
  // KullanÄ±cÄ± giriÅ durumu
  private isLoggedInSubject = new BehaviorSubject<boolean>(false);
  public isLoggedIn$ = this.isLoggedInSubject.asObservable();

  // Mevcut kullanÄ±cÄ±
  private currentUserSubject = new BehaviorSubject<{name: string, email: string} | null>(null);
  public currentUser$ = this.currentUserSubject.asObservable();

  constructor() {
    // localStorage'dan durumu kontrol et
    const savedUser = localStorage.getItem('user');
    if (savedUser) {
      const user = JSON.parse(savedUser);
      this.currentUserSubject.next(user);
      this.isLoggedInSubject.next(true);
    }
  }

  // Login metodu
  login(email: string, password: string) {
    // Demo: gerÃ§ek backend kontrolÃ¼ olurdu
    if (email && password) {
      const user = { name: email.split('@')[0], email };
      localStorage.setItem('user', JSON.stringify(user));
      this.currentUserSubject.next(user);
      this.isLoggedInSubject.next(true);
      return true;
    }
    return false;
  }

  // Register metodu
  register(name: string, email: string, password: string) {
    // Demo: gerÃ§ek backend kontrolÃ¼ olurdu
    if (name && email && password) {
      const user = { name, email };
      localStorage.setItem('user', JSON.stringify(user));
      this.currentUserSubject.next(user);
      this.isLoggedInSubject.next(true);
      return true;
    }
    return false;
  }

  // Logout metodu
  logout() {
    localStorage.removeItem('user');
    this.currentUserSubject.next(null);
    this.isLoggedInSubject.next(false);
  }

  // Mevcut kullanÄ±cÄ± al
  getCurrentUser() {
    return this.currentUserSubject.value;
  }

  // GiriÅ durumu kontrol
  isLoggedIn() {
    return this.isLoggedInSubject.value;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\services\edges.service.ts
===============================
import { Injectable } from '@angular/core';
import { environment } from '../../environments/environment';
import { HttpClient } from '@angular/common/http';
import { AddEdgeDto, AddEdgeResponse, DeleteEdgeResponse, Edge } from '../models/edge.model';
import { Observable } from 'rxjs';
import { Guid } from '../models/graph.model';

@Injectable({
  providedIn: 'root'
})
export class EdgeApiService {

  private readonly BASE_URL = environment.apiUrl + 'graphs';
  // Edge endpoints
  private readonly POST_EDGE = (graphId: Guid) => `${this.BASE_URL}/${graphId}/edges`;
  private readonly DEL_EDGE = (graphId: Guid) => `${this.BASE_URL}/${graphId}/edges/delete`;

  constructor(private http: HttpClient) { }


    // Edge operations
  addEdgeToGraph(edgeDto: AddEdgeDto): Observable<AddEdgeResponse> {

     const edge={
        GraphId: edgeDto.graphId,
        NodeAId: edgeDto.nodeAId,
        NodeBId: edgeDto.nodeBId
      };
    return this.http.post<AddEdgeResponse>(
      this.POST_EDGE(edgeDto.graphId),
      {edge}
    );
  }

  deleteEdgeFromGraphByNodes(graphId: Guid, nodeAId: number, nodeBId: number): Observable<DeleteEdgeResponse> {
    // Backend expects MapDelete with body: { Edge: { GraphId, NodeAId, NodeBId } }
    const edge= {
      graphId: graphId,
      nodeAId: nodeAId,
      nodeBId: nodeBId
      };
      return this.http.post<DeleteEdgeResponse>(this.DEL_EDGE(graphId),{edge})
}
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\services\graph-color.service.ts
===============================
import { Injectable } from '@angular/core';

export interface NodeColorAssignment {
  nodeId: string;
  colorIndex: number;
}

export interface NodeColor {
  nodeId: string;
  colorIndex: number;
  color: string;
}

@Injectable({ providedIn: 'root' })
export class GraphColorService {
  // UI palette; extend or swap as needed.
  private readonly palette = [
    '#4f46e5', '#22c55e', '#f59e0b', '#ec4899', '#06b6d4',
    '#8b5cf6', '#ef4444', '#10b981', '#0ea5e9', '#f97316'
  ];

  colorForIndex(index: number): string {
    if (index < 0 || Number.isNaN(index)) return '#9ca3af';
    return this.palette[index % this.palette.length];
  }

  mapAssignments(assignments: NodeColorAssignment[]): NodeColor[] {
    return assignments.map(a => ({
      nodeId: a.nodeId,
      colorIndex: a.colorIndex,
      color: this.colorForIndex(a.colorIndex)
    }));
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\services\graphs.service.ts
===============================
import {EditGraphCommand, EditGraphRequest, EditGraphResponse, ExportGraphResponse, GetGraphSummaryResponse, GraphSnapshot, Guid, ImportGraphCommand, ImportGraphRequest, ImportGraphResponse } from './../models/graph.model';
import { Injectable } from '@angular/core';
import { environment } from '../../environments/environment';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
import {
  Graph,
  CreateGraphDto,
} from '../models/graph.model';

@Injectable({
  providedIn: 'root'
})
export class GraphsService {
  private readonly BASE_URL = environment.apiUrl + 'graphs'

  // Graph endpoints
  private readonly GET_ALL_GRAPHS = this.BASE_URL
  private readonly POST_GRAPH = this.BASE_URL
  private readonly GET_GRAPH = (graphId: Guid) => `${this.BASE_URL}/${graphId}`
  private readonly DEL_GRAPH = (graphId: Guid) => `${this.BASE_URL}/${graphId}`
  private readonly CLEAR_GRAPH = (graphId: Guid) => `${this.BASE_URL}/clear/${graphId}`
  private readonly IMPORT_GRAPH = this.BASE_URL + '/import'
  private readonly GET_SUMMARY = (graphId:Guid) => `${this.BASE_URL}/${graphId}/summary`
  private readonly EXPORT_GRAPH = (graphId:Guid) => `${this.BASE_URL}/${graphId}/export`
  private readonly PUT_GRAPH =(graphId:Guid) =>`${this.BASE_URL}/${graphId}`
  private readonly IMPORT_SNAPSHOT = this.BASE_URL + "/import-snapshot"




  constructor(private http: HttpClient) { }

  // Graph operations
  getAllGraphs(): Observable<{ graphs: Graph[] }> {
    return this.http.get<{ graphs: Graph[] }>(this.GET_ALL_GRAPHS);
  }

  createGraph(graphDto: CreateGraphDto): Observable<{ id: Guid; title: string }> {
    return this.http.post<{ id: Guid; title: string }>(this.POST_GRAPH, { graph: graphDto });
  }

  getGraph(graphId: Guid): Observable<{ graph: Graph }> {
    return this.http.get<{ graph: Graph }>(this.GET_GRAPH(graphId));
  }

  deleteGraph(graphId: Guid): Observable<void> {
    return this.http.delete<void>(this.DEL_GRAPH(graphId));
  }

  importGraph(command : ImportGraphCommand) : Observable<ImportGraphResponse>{
    const payload: ImportGraphRequest = {
      importGraph: command
    };
    return this.http.post<ImportGraphResponse>(this.IMPORT_GRAPH, payload)
  }

  importSnapshot(snapshot: GraphSnapshot) : Observable<Graph>{
    return this.http.post<Graph>(this.IMPORT_SNAPSHOT,snapshot);
  }

  exportGraph(graphId: Guid) : Observable<ExportGraphResponse>{
    return this.http.get<ExportGraphResponse>(this.EXPORT_GRAPH(graphId))
  }

  getGraphSummary(graphId: Guid) {
    return this.http.get<GetGraphSummaryResponse>(
      this.GET_SUMMARY(graphId)
    );
  }

  editGraph(graphId : Guid,graph: EditGraphCommand ) : Observable<EditGraphResponse>{
    const payload : EditGraphRequest ={
      graph : graph
    }
    return this.http.put<EditGraphResponse>(this.PUT_GRAPH(graphId),payload)
  }

  clearGraph(graphId:Guid):Observable<Graph>{
    return this.http.delete<Graph>(this.CLEAR_GRAPH(graphId))
  }


}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\services\message.service.ts
===============================
import { Injectable } from '@angular/core';
import { environment } from '../../environments/environment';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
import { Message, MessageDto } from '../models/message.model';

@Injectable({
  providedIn: 'root'
})
export class MessageService {
  private readonly POST_MESSAGE =environment.apiUrl +'messages';
  //private readonly PUT_MESSAGE = (messageId: number)=>{return environment.apiUrl + 'messages/' + messageId};
  private readonly DEL_MESSAGE = (messageId: number)=>{return environment.apiUrl + 'messages/' + messageId};
  private readonly GET_MESSAGES = environment.apiUrl + 'messages';
  private readonly GET_MESSAGE = (messageId: number) =>{return environment.apiUrl + 'messages/'+ messageId}

  constructor(private http : HttpClient) { }

  getAllMessages(): Observable<Message[]>{
    return this.http.get<Message[]>(this.GET_MESSAGES)
  }

  getMessage(messageId : number): Observable<Message>{
    return this.http.get<Message>(this.GET_MESSAGE(messageId));
  }

  sendMessage(message : MessageDto) {
    this.http.post(this.POST_MESSAGE, message)
            .subscribe()
  }

  deleteMessage(messageId : number){
    this.http.delete(this.DEL_MESSAGE(messageId))
              .subscribe()
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\services\nodes.service.ts
===============================
import { Injectable } from '@angular/core';
import { environment } from '../../environments/environment';
import { AddNodeDto, DeleteNodeRespose, EditNodeDto, Node } from '../models/node.model';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
import { Graph, Guid } from '../models/graph.model';

@Injectable({
  providedIn: 'root'
})
export class NodeApiService {
  private readonly BASE_URL = environment.apiUrl + 'graphs';


  private readonly POST_NODE = (graphId: Guid) => `${this.BASE_URL}/${graphId}/nodes`;
  private readonly PUT_NODE = (graphId: Guid, nodeId: number) => `${this.BASE_URL}/${graphId}/nodes/${nodeId}`;
  private readonly DEL_NODE = (graphId: Guid, nodeId: number) => `${this.BASE_URL}/${graphId}/nodes/${nodeId}`;
  constructor(private http : HttpClient) { }


    // Node operations
    addNodeToGraph(nodeDto: AddNodeDto): Observable<{ node: Node }> {
      // Backend expects AddNodeToGraphRequest { Node: AddNodeToGraphCommand }
      return this.http.post<{ node: Node }>(
        this.POST_NODE(nodeDto.graphId),
        { node: nodeDto }
      );
    }

    editNodeInGraph(graphId: Guid, nodeDto: EditNodeDto): Observable<{ node: Node }> {
      // Backend expects EditNodeInGraphRequest { Vertex: EditNodeInGraphCommand }

      const  vertex = {
          id: nodeDto.nodeId,
          graphId: graphId,
          tag: nodeDto.tag,
          activity: nodeDto.activity,
          interaction: nodeDto.interaction
        };
      return this.http.put<{ node: Node }>(
        this.PUT_NODE(graphId, nodeDto.nodeId),
        {vertex}
      );
    }

    deleteNodeFromGraph(graphId: Guid, nodeId: number): Observable<DeleteNodeRespose> {
      return this.http.delete<DeleteNodeRespose>(this.DEL_NODE(graphId, nodeId));
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\services\theme.service.ts
===============================
import { Injectable } from '@angular/core';
import { BehaviorSubject, Observable } from 'rxjs';

type Theme = 'light' | 'dark';

@Injectable({
  providedIn: 'root'
})
export class ThemeService {
  private themeSubject = new BehaviorSubject<Theme>(this.getInitialTheme());
  theme$ = this.themeSubject.asObservable();

  constructor() {
    this.applyTheme(this.themeSubject.value);
  }

  private getInitialTheme(): Theme {
    const savedTheme = localStorage.getItem('app-theme') as Theme | null;
    if (savedTheme) {
      return savedTheme;
    }
    // Sistem tercihine gÃ¶re otomatik ayarla
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark';
    }
    return 'light';
  }

  getCurrentTheme(): Theme {
    return this.themeSubject.value;
  }

  setTheme(theme: Theme): void {
    this.themeSubject.next(theme);
    localStorage.setItem('app-theme', theme);
    this.applyTheme(theme);
  }

  toggleTheme(): void {
    const newTheme = this.getCurrentTheme() === 'light' ? 'dark' : 'light';
    this.setTheme(newTheme);
  }

  private applyTheme(theme: Theme): void {
    const html = document.documentElement;
    if (theme === 'dark') {
      html.setAttribute('data-theme', 'dark');
    } else {
      html.removeAttribute('data-theme');
    }
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\User-Interface-module.ts
===============================
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';



@NgModule({
  declarations: [],
  imports: [
    CommonModule
  ]
})
export class UserInterfaceModule { }


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\main-content.component.css
===============================
.main-content-wrapper {
  width: 100%;
  height: 100%;
  /*background: var(--bg-secondary, transparent);*/
  color: var(--text-primary, #2c3e50);
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\main-content.component.html
===============================
<div class="main-content-wrapper">
  <router-outlet></router-outlet>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\main-content.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { MainContentComponent } from './main-content.component';

describe('MainContentComponent', () => {
  let component: MainContentComponent;
  let fixture: ComponentFixture<MainContentComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [MainContentComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(MainContentComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\main-content.component.ts
===============================
import { Component } from '@angular/core';
import { RouterOutlet } from '@angular/router';

@Component({
  selector: 'app-main-content',
  standalone: true,
  imports: [RouterOutlet],
  templateUrl: './main-content.component.html',
  styleUrl: './main-content.component.css'
})
export class MainContentComponent {

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\dashboard\dashboard.component.css
===============================
.dashboard {
  width: 100%;
  height: 100%;
}

.dashboard-header {
  margin-bottom: 30px;
}

.dashboard-header h1 {
  margin: 16px;
  color: var(--text-primary, #2c3e50);
  font-size: 28px;
  font-weight: 700;
}

.dashboard-header p {
  margin: 16px;
  color: var(--text-secondary, #7f8c8d);
  font-size: 14px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.stat-card {
  background: var(--bg-primary, white);
  padding: 24px;
  border-radius: 10px;
  box-shadow: var(--shadow, 0 2px 8px rgba(0, 0, 0, 0.08));
  display: flex;
  align-items: center;
  gap: 16px;
  border-left: 4px solid;
  transition: all 0.3s ease;
  border: 1px solid var(--border-color, transparent);
}

.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

/* Dark theme iÃ§in hover shadow */
[data-theme="dark"] .stat-card:hover {
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.6);
}

.stat-icon {
  font-size: 42px;
  line-height: 1;
}

.stat-content h3 {
  margin: 0 0 4px 0;
  font-size: 32px;
  font-weight: 700;
  color: var(--text-primary, #2c3e50);
}

.stat-content p {
  margin: 0;
  color: var(--text-secondary, #7f8c8d);
  font-size: 13px;
  font-weight: 500;
}

.content-grid {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 20px;
}

.recent-activity,
.quick-actions {
  background: var(--bg-primary, white);
  padding: 24px;
  border-radius: 10px;
  box-shadow: var(--shadow, 0 2px 8px rgba(0, 0, 0, 0.08));
  border: 1px solid var(--border-color, transparent);
}

.recent-activity h2,
.quick-actions h2 {
  margin: 0 0 20px 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary, #2c3e50);
}

.activity-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.activity-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px;
  border-radius: 6px;
  transition: background 0.2s;
}

.activity-item:hover {
  background: var(--bg-secondary, #f8f9fa);
}

.activity-dot {
  width: 10px;
  height: 10px;
  background: #3498db;
  border-radius: 50%;
  margin-top: 6px;
  flex-shrink: 0;
}

.activity-content {
  flex: 1;
}

.activity-action {
  margin: 0 0 4px 0;
  color: var(--text-primary, #2c3e50);
  font-size: 14px;
  font-weight: 600;
}

.activity-node {
  margin: 0;
  color: var(--text-secondary, #7f8c8d);
  font-size: 12px;
}

.activity-time {
  color: var(--text-secondary, #95a5a6);
  font-size: 12px;
  white-space: nowrap;
}

.actions-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: var(--bg-primary, white);
  border: 2px solid var(--border-color, #ecf0f1);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary, #2c3e50);
  text-align: left;
}

.action-btn:hover {
  background: #3498db;
  color: white;
  border-color: #3498db;
  transform: translateX(4px);
}

.action-icon {
  font-size: 20px;
  line-height: 1;
}

@media (max-width: 1024px) {
  .content-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: 1fr;
  }

  .dashboard-header h1 {
    font-size: 24px;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\dashboard\dashboard.component.html
===============================
<div class="dashboard">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <p>Sosyal AÄ Analizi - Genel BakÄ±Å</p>
  </div>

  <div class="stats-grid">
    <div class="stat-card" *ngFor="let stat of stats" [style.border-left-color]="stat.color">
      <div class="stat-icon">{{ stat.icon }}</div>
      <div class="stat-content">
        <h3>{{ stat.value }}</h3>
        <p>{{ stat.title }}</p>
      </div>
    </div>
  </div>

  <div class="content-grid">
    <div class="recent-activity">
      <h2>Son Aktiviteler</h2>
      <div class="activity-list">
        <div class="activity-item" *ngFor="let activity of recentActivities">
          <div class="activity-dot"></div>
          <div class="activity-content">
            <p class="activity-action">{{ activity.action }}</p>
            <p class="activity-node">{{ activity.node }}</p>
          </div>
          <span class="activity-time">{{ activity.time }}</span>
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <h2>HÄ±zlÄ± EriÅim</h2>
      <div class="actions-list">
        <button class="action-btn">
          <span class="action-icon">â</span>
          <span>Yeni DÃ¼ÄÃ¼m Ekle</span>
        </button>
        <button class="action-btn">
          <span class="action-icon">ð</span>
          <span>Kenar OluÅtur</span>
        </button>
        <button class="action-btn">
          <span class="action-icon">â¶ï¸</span>
          <span>Algoritma ÃalÄ±ÅtÄ±r</span>
        </button>
        <button class="action-btn">
          <span class="action-icon">ð¾</span>
          <span>GrafiÄi Kaydet</span>
        </button>
      </div>
    </div>
  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\dashboard\dashboard.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { DashboardComponent } from './dashboard.component';

describe('DashboardComponent', () => {
  let component: DashboardComponent;
  let fixture: ComponentFixture<DashboardComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [DashboardComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(DashboardComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\dashboard\dashboard.component.ts
===============================
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';

@Component({
  selector: 'app-dashboard',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './dashboard.component.html',
  styleUrl: './dashboard.component.css'
})
export class DashboardComponent {
  stats = [
    { title: 'Toplam DÃ¼ÄÃ¼m', value: 125, icon: 'ðµ', color: '#3498db' },
    { title: 'Toplam Kenar', value: 243, icon: 'ð', color: '#2ecc71' },
    { title: 'BaÄlantÄ± SayÄ±sÄ±', value: 18, icon: 'ð', color: '#e74c3c' },
    { title: 'Ortalama Derece', value: 3.9, icon: 'ð', color: '#f39c12' }
  ];

  recentActivities = [
    { action: 'Yeni dÃ¼ÄÃ¼m eklendi', node: 'Node-45', time: '5 dk Ã¶nce' },
    { action: 'Kenar gÃ¼ncellendi', node: 'Edge-12', time: '12 dk Ã¶nce' },
    { action: 'Algoritma Ã§alÄ±ÅtÄ±rÄ±ldÄ±', node: 'BFS', time: '25 dk Ã¶nce' },
    { action: 'Graf kaydedildi', node: 'Graph-1', time: '1 saat Ã¶nce' }
  ];
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\graphlarim\graphlarim.component.css
===============================
* {
  box-sizing: border-box;
}

.graphlarim-page {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.page-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.eyebrow {
  margin: 16px;
  font-size: 12px;
  letter-spacing: 0.5px;
  color: var(--text-secondary);
  text-transform: uppercase;
}

.page-header h2 {
  margin: 16px;
  color: var(--text-primary);
  font-size: 22px;
}

.header-actions {
  display: flex;
  gap: 10px;
}

.info-banner {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px 14px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 12px;
}

.info-text {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: var(--text-primary);
  font-weight: 600;
  font-size: 15px;
}

.dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  display: inline-block;
}

.dot.created { background: #3cb371; }
.dot.import { background: #8e44ad; }

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 16px;
}

.card {
  background: var(--bg-primary);
  border-radius: 14px;
  border: 1px solid var(--border-color);
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  box-shadow: var(--shadow);
  transition: box-shadow 0.2s ease;
}

.card-header {
  display: flex;
  justify-content: space-between;
  gap: 12px;
}

.title-group h3 {
  margin: 4px 0 4px;
  color: var(--text-primary);
}

.title-group .muted {
  margin: 0;
  color: var(--text-secondary);
  font-size: 14px;
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
  color: #fff;
}

.pill.created { background: #3cb371; }
.pill.import { background: #8e44ad; }

.meta {
  color: var(--text-secondary);
  font-size: 12px;
  white-space: nowrap;
}

.card-body {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

.stat {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  padding: 10px;
}

.label {
  display: block;
  color: var(--text-secondary);
  font-size: 12px;
}

.value {
  display: block;
  color: var(--text-primary);
  font-weight: 700;
  margin-top: 4px;
}

.tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tag {
  background: var(--bg-secondary);
  color: var(--text-primary);
  padding: 6px 10px;
  border-radius: 10px;
  font-weight: 600;
  font-size: 12px;
}

.card-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.btn {
  border: none;
  border-radius: 10px;
  padding: 10px 14px;
  font-weight: 700;
  cursor: pointer;
  background: var(--text-primary);
  color: var(--bg-primary);
  transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.2s;
}

.btn:hover { transform: translateY(-1px); box-shadow: var(--shadow); }
.btn:active { transform: translateY(0); box-shadow: none; }

.btn.primary { background: var(--text-primary); color: var(--bg-primary); }
.btn.ghost { background: var(--bg-secondary); color: var(--text-primary); }
.btn.danger { background: #c0392b; color: #fff; }
.btn.danger.ghost { background: var(--bg-secondary); color: #c0392b; border: 1px solid var(--border-color); }

@media (max-width: 768px) {
  .page-header { flex-direction: column; align-items: flex-start; }
  .card-body { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .card-actions { flex-wrap: wrap; justify-content: flex-start; }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\graphlarim\graphlarim.component.html
===============================
<div class="graphlarim-page">
  <div class="page-header">
    <div>
      <p class="eyebrow">Kayitli ve ice aktarÄ±lan graph koleksiyonu</p>
      <h2>Graphlarim</h2>
    </div>
    <div class="header-actions">
      <button class="btn ghost">Filtrele</button>
      <button class="btn primary">Yeni graph yukle</button>
    </div>
  </div>

  <div class="info-banner">
    <div class="info-text">
      <span class="dot created"></span>
      <span>Olusturdugunuz graphlar</span>
    </div>
    <div class="info-text">
      <span class="dot import"></span>
      <span>Iceri aktardiginiz graphlar</span>
    </div>
  </div>

  <div class="grid">
    <div class="card" *ngFor="let graph of graphs">
      <div class="card-header">
        <div class="title-group">
          <span class="pill" [class.created]="graph.source === 'created'" [class.import]="graph.source === 'import'">
            {{ graph.source === 'created' ? 'Olusturuldu' : 'Iceri aktarÄ±ldÄ±' }}
          </span>
          <h3>{{ graph.title }}</h3>
          <p class="muted">{{ graph.description }}</p>
        </div>
        <div class="meta">{{ graph.updatedAt }}</div>
      </div>

      <div class="card-body">
        <div class="stat">
          <span class="label">Dugum</span>
          <span class="value">{{ graph.nodes }}</span>
        </div>
        <div class="stat">
          <span class="label">Kenar</span>
          <span class="value">{{ graph.edges }}</span>
        </div>
        <div class="stat">
          <span class="label">Sahip</span>
          <span class="value">{{ graph.owner }}</span>
        </div>
      </div>

      <div class="tags">
        <span class="tag" *ngFor="let tag of graph.tags">{{ tag }}</span>
      </div>

      <div class="card-actions">
        <button class="btn ghost">Goruntule</button>
        <button class="btn">Analize ac</button>
        <button class="btn danger ghost">Sil</button>
      </div>
    </div>
  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\graphlarim\graphlarim.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { GraphlarimComponent } from './graphlarim.component';

describe('GraphlarimComponent', () => {
  let component: GraphlarimComponent;
  let fixture: ComponentFixture<GraphlarimComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [GraphlarimComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(GraphlarimComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\graphlarim\graphlarim.component.ts
===============================
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';

type GraphItem = {
  title: string;
  description: string;
  nodes: number;
  edges: number;
  updatedAt: string;
  owner: string;
  source: 'import' | 'created';
  tags: string[];
};

@Component({
  selector: 'app-graphlarim',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './graphlarim.component.html',
  styleUrl: './graphlarim.component.css'
})
export class GraphlarimComponent {
  graphs: GraphItem[] = [
    {
      title: 'Organization Network',
      description: 'Employee relations and cross-department interactions.',
      nodes: 142,
      edges: 380,
      updatedAt: 'Today 10:35',
      owner: 'You',
      source: 'created',
      tags: ['HR', 'SNA', 'Internal']
    },
    {
      title: 'Community Map',
      description: 'Imported social media interactions.',
      nodes: 890,
      edges: 2340,
      updatedAt: 'Yesterday 17:20',
      owner: 'External Source',
      source: 'import',
      tags: ['Import', 'Social', 'Analysis']
    },
    {
      title: 'Supply Chain',
      description: 'Supplier and reseller network risk analysis.',
      nodes: 265,
      edges: 612,
      updatedAt: '3 days ago',
      owner: 'You',
      source: 'created',
      tags: ['Logistics', 'Risk']
    }
  ];
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\settings\settings.component.css
===============================
.settings-page {
  padding: 40px 20px;
  background: var(--bg-secondary, #f7f8fb);
  min-height: 100vh;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

.settings-header {
  text-align: center;
  margin-bottom: 50px;
}

.settings-header h1 {
  font-size: 36px;
  color: var(--text-primary, #2c3e50);
  margin-bottom: 10px;
  font-weight: 700;
}

.settings-header p {
  font-size: 16px;
  color: var(--text-secondary, #7f8c8d);
}

.settings-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 28px;
}

.settings-card {
  background: var(--bg-primary, #fff);
  padding: 32px;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  transition: transform 0.2s, box-shadow 0.2s;
}

.settings-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
}

.card-header {
  margin-bottom: 24px;
  border-bottom: 2px solid var(--border-color, #e8e9eb);
  padding-bottom: 16px;
}

.card-header h2 {
  font-size: 20px;
  color: var(--text-primary, #2c3e50);
  margin-bottom: 8px;
  font-weight: 600;
}

.card-header p {
  font-size: 14px;
  color: var(--text-secondary, #7f8c8d);
}

.theme-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 24px;
}

.theme-button {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  border: 2px solid var(--border-color, #e8e9eb);
  border-radius: 10px;
  background: var(--bg-primary, #fff);
  cursor: pointer;
  transition: all 0.3s ease;
  gap: 8px;
}

.theme-button:hover {
  border-color: #667eea;
  background: var(--bg-hover, #f5f7ff);
}

.theme-button.active {
  border-color: #667eea;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
}

.theme-button .icon {
  font-size: 28px;
}

.theme-button .label {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary, #2c3e50);
}

.theme-button .description {
  font-size: 12px;
  color: var(--text-secondary, #7f8c8d);
  text-align: center;
}

.current-theme {
  padding: 16px;
  background: var(--bg-secondary, #f7f8fb);
  border-radius: 8px;
  text-align: center;
}

.current-theme p {
  margin: 0;
  font-size: 14px;
  color: var(--text-secondary, #7f8c8d);
}

.current-theme strong {
  color: #667eea;
  font-weight: 600;
}

.coming-soon {
  padding: 40px 20px;
  text-align: center;
  color: var(--text-secondary, #7f8c8d);
  background: var(--bg-secondary, #f7f8fb);
  border-radius: 8px;
  font-size: 14px;
}

@media (max-width: 768px) {
  .settings-grid {
    grid-template-columns: 1fr;
  }

  .theme-options {
    grid-template-columns: 1fr;
  }

  .settings-header h1 {
    font-size: 28px;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\settings\settings.component.html
===============================
<div class="settings-page">
  <div class="container">
    <div class="settings-header">
      <h1>âï¸ Ayarlar</h1>
      <p>UygulamayÄ± kiÅiselleÅtir</p>
    </div>

    <div class="settings-grid">
      <div class="settings-card">
        <div class="card-header">
          <h2>ð¨ Tema SeÃ§imi</h2>
          <p>ArayÃ¼z temasÄ±nÄ± seÃ§</p>
        </div>

        <div class="theme-options">
          <button
            class="theme-button"
            [class.active]="currentTheme === 'light'"
            (click)="setTheme('light')"
          >
            <span class="icon">âï¸</span>
            <span class="label">AÃ§Ä±k Tema</span>
            <span class="description">AÃ§Ä±k, temiz ve okunaklÄ±</span>
          </button>

          <button
            class="theme-button"
            [class.active]="currentTheme === 'dark'"
            (click)="setTheme('dark')"
          >
            <span class="icon">ð</span>
            <span class="label">Koyu Tema</span>
            <span class="description">GÃ¶zleri koruyan, enerji tasarrufu</span>
          </button>
        </div>

        <div class="current-theme">
          <p>Aktif Tema: <strong>{{ currentTheme === 'light' ? 'AÃ§Ä±k' : 'Koyu' }}</strong></p>
        </div>
      </div>

      <div class="settings-card">
        <div class="card-header">
          <h2>ð Bildirimler</h2>
          <p>Bildirim tercihlerini yÃ¶net</p>
        </div>
        <div class="coming-soon">
          <p>YakÄ±nda...</p>
        </div>
      </div>

      <div class="settings-card">
        <div class="card-header">
          <h2>ð¤ Profil</h2>
          <p>Profil bilgilerini gÃ¼ncelle</p>
        </div>
        <div class="coming-soon">
          <p>YakÄ±nda...</p>
        </div>
      </div>

      <div class="settings-card">
        <div class="card-header">
          <h2>ð Gizlilik & GÃ¼venlik</h2>
          <p>Hesap gÃ¼venliÄini yÃ¶net</p>
        </div>
        <div class="coming-soon">
          <p>YakÄ±nda...</p>
        </div>
      </div>
    </div>
  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\settings\settings.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { SettingsComponent } from './settings.component';

describe('SettingsComponent', () => {
  let component: SettingsComponent;
  let fixture: ComponentFixture<SettingsComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [SettingsComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(SettingsComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-content\settings\settings.component.ts
===============================
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ThemeService } from '../../../services/theme.service';

type Theme = 'light' | 'dark';

@Component({
  selector: 'app-settings',
  imports: [CommonModule],
  templateUrl: './settings.component.html',
  styleUrl: './settings.component.css'
})
export class SettingsComponent implements OnInit {
  currentTheme: Theme = 'light';

  constructor(private themeService: ThemeService) {}

  ngOnInit(): void {
    this.currentTheme = this.themeService.getCurrentTheme();
  }

  setTheme(theme: Theme): void {
    this.themeService.setTheme(theme);
    this.currentTheme = theme;
  }

  toggleTheme(): void {
    this.themeService.toggleTheme();
    this.currentTheme = this.themeService.getCurrentTheme();
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\main-layout.component.css
===============================
.app-layout {
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
  background: var(--bg-secondary, #e6eaef);
  padding-top: 60px; /* Offset for the fixed header */
  transition: background-color 0.3s ease;
}

.content-row {
  display: flex;
  flex: 1;
  min-height: 0;
  padding: 0px;
  gap: 16px;
}

.main-content {
  flex: 1;
  overflow: auto;
  background: var(--bg-secondary, #ecf0f1);
  border-radius: 18px;
  box-shadow: var(--shadow, 0 4px 16px rgba(0, 0, 0, 0.06));
  min-height: 0;
}

@media (max-width: 768px) {
  .content-row {
    flex-direction: column;
    padding: 12px;
    gap: 12px;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\main-layout.component.html
===============================
<div class="app-layout">
  <app-header></app-header>
  <div class="content-row">
    <app-sidebar></app-sidebar>
    <main class="main-content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\main-layout.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { MainLayoutComponent } from './main-layout.component';

describe('MainLayoutComponent', () => {
  let component: MainLayoutComponent;
  let fixture: ComponentFixture<MainLayoutComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [MainLayoutComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(MainLayoutComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\main-layout.component.ts
===============================
import { Component } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import { Header } from './header/header';
import { Sidebar } from './sidebar/sidebar';

@Component({
  selector: 'app-main-layout',
  standalone: true,
  imports: [RouterOutlet, Header, Sidebar],
  templateUrl: './main-layout.component.html',
  styleUrl: './main-layout.component.css'
})
export class MainLayoutComponent {}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\header\header.css
===============================
.header {
  background: linear-gradient(135deg, #2c3e50 0%, #3b8ada 100%);
  color: white;
  height: 60px;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 200;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  margin: 0;
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 100%;
  padding: 0 20px;
}

.logo-section {
  display: flex;
  align-items: center;
  height: 100%;
  flex: 1;
}

.logo h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: #3498db;
  letter-spacing: 0.5px;
}

.profile-section {
  position: relative;
  display: flex;
  align-items: center;
}

.profile-dropdown {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  padding: 8px 15px;
  border-radius: 6px;
  transition: all 0.3s ease;
  user-select: none;
}

.profile-dropdown:hover {
  background: rgba(52, 152, 219, 0.2);
}

.profile-icon {
  font-size: 20px;
}

.profile-name {
  font-weight: 600;
  font-size: 14px;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.dropdown-arrow {
  font-size: 12px;
  transition: transform 0.3s ease;
}

.profile-dropdown:hover .dropdown-arrow {
  transform: scaleY(-1);
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 10px;
  background: var(--bg-primary, white);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  min-width: 220px;
  overflow: hidden;
  z-index: 1000;
}

.dropdown-header {
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color, #ecf0f1);
  background: var(--bg-secondary, #f8f9fa);
}

.user-name {
  margin: 0;
  font-weight: 700;
  color: var(--text-primary, #2c3e50);
  font-size: 14px;
}

.user-email {
  margin: 4px 0 0 0;
  color: var(--text-secondary, #7f8c8d);
  font-size: 12px;
}

.dropdown-item {
  display: block;
  padding: 12px 16px;
  color: var(--text-primary, #2c3e50);
  text-decoration: none;
  transition: all 0.2s ease;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  border: none;
  background: none;
  width: 100%;
  text-align: left;
}

.dropdown-item:hover {
  background: var(--bg-hover, #ecf0f1);
  padding-left: 20px;
}

.logout-item:hover {
  background: #fee;
  color: #c33;
}

.dropdown-divider {
  height: 1px;
  background: var(--border-color, #ecf0f1);
  margin: 8px 0;
}

@media (max-width: 768px) {
  .profile-name {
    max-width: 80px;
    font-size: 13px;
  }

  .dropdown-menu {
    min-width: 180px;
  }

  .logo h2 {
    font-size: 16px;
  }

  .dropdown-item {
    padding: 10px 14px;
    font-size: 13px;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\header\header.html
===============================
<header class="header">
  <div class="header-content">
    <div class="logo-section">
      <div class="logo">
        <h2>ð SNA UygulamasÄ±</h2>
      </div>
    </div>
    <div class="profile-section">
      <div class="profile-dropdown" (click)="toggleDropdown()">
        <span class="profile-icon">ð¤</span>
        <span class="profile-name">{{ isLoggedIn && currentUser ? currentUser.name : 'MenÃ¼' }}</span>
        <span class="dropdown-arrow">â¼</span>
      </div>
      @if (isDropdownOpen) {
        <div class="dropdown-menu">
          @if (isLoggedIn && currentUser) {
            <div class="dropdown-header">
              <p class="user-name">{{ currentUser.name }}</p>
              <p class="user-email">{{ currentUser.email }}</p>
            </div>
            <a routerLink="/" class="dropdown-item">ð  Ana Sayfaya DÃ¶n</a>
            <a routerLink="/User-Interface/settings" class="dropdown-item">âï¸ Ayarlar</a>
            <div class="dropdown-divider"></div>
            <a (click)="logout()" class="dropdown-item logout-item">ðª ÃÄ±kÄ±Å Yap</a>
          } @else {
            <a routerLink="/login" class="dropdown-item">ð GiriÅ Yap</a>
            <a routerLink="/register" class="dropdown-item">ð Kaydol</a>
          }
        </div>
      }
    </div>
  </div>
</header>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\header\header.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { Header } from './header';

describe('Header', () => {
  let component: Header;
  let fixture: ComponentFixture<Header>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [Header]
    })
    .compileComponents();

    fixture = TestBed.createComponent(Header);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\header\header.ts
===============================
import { Component, OnInit } from '@angular/core';
import { Router, RouterLink } from '@angular/router';
import { CommonModule } from '@angular/common';
import { AuthService } from '../../../services/auth.service';

@Component({
  selector: 'app-header',
  standalone: true,
  imports: [RouterLink, CommonModule],
  templateUrl: './header.html',
  styleUrl: './header.css',
})
export class Header implements OnInit {
  isDropdownOpen = false;
  isLoggedIn = false;
  currentUser: { name: string; email: string } | null = null;

  constructor(
    private authService: AuthService,
    private router: Router
  ) {}

  ngOnInit() {
    this.authService.isLoggedIn$.subscribe(status => {
      this.isLoggedIn = status;
    });

    this.authService.currentUser$.subscribe(user => {
      this.currentUser = user;
    });
  }

  toggleDropdown() {
    this.isDropdownOpen = !this.isDropdownOpen;
  }

  logout() {
    this.authService.logout();
    this.isDropdownOpen = false;
    this.router.navigate(['/login']);
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\sidebar\sidebar.css
===============================
.sidebar {
  width: 250px;
  background: var(--bg-primary, #3d0b69);
  color: var(--text-primary, white);
  height: calc(100vh - 60px - 32px);
  overflow: auto;
  box-shadow: var(--shadow, 0 6px 18px rgba(0, 0, 0, 0.15));
  border-right:1px solid var(--border-color, transparent);
}

/* Light theme iÃ§in mor renk */
:root .sidebar {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* Dark theme iÃ§in koyu sidebar */
[data-theme="dark"] .sidebar {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
}

.sidebar-nav {
  padding: 20px 0;
}

.nav-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.nav-item {
  margin-bottom: 5px;
}

.nav-link {
  display: flex;
  align-items: center;
  padding: 12px 20px;
  margin: 0 10px;
  color: var(--text-primary, #ecf0f1);
  text-decoration: none;
  transition: background 0.3s;
  border-radius: 12px;
}

.nav-link:hover {
  background: var(--bg-hover, rgba(255, 255, 255, 0.1));
}

.nav-link.active {
  background: var(--bg-hover, rgba(255, 255, 255, 0.15));
  border-left: 4px solid #3498db;
}

/* Light theme iÃ§in beyaz aktif link */
:root .nav-link.active {
  background: rgba(255, 255, 255, 0.2);
  color: white;
}

/* Dark theme iÃ§in daha belirgin aktif link */
[data-theme="dark"] .nav-link.active {
  background: var(--bg-hover);
  border-left: 4px solid #3498db;
  color: var(--text-primary);
}

.icon {
  margin-right: 10px;
  font-size: 1.2rem;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\sidebar\sidebar.html
===============================
<aside class="sidebar">
  <nav class="sidebar-nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a routerLink="/User-Interface/dashboard" routerLinkActive="active" class="nav-link">
          <span class="icon">ð</span>
          <span>Dashboard</span>
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/User-Interface/graphlarim" routerLinkActive="active" class="nav-link">
          <span class="icon">ð</span>
          <span>Graphlarim</span>
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/Workspace" routerLinkActive="active" class="nav-link">
          <span class="icon">ð ï¸</span>
          <span>Workspace</span>
        </a>
      </li>      
    </ul>
  </nav>
</aside>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\sidebar\sidebar.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { Sidebar } from './sidebar';

describe('Sidebar', () => {
  let component: Sidebar;
  let fixture: ComponentFixture<Sidebar>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [Sidebar]
    })
    .compileComponents();

    fixture = TestBed.createComponent(Sidebar);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\User-Interface\main-layout\sidebar\sidebar.ts
===============================
import { Component } from '@angular/core';
import { RouterLink, RouterLinkActive } from '@angular/router';
import { CommonModule } from '@angular/common';

@Component({
  selector: 'app-sidebar',
  standalone: true,
  imports: [RouterLink, RouterLinkActive, CommonModule],
  templateUrl: './sidebar.html',
  styleUrl: './sidebar.css',
})
export class Sidebar {

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\workspace.component.css
===============================
.workspace-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background-color: #f5f5f5;
}

.workspace-content {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.workspace-main {
  flex: 1;
  position: relative;
  background-color: #fafafa;
  overflow: hidden;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\workspace.component.html
===============================
<div class="workspace-container">
  <app-header [activeTab]="activeTab" (tabChange)="onTabChange($event)" [isgraphCreated]="graphCreated" (reset)="onResetRequested()"></app-header>

  <app-schema-creation
    *ngIf="!graphCreated"
    (graphCreated)="onGraphCreated($event)">
  </app-schema-creation>
  <div class="workspace-content" *ngIf="graphCreated">
    <app-sidebar></app-sidebar>


    <main class="workspace-main">
      <app-graph-view *ngIf="activeTab === 'graph'" ></app-graph-view>
      <app-data-view *ngIf="activeTab === 'data'"></app-data-view>
      <app-algorithm-result *ngIf="activeTab==='algorithmResult'"></app-algorithm-result>
    </main>
  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\workspace.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';
import { WorkspaceComponent } from './workspace.component';


describe('WorkspaceComponent', () => {
  let component: WorkspaceComponent;
  let fixture: ComponentFixture<WorkspaceComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [WorkspaceComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(WorkspaceComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\workspace.component.ts
===============================
import { Component, OnInit, OnDestroy } from '@angular/core';
import { CommonModule } from '@angular/common';
import { HeaderComponent } from './header/header.component';
import { GraphViewComponent } from './graph-view/graph-view.component';
import { SchemaCreationComponent } from './schema-creation/schema-creation.component';
import { DataViewComponent } from './data-view/data-view.component';
import { GraphStateService } from '../core/services/graph.service';
import { Guid } from '../models/graph.model';
import { Subject } from 'rxjs';
import { SidebarComponent } from './sidebar/sidebar.component';
import { AlgorithmResultComponent } from "./algorithm-result/algorithm-result.component";



@Component({
  selector: 'app-workspace',
  imports: [CommonModule, HeaderComponent, GraphViewComponent, SchemaCreationComponent,
    DataViewComponent, SidebarComponent, AlgorithmResultComponent],
  templateUrl: './workspace.component.html',
  styleUrl: './workspace.component.css'
})
export class WorkspaceComponent implements OnInit, OnDestroy  {


  activeTab: 'graph' | 'data'| 'algorithmResult' = 'graph';

  graphCreated = false;
  currentGraphId?: Guid;

  private destroy$ = new Subject<void>()
  constructor(private graphStateService: GraphStateService){
    console.log(`Workspace initiated. GraphCreate value: ${this.graphCreated}`);
  }

  ngOnInit(): void {
    this.graphStateService.loadCurrentGraphFromStorage();

    this.graphStateService.currentGraph$.subscribe(graph=>{
      if(!graph){
        this.graphCreated=false;
        this.currentGraphId=undefined
        return;
      }
      this.graphCreated=true;
      this.currentGraphId=graph.id;
    })

  }

  ngOnDestroy(): void {
    this.destroy$.next();
    this.destroy$.complete();
  }

  onGraphCreated(graphId: Guid) {
    console.log('â Graph created with ID:', graphId);
    this.graphCreated = true;
    this.currentGraphId = graphId;
  }

  onResetRequested() {
    this.graphStateService.clearCurrentGraph();
    this.graphCreated = false;
    this.activeTab = 'graph';
  }



  onTabChange(tab: 'graph' | 'data' | 'algorithmResult') {
    this.activeTab = tab;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\workspace.module.ts
===============================
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';



@NgModule({
  declarations: [],
  imports: [
    CommonModule
  ]
})
export class WorkspaceModule { }


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\algorithm-result\algorithm-result.component.css
===============================
.algorithm-panel {
  padding: 12px;
  color: #1b1a1a;
  height: 100%;
  overflow-y: auto;
}

h3 {
  margin-bottom: 12px;
  font-size: 16px;
  font-weight: 600;
}

.empty {
  opacity: 0.6;
  font-style: italic;
}

.result-card {
  background: #e8e8e8;
  border-radius: 8px;
  padding: 10px;
  margin-bottom: 12px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
}

/* Header */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.name {
  font-weight: 600;
}

.execution-time {
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 10px;
  background: #d0d0d0;
  color: #333;
}

.date {
  font-size: 12px;
  opacity: 0.6;
}

/* Sections */
.section {
  margin-top: 8px;
}

.section-title {
  font-size: 13px;
  opacity: 0.7;
  margin-bottom: 4px;
}

table {
  width: 100%;
  font-size: 12px;
}

td {
  padding: 2px 0;
}

/* Colors */
.color-list {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.color-dot {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  border: 1px solid #000;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\algorithm-result\algorithm-result.component.html
===============================
<div class="algorithm-panel">
  <h3 class="text-center">Algorithm Results</h3>

  <div *ngIf="!algorithmResults?.length" class="empty">
    No algorithm results yet.
  </div>

  <div
    class="result-card"
    *ngFor="let res of algorithmResults">

    <!-- Header -->
    <div class="header">
      <div class="header-left">
        <span class="name">{{ res.algorithm }}</span>
        <span class="execution-time">
          {{ res.result.executionTime }} ms
        </span>
      </div>

      <span class="date">
        {{ res.createdAt | date:'short' }}
      </span>
    </div>

    <!-- Parameters -->
    <div class="section">
      <div class="section-title">Parameters</div>
      <table>
        <tr *ngFor="let key of res.parameters | keyvalue">
          <td>{{ key.key }}</td>
          <td class="text-info">{{ key.value }}</td>
        </tr>
      </table>
    </div>

    <!-- Colors -->
    <div class="section" *ngIf="res.result.colors">
      <div class="section-title">Colors</div>
      <div class="color-list">
        <div class="badge rounded-pill" *ngFor="let color of res.result.colors | keyvalue"
        [style.background]="color.value"
        >
          {{color.key}}
        </div>
      </div>
    </div>

  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\algorithm-result\algorithm-result.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { AlgorithmResultComponent } from './algorithm-result.component';

describe('AlgorithmResultComponent', () => {
  let component: AlgorithmResultComponent;
  let fixture: ComponentFixture<AlgorithmResultComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [AlgorithmResultComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(AlgorithmResultComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\algorithm-result\algorithm-result.component.ts
===============================
import { Component, OnInit } from '@angular/core';
import { AlgorithmResultStorageService } from '../../core/storage/algorithm-result-storage.service';
import { take } from 'rxjs';
import { AlgorithmResult } from '../../models/algorith.model';
import { CommonModule } from '@angular/common';

@Component({
  selector: 'app-algorithm-result',
  imports: [ CommonModule],
  templateUrl: './algorithm-result.component.html',
  styleUrl: './algorithm-result.component.css'
})
export class AlgorithmResultComponent implements OnInit{

  algorithmResults?: AlgorithmResult[]
  constructor(private algorithmStorage: AlgorithmResultStorageService){
  }
  ngOnInit(): void {
    this.algorithmStorage.loadAlgorithmResulsFromLocalStorage()

    this.algorithmStorage.currentAlgorithmResult$.pipe(take(1)).subscribe({
      next:(results)=>{
        if(!results){
          console.log('No Algorithm result yet')
          return;
        }
        this.algorithmResults = results
      }
    })
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\data-view\data-view.component.css
===============================
.data-view {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 1.5rem;
}

.data-controls {
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
  justify-content: space-between;
}
.data-buttons{
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.format-btn {
  padding: 0.6rem 1.2rem;
  border: 2px solid #ddd;
  background-color: #fff;
  color: #041250;
  font-size: 0.9rem;
  font-weight: 600;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.format-btn:hover {
  background-color: #f0f0f0;
}

.format-btn.active {
  background-color: #041250;
  color: #fff;
  border-color: #041250;
}

.data-content {
  flex: 1;
  background-color: #fff;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  padding: 1.5rem;
  overflow: auto;
}

/* JSON View */
.json-view {
  max-height: 700px;
  overflow: auto;
  border-radius: 8px;
  background: #0d1c3f; /* dark slate */
  padding: 12px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);
}

.json-pre {
  margin: 0;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 13px;
  line-height: 1.5;
  color: #e5e7eb;
  white-space: pre-wrap;
}



/* CSV View */
.csv-view {
  max-height: 600px;
  overflow: auto;
  background: #020617;
  border-radius: 10px;
  padding: 14px;
}

.csv-pre {
  margin: 0;
  font-family: 'JetBrains Mono', monospace;
  font-size: 13px;
  line-height: 1.5;
  color: #e5e7eb;
  white-space: pre;
}


/* Table View */
.table-view {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.table-title {
  font-size: 14px;
  font-weight: 600;
  color: #050d30;
}

.table-title.mt {
  margin-top: 12px;
}

.table-wrapper {
  max-height: 550px;
  overflow: auto;
  border-radius: 10px;
  background: #020617;
}

.data-table {
  width: 100%;
  border-collapse: collapse;
  font-family: 'Inter', sans-serif;
  font-size: 13px;
  color: #e5e7eb;
}

.data-table thead {
  position: sticky;
  top: 0;
  background: #020617;
  z-index: 2;
}

.data-table th,
.data-table td {
  padding: 10px 12px;
  border-bottom: 1px solid #1e293b;
  text-align: left;
}

.data-table th {
  font-weight: 600;
  color: #c2d0e1;
}

.data-table tbody tr:hover {
  background: rgba(59, 130, 246, 0.08);
}
.table-grid {
  display: grid;
  grid-template-columns: 2.2fr 1fr; /* nodes wider */
  gap: 20px;
  align-items: start;
  height: 520px; /* or calc(100vh - Xpx) */
}

.grid-nodes,
.grid-edges {
  display: flex;
  flex-direction: column;
   min-height: 5px; /* or calc(100vh - Xpx) */
}

.edge-table th,
.edge-table td {
  text-align: center;
}

/* Scrollbar */
.data-content::-webkit-scrollbar {
  width: 8px;
}

.data-content::-webkit-scrollbar-track {
  background: #f1f1f1;
}

.data-content::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

.data-content::-webkit-scrollbar-thumb:hover {
  background: #555;
}

.top-five{
  color:#041250;
  font-size:larger;

}

.data-card {
  background: #ffffff;
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.data-card h4 {
  margin-bottom: 12px;
  font-size: 1rem;
  font-weight: 600;
}

/* ===== Top Five Table ===== */

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 12px;
  font-size: 0.9rem;
}

thead {
  background-color: #1e1e2f;
}

thead th {
  color: #353434;
  text-align: left;
  padding: 10px;
  font-weight: 600;
  border-bottom: 2px solid #2a2a40;
}

tbody tr {
  transition: background-color 0.2s ease;
}

tbody tr:hover {
  background-color: #f2f4f8;
}

tbody td {
  padding: 8px 10px;
  border-bottom: 1px solid #e5e7eb;
}

tbody tr:last-child td {
  border-bottom: none;
}

/* Rank column */
tbody td:first-child {
  font-weight: 600;
  color: #6b7280;
}

/* Degree emphasis */
tbody td:nth-child(3) {
  font-weight: 600;
  color: #2563eb;
}

/* Normalized value */
tbody td:nth-child(4) {
  font-family: monospace;
  color: #374151;
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\data-view\data-view.component.html
===============================
<div class="data-view">
  <div class="data-controls">
    <div class="data-buttons">
      <button
        [class.active]="dataFormat === 'json'"
        (click)="switchFormat('json')"
        class="format-btn">
        JSON
      </button>
      <button
        [class.active]="dataFormat === 'csv'"
        (click)="switchFormat('csv')"
        class="format-btn">
        CSV
      </button>
      <button
        [class.active]="dataFormat === 'table'"
        (click)="switchFormat('table')"
        class="format-btn">
        Table
      </button>

    </div>
    <div >

      <button
        [class.active]="dataFormat === 'top-five'"
        (click)="switchFormat('top-five')"
        class="format-btn top-five">
         <i class="fa-solid fa-circle-nodes me-2"></i>Top Five Node
      </button>
    </div>


  </div>

  <div class="data-content">
    <!-- JSON View -->
    <div *ngIf="dataFormat === 'json'" class="json-view">
      <pre class="json-pre" [innerHTML]="graph | prettyJson"></pre>
    </div>

    <!-- CSV View -->
    <div *ngIf="dataFormat === 'csv'" class="csv-view">

      <p class="text-warning">Graph</p>
      <pre class="csv-pre">{{graphCsv | prettyCsv}}</pre>
      <br>
      <p class="text-warning">Nodes</p>
      <pre class="csv-pre">{{nodesCsv | prettyCsv}}</pre>
      <br>
      <p class="text-warning">Edges</p>
      <pre class="csv-pre">{{edgesCsv | prettyCsv}}</pre>
    </div>

    <!-- Table View -->
    <div *ngIf="dataFormat === 'table'" class="table-grid">
      <div class="grid-nodes">
        <h3 class="table-title">Nodes</h3>
        <div class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Tag</th>
                <th>Activity</th>
                <th>Interaction</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let node of graph?.nodes">
                <td>{{ node.id }}</td>
                <td>{{ node.tag }}</td>
                <td>{{ node.activity }}</td>
                <td>{{ node.interaction }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- RIGHT: EDGES -->
      <div class="grid-edges">
        <h3 class="table-title">Edges</h3>
        <div class="table-wrapper">
          <table class="data-table edge-table">
            <thead>
              <tr>
                <th>Node A</th>
                <th>Node B</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let edge of graph?.edges">
                <td>{{ edge.nodeAId }}</td>
                <td>{{ edge.nodeBId }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
     <!-- Table View -->
    <div *ngIf="dataFormat === 'top-five'" class="data-card">
      <div class="table-wrapper">
        <table class="data-table mt-3">
          <thead>
            <tr>
              <th>#</th>
              <th>Node</th>
              <th>Degree</th>
              <th>Normalized Degree</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let node of topFiveNodeInDegree?.nodes; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ node.tag }}</td>
              <td>{{ node.degree }}</td>
              <td>{{ node.normalizeDegree | number:'1.3-3' }}</td>
            </tr>
          </tbody>

        </table>
      </div>

    </div>
  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\data-view\data-view.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { DataViewComponent } from './data-view.component';

describe('DataViewComponent', () => {
  let component: DataViewComponent;
  let fixture: ComponentFixture<DataViewComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [DataViewComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(DataViewComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\data-view\data-view.component.ts
===============================
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { AlgorithmsService } from '../../services/algorithms.service';
import { TopFiveNodeInDegreeResult } from '../../models/algorith.model';
import { GraphStateService } from '../../core/services/graph.service';
import { take } from 'rxjs';
import { ToastService } from '../../core/utils/toast-service.service';
import { Graph } from '../../models/graph.model';
import { PrettyJsonPipe } from "../../pipes/pretty-json.pipe";
import { PrettyCsvPipe } from "../../pipes/pretty-csv.pipe";

@Component({
  selector: 'app-data-view',
  standalone: true,
  imports: [CommonModule, FormsModule, PrettyJsonPipe, PrettyCsvPipe],
  templateUrl: './data-view.component.html',
  styleUrl: './data-view.component.css'
})
export class DataViewComponent {
  dataFormat:'top-five'| 'json' | 'csv' | 'table'  = 'json';


  topFiveNodeInDegree? : TopFiveNodeInDegreeResult
  graph?: Graph
  graphCsv:any;
  nodesCsv:any
  edgesCsv:any
  constructor(private algorithmService: AlgorithmsService,
            private graphStateService: GraphStateService,
            private toastService : ToastService){
            this.getcurrentGraph()
            }

  switchFormat(format: 'json' | 'csv' | 'table' | 'top-five') {
    this.dataFormat = format;
    if(this.dataFormat==='json' || this.dataFormat==='table' || this.dataFormat==='csv'){
      this.getcurrentGraph()
    }
    if(this.dataFormat==='top-five'){
      this.getTopFiveNode()
      return;
    }
  }

  getTopFiveNode(){
    this.graphStateService.currentGraph$
            .pipe(take(1))
            .subscribe(graph => {
              if (!graph) return;
              this.algorithmService
                .getTopFiveNodeInDegree(graph.id)
                .subscribe(res => {
                  this.topFiveNodeInDegree = res.result
                  console.log('result of top five node:',res.result.nodes)
                  this.toastService.runtime(`Algorithm execution took ${res.result.executionTime} ms `)
                });
              });
  }
  getcurrentGraph(){
    this.graphStateService.currentGraph$.pipe((take(1)))
      .subscribe(
      graph=>{
        this.graph=graph!
        this.graphCsv = [{
          id: graph?.id,
          title: graph?.title,
          description: graph?.description,
          nodeCount: graph?.nodes.length,
          edgeCount: graph?.edges.length
        }];
        this.nodesCsv= this.graph?.nodes.map(n => ({
            id: n.id,
            tag: n.tag,
            activity: n.activity,
            interaction: n.interaction,
          }));

        this.edgesCsv=this.graph?.edges.map(e => ({
          from: e.nodeAId,
          to: e.nodeBId,
          weight:e.weight
        }));

      }
    )
  }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\graph-view\graph-view.component.css
===============================
.graph-container {
  width: 100%;
  height: 800px; /* IMPORTANT */
  border: 1px solid #ddd;
  background: rgb(255, 255, 255);
}

.graph-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
}
.graph-rerender{
  display: block;
  position: absolute;
  bottom: 12px;
  right: 20px;
  z-index: 10;
  padding: 8px;
  border-radius: 6px;
  background: rgba(237, 237, 237, 0.85);
  border: none;
  padding: 6px 10px;
  color: rgb(35, 20, 119);
  cursor: pointer;
}
.graph-rerender:hover{
  background: rgb(35, 20, 119);
  color: #ffff;

}
/* Toolbar overlay */
.graph-toolbar {
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 10;

  display: flex;
  gap: 8px;
  padding: 8px;
  border-radius: 6px;
}

.graph-toolbar button {
  color: rgb(35, 20, 119);
  background: rgba(237, 237, 237, 0.85);
  border: none;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
}
.graph-toolbar .add-edge:hover{
    background:rgb(35, 20, 119);
    color:#ffff
}

.graph-toolbar button.active {
  background:rgb(35, 20, 119);
  color:#ffff
}

.graph-node{
  display: block;
  position: absolute;
  top: 30%;
  right: 18px;
  z-index: 10;
  border-radius: 8px;
  background: rgba(237, 237, 237, 0.85);
  color: rgb(35, 20, 119);
  border: none;
  padding: 6px 10px;
  cursor: pointer;
}

.graph-node:hover {
  color: #ffff;
  background: rgb(35, 20, 119);
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\graph-view\graph-view.component.html
===============================
<div class="graph-wrapper">
  <div #container class="graph-container"></div>

  <div class="graph-toolbar">
    <button *ngIf="!edgeCreationActive" class="add-edge"
      [class.active]="edgeCreationActive"
      (click)="toggleEdgeMode()">
      â Add Edge
    </button>

    <button
      (click)="disableEdgeCreation()"
      [disabled]="!edgeCreationActive">
      â Cancel
    </button>
  </div>
  <button (click)="openAddNode()" class="graph-node"><i class="fa-solid fa-plus me-2"></i> Add Node
  </button>

    <button (click)="rerendergraph()"class="graph-rerender"><i class="fa-solid fa-arrows-rotate"></i></button>
</div>



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\graph-view\graph-view.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { GraphViewComponent } from './graph-view.component';

describe('GraphViewComponent', () => {
  let component: GraphViewComponent;
  let fixture: ComponentFixture<GraphViewComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [GraphViewComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(GraphViewComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\graph-view\graph-view.component.ts
===============================
import { Dialog } from '@angular/cdk/dialog';
import { AfterViewInit, Component, ElementRef, inject, OnDestroy, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import { GraphStateService } from '../../core/services/graph.service';
import { AlgorithmsStateService } from '../../core/services/algorithms-state.service';
import { AlgorithmDefinition } from '../../core/utils/algorithm-definition';
import { AlgorithmsService } from '../../services/algorithms.service';
import { ToastService } from '../../core/utils/toast-service.service';
import { CommunityLegendItem } from '../../core/utils/algorithm-result';
import { EdgesService } from '../../core/services/edges.service';
import { AddNodeComponent } from '../modals/add-node/add-node.component';
import { GraphrenderService } from '../../core/services/graphrender.service';
import { combineLatest, Subject, take, takeUntil } from 'rxjs';
import { AlgorithmResultAdapterService } from '../../core/services/algorithm-result-adapter.service';
import { AlgorithmResultStorageService } from '../../core/storage/algorithm-result-storage.service';
import { AlgorithmResult } from '../../models/algorith.model';
import { Graph, Guid } from '../../models/graph.model';

@Component({
  selector: 'app-graph-view',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './graph-view.component.html',
  styleUrl: './graph-view.component.css'
})
export class GraphViewComponent implements AfterViewInit, OnDestroy{



  @ViewChild('container', { static: true })
  containerRef!: ElementRef<HTMLDivElement>;

  currentAlgorithm? : AlgorithmDefinition
  communityLegends?: CommunityLegendItem[]

  //Edge operations
  edgeCreationActive:boolean = false;
  private edgeSourceNodeId: string | null = null;

  private destroy$ = new Subject<void>();
  //dialog panel
  private dialog = inject(Dialog);

  constructor(private graphStateService: GraphStateService,
              private renderer : GraphrenderService,
              private algorithmState: AlgorithmsStateService,
              private algorithmService: AlgorithmsService,
              private adapter : AlgorithmResultAdapterService,
              private toast : ToastService,
              private edgeService: EdgesService,
              private algorithmResultStorage: AlgorithmResultStorageService){}

  rerendergraph() {
    window.location.reload()
  }
  ngOnInit() {
    this.algorithmState.selectedAlgorithm$
      .pipe(takeUntil(this.destroy$))
      .subscribe(algo => {
        if (!algo) return;
        this.prepareVisualization(algo);
      });
  }
  prepareVisualization(algo: AlgorithmDefinition) {
    this.renderer.reset();
    this.currentAlgorithm = algo;

   // this.renderer.setMod(this.currentAlgorithm.key);

   // this.renderer.setMod(algo.key);



    switch (this.currentAlgorithm.key){
      case 'bfs': {
        this.renderer.enableNodeSelection({
        max: 1,
        label: 'Select start node'
      });
        this.toast.algo("Selet start node")
      break;
      }
      case 'dfs':{
        this.renderer.enableNodeSelection({
        max: 1,
        label: 'Select start node'
        });
        this.toast.algo("select start node")
      break;
      }
      case 'dijkstra':{
        this.renderer.enableNodeSelection({
          max: 2,
          label: 'Select start and end nodes'
        });
        this.toast.algo("select source and target nodes")
        break;
      }
      case 'astar':{
        this.renderer.enableNodeSelection({
          max: 2,
          label: 'Select start and end nodes'
        });
        this.toast.algo("Select source and target nodes")
        break;
      }
      case 'degree-centrality':
        this.renderer.disableNodeSelection();
      break;
      case 'connected-components':
        this.renderer.disableNodeSelection();
      break;
      case 'community-detection':
        this.renderer.disableNodeSelection();
      break;
      case 'coloring':
        this.renderer.disableNodeSelection();
      break;
      default:
        console.log('Invalid key algorthim')
      break
    }

    this.renderer.onSelectionChange(ids => {
      this.onNodesSelected(ids);
      console.log("selected nodes:",ids);
    });
  }


  ngOnDestroy(): void {
    this.destroy$.next();
    this.destroy$.complete();
  }

  ngAfterViewInit(): void {
    this.renderer.init(this.containerRef.nativeElement);

    // Delete Edge
    this.renderer.edgeDeleted=(soureId, targetId)=>{
      this.deleteEdge(soureId,targetId)
    }

    //Create Edge
    this.renderer.edgeCreated = (soureId, targetId)=>{
      this.createEdge(soureId,targetId)
    }
    combineLatest([
      this.graphStateService.graphNodes$,
      this.graphStateService.graphLinks$
    ])
    .pipe(takeUntil(this.destroy$))
    .subscribe(([nodes, links]) => {
      console.log('NODES', nodes);
      console.log('LINKS', links);
      this.renderer.setData(nodes, links);
    });
  }

  private onNodesSelected(nodeIds: string[]) {
    if (!this.currentAlgorithm) return;

    switch (this.currentAlgorithm.key) {

      case 'bfs': {
        if (nodeIds.length !== 1) return;
        this.graphStateService.currentGraph$
        .pipe(take(1))
        .subscribe(graph => {
          if (!graph) return;

          const startNodeId = Number(nodeIds[0]);
          console.log('selected node Id:',startNodeId);
          this.algorithmService
            .runBFS(graph.id, startNodeId)
            .subscribe(res => {
              console.log("algorithm service api is called")
              console.log("Result of bfs:",res);
              const traversal = this.adapter.buildTraversalResult(res.result);
              this.renderer.renderTraversal(traversal);
              this.toast.runtime(`Algorithm execution took ${res.result.executionTime} ms `)
              this.saveAlgorithmResult(graph,
                `breadth-first search`,
                {'startNodeId':startNodeId},
                res.result
              )
            });
        });

        break;
      }
      case 'dfs': {
        if (nodeIds.length !== 1) return;
        this.graphStateService.currentGraph$
        .pipe(take(1))
        .subscribe(graph => {
          if (!graph) return;

          const startNodeId = Number(nodeIds[0]);
          console.log('selected node Id:',startNodeId);
          this.algorithmService
            .runDFS(graph.id, startNodeId)
            .subscribe(res => {
              console.log("algorithm service api is called")
              console.log("Result of dfs:",res);
              const traversal = this.adapter.buildTraversalResult(res.result);
              this.renderer.renderTraversal(traversal);
              this.toast.runtime(`Algorithm execution took ${res.result.executionTime} ms `)
              console.log("rendering is done")
              this.saveAlgorithmResult(graph,
                `death-first search`,
                {'startNodeId':startNodeId},
                res.result
              )
            });
        });
        break;
      }
      case 'astar': {
        if (nodeIds.length !== 2) return;
        this.graphStateService.currentGraph$
        .pipe(take(1))
        .subscribe(graph => {
          if (!graph) return;

          const startNodeId = Number(nodeIds[0]);
          const targetNodeId= Number(nodeIds[1])
          console.log('selected source Id:',startNodeId);
          console.log('selected target Id:',targetNodeId);
          this.algorithmService
            .runAStarPathFinding(graph.id, startNodeId,targetNodeId)
            .subscribe(res => {
              const pathTraversal= this.adapter.buildTraversalResult(res.result);
              this.renderer.renderShortestPathResult(pathTraversal.edgesTraversed,pathTraversal.visitOrder)
              this.toast.runtime(`Algorithm execution took ${res.result.executionTime} ms `)
              this.saveAlgorithmResult(graph,
                `A* shortest-path-finding`,
                {
                  'startNodeId':startNodeId,
                  'targetNodeId':targetNodeId,
                  'strategy':'Heuristic'
                },
                res.result
              )
              console.log("rendering is done")

            });
        });
        break;
      }
      case 'dijkstra': {
        if (nodeIds.length !== 2) return;
        this.graphStateService.currentGraph$
        .pipe(take(1))
        .subscribe(graph => {
          if (!graph) return;

          const startNodeId = Number(nodeIds[0]);
          const targetNodeId= Number(nodeIds[1])
          console.log('selected source Id:',startNodeId);
          console.log('selected target Id:',targetNodeId);
          this.algorithmService
            .runDijkstraPathFinding(graph.id, startNodeId,targetNodeId)
            .subscribe(res => {
              const pathTraversal= this.adapter.buildTraversalResult(res.result);
              this.renderer.renderShortestPathResult(pathTraversal.edgesTraversed,pathTraversal.visitOrder)
              this.toast.runtime(`Algorithm execution took ${res.result.executionTime} ms `)
              this.saveAlgorithmResult(graph,
                `Dijkstra shortest-path-finding`,
                {
                  'startNodeId':startNodeId,
                  'targetNodeId':targetNodeId,
                  'strategy':''
                },
                res.result
              )
              console.log("rendering is done")

            });
        });
        break;
      }
      default:
        console.log("_default")
      break
    }
  }

  //Edge operations

  toggleEdgeMode() {
    this.edgeCreationActive
      ? this.disableEdgeCreation()
      : this.enableEdgeCreation();
  }

  enableEdgeCreation() {
    this.edgeCreationActive = true;
    this.edgeSourceNodeId = null;
    this.renderer.enterEdgeMode();
  }

  disableEdgeCreation() {
    this.edgeCreationActive = false;
    this.edgeSourceNodeId = null;
    this.renderer.disableEdgeCreation();
    console.log(`${this.edgeSourceNodeId}`)
    this.renderer.exitEdgeMode();
  }

  private createEdge(sourceId:number, target:number) : void{
    this.edgeService.addEdge(sourceId,target).subscribe({
      next:res=>{
          console.log(`Edge added between :${res.nodeAId} and ${res.nodeBId} `)
          this.edgeCreationActive=false;
          this.edgeSourceNodeId=null;
          this.renderer.disableEdgeCreation();
          this.toast.info(`Edge added between :${res.nodeAId} and ${res.nodeBId}`)
      },
      error: err=>{
          console.error(`Failed to add edge :${err}`)
        }
      })
  }
  private deleteEdge(sourceId: number, target:number):void{
    this.edgeService.deleteEdge(sourceId,target).subscribe({
      next:res=>{
          console.log(`Edge delete successfully `)
          this.toast.info(`Edge delete successfully`)
      },
      error: err=>{
          console.error(`Failed to delete edge :${err}`)
        }
      })
  }

  //Node Operation
  openAddNode(){
      this.dialog.open(AddNodeComponent,
                { disableClose: true,
                  data:{mode:'add'},
                  panelClass:'add-node-panel'
                } )
  }

  private saveAlgorithmResult(graph:Graph,algorithm:string,parameters:any,result:any) : void{
    const algorithResult : AlgorithmResult ={
                id:crypto.randomUUID(),
                graphId:graph.id,
                algorithm:algorithm,
                createdAt:Date.now(),
                parameters:{
                  ... parameters,
                  'range-nodes':graph.nodes.length,
                },
                result:result
              }
    this.algorithmResultStorage.save(algorithResult)
  }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\header\header.component.css
===============================
.workspace-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: #ffffff;
  border-bottom: 2px solid #020617;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

}

.workspace-header h1 {
  font-size: 1.8rem;
  font-weight: 700;
  color: #333;
  margin: 0;
}

.tab-buttons {
  display: flex;
  gap: 1rem;
}

.tab-btn {
  padding: 0.75rem 1.5rem;
  border: 2px solid #ddd;
  background-color: #fff;
  color: #020617;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.tab-btn:hover {
  background-color: #f0f0f0;
  border-color: #999;
}
.title{
  color:#041250;
  font-size: 18px;
  font-weight: bold;
  font-family: Arial, Helvetica, sans-serif;
}
.tab-btn.active {
  background-color: #041250;
  color: #fff;
  border-color: #041250;
}

.user-profile {
  display: flex;
  align-items: center;
  position: relative;
}

.profile-icon {
  font-size: 2rem;
  cursor: pointer;
  transition: transform 0.2s;
  color: #020617;
}

.profile-icon:hover {
  transform: scale(1.1);
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  background-color: #fff;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 200px;
  z-index: 1000;
  overflow: hidden;
}

.dropdown-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.875rem 1.25rem;
  color: #333;
  text-decoration: none;
  transition: background-color 0.2s;
  border-bottom: 1px solid #f0f0f0;
}

.dropdown-item:last-child {
  border-bottom: none;
}

.dropdown-item:hover {
  background-color: #f8f9fa;
}

.dropdown-item .icon {
  font-size: 1.2rem;
}

.dropdown-item span:last-child {
  font-size: 0.95rem;
  font-weight: 500;
}
.algo-result{
  border-radius: 15px;
  font-weight: bold;
  color:#041250;
  background: #ffff;
}
.algo-result:hover{
  color:#ffff;
  background: #041250;
}
.algo-result.active{
  color:#ffff;
  background: #041250;
  font-weight: 600;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\header\header.component.html
===============================
<div class="workspace-header">
  <h2 class="title">WORKSPACE</h2>

  <div class="tab-buttons" *ngIf="isgraphCreated">
    <button
      [class.active]="activeTab === 'graph'"
      (click)="switchTab('graph')"
      class="tab-btn">
      <i class="fa-solid fa-diagram-project me-2"></i>Graph
    </button>
    <button
      [class.active]="activeTab === 'data'"
      (click)="switchTab('data')"
      class="tab-btn">
      <i class="fa-solid fa-database me-2"></i> Data
    </button>
  </div>
  <div class="section d-flex gap-2">
    <button *ngIf="isAlgoResultExist"[class.active]="activeTab === 'algorithmResult'"
    class="btn algo-result" (click)="switchTab('algorithmResult')"> <i class="fa-regular fa-eye me-2"></i>View Algorithm Results</button>
    <div class="user-profile">
      <span class="profile-icon" (click)="toggleDropdown()"><i class="fa-solid fa-user"></i></span>

      <div class="dropdown-menu" *ngIf="isDropdownOpen">
        <a routerLink="/" class="dropdown-item" (click)="closeDropdown()">
          <span class="icon">ð </span>
          <span>Anasayfaya DÃ¶n</span>
        </a>
        <a routerLink="/user/dashboard" class="dropdown-item" (click)="closeDropdown()">
          <span class="icon">ð</span>
          <span>KullanÄ±cÄ± ArayÃ¼zÃ¼ne DÃ¶n</span>
        </a>
        <button type="button" class="dropdown-item" (click)="requestReset()">
          <span class="icon">ð</span>
          <span>Yeni Graph OluÅtur</span>
        </button>
      </div>
    </div>
  </div>
</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\header\header.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { HeaderComponent } from './header.component';

describe('HeaderComponent', () => {
  let component: HeaderComponent;
  let fixture: ComponentFixture<HeaderComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [HeaderComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(HeaderComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\header\header.component.ts
===============================
import { Component, Input, Output, EventEmitter, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterLink } from '@angular/router';
import { AlgorithmResultStorageService } from '../../core/storage/algorithm-result-storage.service';
import { GraphStateService } from '../../core/services/graph.service';
import { take } from 'rxjs';

@Component({
  selector: 'app-header',
  standalone: true,
  imports: [CommonModule, RouterLink],
  templateUrl: './header.component.html',
  styleUrl: './header.component.css'
})
export class HeaderComponent implements OnInit{

  @Input() activeTab: 'graph' | 'data' | 'algorithmResult' = 'graph';
  @Output() tabChange = new EventEmitter<'graph' | 'data' | 'algorithmResult'>();
  @Output() reset = new EventEmitter<void>();

  @Input() isgraphCreated= false;
  isDropdownOpen = false;

  //Algorithm Result
  isAlgoResultExist: boolean= false;

  constructor(private algorithmResultStorage: AlgorithmResultStorageService,
    private graphState: GraphStateService
  ){}

   ngOnInit(): void {
    if(!this.isgraphCreated) return;
    this.graphState.currentGraph$.pipe(take(1)).subscribe({
      next:graph=>{
        if(!graph) return;
        this.isAlgoResultExist = this.algorithmResultStorage.isAlgorithmExist(graph.id);
      },
      error: err=>{
        console.error('An error occured while retrieving graph from localstorage',err)
      }
    })
  }
  switchTab(tab: 'graph' | 'data' | 'algorithmResult') {
    this.tabChange.emit(tab);
  }

  toggleDropdown() {
    this.isDropdownOpen = !this.isDropdownOpen;
  }

  closeDropdown() {
    this.isDropdownOpen = false;
  }

  requestReset() {
    this.reset.emit();
    this.closeDropdown();
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\add-node\add-node.component.css
===============================
/* Backdrop */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(244, 244, 244, 0.45);
  z-index: 1000;
}

/* Modal container */
.modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 450px;
  height: auto;
  background: #ffffff;
  border-radius: 8px;
  z-index: 1001;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25);
  display: flex;
  flex-direction: column;
}

/* Header */
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid #e0e0e0;
}

.modal-header h2 {
  margin: 0;
  font-size: 1.2rem;
  font-weight: 600;
}

.close-btn {
  background: none;
  border: none;
  font-size: 1.4rem;
  cursor: pointer;
  line-height: 1;
}

/* Body */
.modal-body {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-size: 0.85rem;
  margin-bottom: 6px;
  font-weight: 500;
}

.form-group input {
  padding: 8px 10px;
  font-size: 0.85rem;
  border-radius: 4px;
  border: 1px solid #cfcfcf;
}

.form-group input:focus {
  outline: none;
  border-color: #3f51b5;
}

.hint {
  font-size: 0.7rem;
  color: #666;
}

/* Footer */
.modal-footer {
  padding: 14px 20px;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  border-top: 1px solid #e0e0e0;
}

/* Buttons */
.btn {
  padding: 7px 14px;
  font-size: 0.8rem;
  border-radius: 4px;
  border: none;
  cursor: pointer;
}

.btn.primary {
  background-color: #3f51b5;
  color: #fff;
}

.btn.secondary {
  background-color: #eeeeee;
  color: #333;
}

.btn:hover {
  opacity: 0.9;
}


/* Responsive */
@media (max-width: 480px) {
  .modal {
    width: 90%;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\add-node\add-node.component.html
===============================
<!-- Backdrop -->
<div class="modal-backdrop"></div>

<!-- Modal -->
<div class="modal">
  <div class="modal-header">
    <h2 class="text-center">{{mode==='add' ?'Add Node' : 'Edit Node'}}</h2>
  </div>
  <form class="modal-body" [formGroup]="formNode"
  (ngSubmit)="save()">
    <!-- Tag -->
    <div class="form-group">
      <label for="tag">Node Tag</label>
      <input
        id="tag"
        type="text"
        placeholder="e.g. User A"
        formControlName="tag"
        required
      />
      <span class="text-danger"
        *ngIf="formNode.get('tag')?.touched && formNode.get('tag')?.invalid">
        Tag is required
      </span>
    </div>

    <!-- Activity -->
    <div class="form-group">
      <label for="activity">
        Activity <span class="hint">(0 â 1)</span>
      </label>
      <input
        formControlName="activity"
        id="activity"
        type="number"
        min="0"
        max="1"
        step="0.01"
        placeholder="0.75"
        required
      />
       <span class="text-danger"
        *ngIf="formNode.get('activity')?.touched && formNode.get('activity')?.invalid">
        Activity is required
      </span>
    </div>

    <!-- Interaction -->
    <div class="form-group">
      <label for="interaction">Interaction</label>
      <input
        id="interaction"
        formControlName="interaction"
        type="number"
        min="1"
        placeholder="12"
        required
      />
       <span class="text-danger"
        *ngIf="formNode.get('interaction')?.touched && formNode.get('interaction')?.invalid">
        Interaction is required
      </span>
    </div>
  <!-- Backend error -->
    <div *ngIf="errors" class="text-danger">
      {{ errors }}
    </div>
     <div class="modal-footer">
      <button class="btn secondary" (click)="cancel()" [disabled]="loading">
        Cancel
      </button>
      <button class="btn btn-danger" (click)="delete(node?.id!)" [disabled]="loading" *ngIf="mode==='edit'">
        Delete
      </button>
      <button type="submit" class="btn primary" [disabled]="loading">
        <i class="fa-solid fa-plus me-2"></i>
        <span *ngIf="!loading">{{ mode === 'add' ? 'Add Node' : 'Save Changes' }}</span>
        <span *ngIf="loading">Saving...</span>
      </button>
    </div>
  </form>

</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\add-node\add-node.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { AddNodeComponent } from './add-node.component';

describe('AddNodeComponent', () => {
  let component: AddNodeComponent;
  let fixture: ComponentFixture<AddNodeComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [AddNodeComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(AddNodeComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\add-node\add-node.component.ts
===============================
import { DIALOG_DATA, DialogRef } from '@angular/cdk/dialog';
import { Component, Inject } from '@angular/core';
import { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';
import { NgIf } from '@angular/common';
import { NodesService } from '../../../core/services/nodes.service';
import { ToastService } from '../../../core/utils/toast-service.service';
import { Node } from '../../../models/node.model';

@Component({
  selector: 'app-add-node',
  imports: [NgIf, ReactiveFormsModule],
  templateUrl: './add-node.component.html',
  styleUrl: './add-node.component.css'
})
export class AddNodeComponent {

  formNode: FormGroup
  errors? : string[]
  loading: boolean= false
  mode:'add' | 'edit'
  node?:Node

  constructor(private dialogRef: DialogRef<Node>,
      private nodeService: NodesService,
      private formBuilder : FormBuilder,
       @Inject(DIALOG_DATA) private data: { mode: 'add' | 'edit'; node?: Node },
      private toast : ToastService){
        this.mode = data.mode
        this.node = data.node
        this.formNode = this.formBuilder.group({
          tag : ['', Validators.required],
          activity :[null,
                      Validators.compose([
                        Validators.required,
                        Validators.min(0),
                        Validators.max(1)
                      ])],
          interaction : [null,
                      Validators.compose([
                        Validators.required,
                        Validators.min(1)
                      ])]
        })

         if (this.mode === 'edit' && this.node) {
          this.formNode.patchValue({
            tag: this.node.tag,
            activity: this.node.activity,
            interaction: this.node.interaction
          });
        }
      }


  save(): void{
    if(this.formNode.invalid){
      this.formNode.markAllAsTouched()
      console.log('something is happening')
      console.log(this.formNode.value.tag,this.formNode.value.activity,this.formNode.value.interaction)
      this.errors=['Invalid input entry. Please verify your input']
      return;
    }
    console.log('creation started')
    console.log(this.formNode.value.tag,this.formNode.value.activity,this.formNode.value.interaction)
    this.loading= true;
    this.errors= [];
    const {tag, activity, interaction} = this.formNode.value
    if(this.mode==='add'){

      this.nodeService.addNode(tag,activity,interaction).subscribe({
          next:node =>{
            this.toast.info(`Node ${node.tag} successfully added`);
            this.loading=false;
            this.dialogRef.close()
          },
          error:(err) =>{
            if(err.status==='400'){
              this.errors =[err?.detail]
            }
            this.loading=false;
            this.toast.error("Failed to add Node to graph");
            this.errors=[`Node with tag:${tag} may exist already in this graph`]
          }
        })
    }
    if(this.mode==='edit'){
      if(!this.node?.id) {
        console.log(`update node id is missing`)
        return;
      }
      console.log('update operation')
      this.nodeService.editNode(this.node?.id,tag,activity,interaction).subscribe({
        next:res=>{
          console.log(`node:`,res);
          this.toast.info(`Node: ${res.tag} updated successfully`);
          this.loading=false;
          this.dialogRef.close()
        },
        error:(err) =>{
            if(err.status==='400'){
              this.errors =[err?.detail]
            }
            this.loading=false;
            this.toast.error("Failed to add Node to graph");
            this.errors=[`Node with tag:${tag} may exist already in this graph`]
          }
      })
    }

  }
  cancel(){
    this.dialogRef.close()
  }

  delete(id:number){
    if(!id){
      console.log(`node id is missing`)
      return;
    }
    this.nodeService.deleteNode(id).subscribe({
      next:()=>{
          this.toast.info(`Node deleted successfully`)
          this.dialogRef.close();
          window.location.reload()
      },
      error:()=>{
        console.log(`something goes wrong`)
        this.errors=[`something goes wrong - delete operation failed`]
      }
    })
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\edit-graph\edit-graph.component.css
===============================
.edit-graph-container {
  width: 520px;
  background: #ffffff;
  border-radius: 14px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.15);
  padding: 22px 24px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  color: #0f172a;
}

/* ===== Header ===== */

.edit-graph-header {
  border-bottom: 1px solid #e5e7eb;
  padding-bottom: 12px;
  margin-bottom: 16px;
}

.edit-graph-header h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
}

.edit-graph-header .subtitle {
  font-size: 13px;
  color: #6b7280;
  margin-top: 4px;
}

/* ===== Body ===== */

.edit-graph-body {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-size: 13px;
  font-weight: 500;
  margin-bottom: 6px;
  color: #374151;
}

.form-group input,
.form-group textarea {
  border: 1px solid #d1d5db;
  border-radius: 8px;
  padding: 8px 10px;
  font-size: 14px;
  outline: none;
  transition: border-color 0.15s ease;
}

.form-group input:focus,
.form-group textarea:focus {
  border-color: #2563eb;
}

.form-group textarea {
  resize: vertical;
  min-height: 90px;
}

.error {
  font-size: 12px;
  color: #dc2626;
  margin-top: 4px;
}

/* ===== Backend error ===== */

.backend-error {
  background: #fee2e2;
  color: #991b1b;
  border-radius: 8px;
  padding: 8px 10px;
  font-size: 13px;
}

/* ===== Actions ===== */

.edit-graph-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 22px;
}

.btn {
  border: none;
  border-radius: 8px;
  padding: 8px 16px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.btn.cancel {
  background: #f3f4f6;
  color: #374151;
}

.btn.cancel:hover {
  background: #e5e7eb;
}

.btn.primary {
  background: #2563eb;
  color: #ffffff;
}

.btn.primary:hover {
  background: #1d4ed8;
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\edit-graph\edit-graph.component.html
===============================

<form
  [formGroup]="formEdit"
  (ngSubmit)="save()"
  class="edit-graph-container"
>

  <!-- Header -->
  <header class="edit-graph-header">
    <h2>Edit Graph</h2>
    <p class="subtitle">Update graph title and description</p>
  </header>

  <!-- Body -->
  <section class="edit-graph-body">

    <!-- Title -->
    <div class="form-group">
      <label>Title</label>
      <input
        type="text"
        formControlName="title"
        placeholder="Graph title"
      />

      <span class="error"
        *ngIf="formEdit.get('title')?.touched && formEdit.get('title')?.invalid">
        Title is required
      </span>
    </div>

    <!-- Description -->
    <div class="form-group">
      <label>Description</label>
      <textarea
        rows="4"
        formControlName="description"
        placeholder="Optional description">
      </textarea>
    </div>

    <!-- Backend error -->
    <div *ngIf="error" class="backend-error">
      {{ error }}
    </div>

  </section>

  <!-- Footer -->
  <footer class="edit-graph-actions">
    <button
      type="button"
      class="btn cancel"
      (click)="cancel()"
      [disabled]="loading">
      Cancel
    </button>

    <button
      type="submit"
      class="btn primary"
      [disabled]="loading">
      <span *ngIf="!loading">Save</span>
      <span *ngIf="loading">Saving...</span>
    </button>
  </footer>

</form>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\edit-graph\edit-graph.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { EditGraphComponent } from './edit-graph.component';

describe('EditGraphComponent', () => {
  let component: EditGraphComponent;
  let fixture: ComponentFixture<EditGraphComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [EditGraphComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(EditGraphComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\edit-graph\edit-graph.component.ts
===============================
import { Component, Inject } from '@angular/core';
import { GraphStateService } from '../../../../core/services/graph.service';
import { FormGroup, FormBuilder, Validators, ReactiveFormsModule } from '@angular/forms';
import { DIALOG_DATA, DialogRef } from '@angular/cdk/dialog';
import { EditGraphCommand, EditGraphResponse } from '../../../../models/graph.model';
import { NgIf } from '@angular/common';

@Component({
  selector: 'app-edit-graph',
  imports: [ReactiveFormsModule, NgIf],
  templateUrl: './edit-graph.component.html',
  styleUrl: './edit-graph.component.css'
})
export class EditGraphComponent {

  formEdit : FormGroup;
  loading : boolean = false;
  error ?: string;
  constructor(private graphStateService : GraphStateService,
    private formBuilder: FormBuilder,
    private dialogRef: DialogRef<EditGraphResponse>,
    @Inject(DIALOG_DATA) public data: EditGraphCommand,
  ){
    this.formEdit = this.formBuilder.group({
      title: [data.title, Validators.required],
      description: [data.description]
    });
  }

  save() {
      if (this.formEdit.invalid) {
        this.formEdit.markAllAsTouched();
        return;
      }

      this.loading = true;
      this.error = undefined;

      const command: EditGraphCommand = {
        id: this.data.id,
        title: this.formEdit.value.title,
        description: this.formEdit.value.description
      };

      this.graphStateService.updateGraphMetaData(command)
        .subscribe({
          next: response => {
            this.dialogRef.close(response);
          },
          error: () => {
            this.error = 'Unable to update graph metadata';
            this.loading = false;
          }
        });
    }

  cancel(){
    this.dialogRef.close()
  }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\graph-summary\graph-summary.component.css
===============================
.summary-container {
  width: 560px;
  background: #ffffff;
  color: #0f172a;
  border-radius: 16px;
  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.14);
  padding: 24px 28px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

/* ===== Header ===== */

.summary-header {
  margin-bottom: 18px;
  border-bottom: 1px solid #e5e7eb;
  padding-bottom: 12px;
  text-align: center;
}

.summary-header h2 {
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.summary-description {
  margin-top: 8px;
  font-size: 14px;
  color: #6b7280;
  line-height: 1.5;
}

/* ===== Grid ===== */

.summary-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 16px 28px;
  margin-top: 18px;
}

.summary-item {
  display: flex;
  flex-direction: column;
}

.summary-item .label {
  font-size: 12px;
  color: #6b7280;
  margin-bottom: 4px;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.summary-item .value {
  font-size: 17px;
  font-weight: 500;
  color: #111827;
}

/* ===== Status colors ===== */

.summary-item .value.ok {
  color: #16a34a;
  font-weight: 600;
}

.summary-item .value.ko {
  color: #dc2626;
  font-weight: 600;
}

/* ===== Footer ===== */

.summary-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 26px;
}

.btn-primary {
  background: #2563eb;
  color: #ffffff;
  border: none;
  border-radius: 10px;
  padding: 9px 18px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.btn-primary:hover {
  background: #1d4ed8;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\graph-summary\graph-summary.component.html
===============================
<div class="summary-container">

  <header class="summary-header">
    <h2>{{ summary.title }} â Summary</h2>

    <p class="summary-description" *ngIf="summary.description">
      {{ summary.description }}
    </p>
    <p class="summary-description" *ngIf="!summary.description">
     {{summary.title}} has no description.
    </p>
  </header>

  <section class="summary-grid">

    <div class="summary-item">
      <span class="label">Nodes</span>
      <span class="value">{{ summary.nodeCount }}</span>
    </div>

    <div class="summary-item">
      <span class="label">Edges</span>
      <span class="value">{{ summary.edgeCount }}</span>
    </div>

    <div class="summary-item">
      <span class="label">Connected</span>
      <span
        class="value"
        [class.ok]="summary.isConnected"
        [class.ko]="!summary.isConnected">
        {{ summary.isConnected ? 'Yes' : 'No' }}
      </span>
    </div>

    <div class="summary-item">
      <span class="label">Density</span>
      <span class="value">
        {{ summary.density | number:'1.3-3' }}
      </span>
    </div>

    <div class="summary-item">
      <span class="label">Average Degree</span>
      <span class="value">
        {{ summary.averageDegree | number:'1.2-2' }}
      </span>
    </div>

    <div class="summary-item">
      <span class="label">Directed</span>
      <span class="value">
        {{ summary.isDirected ? 'Yes' : 'No' }}
      </span>
    </div>

    <div class="summary-item">
      <span class="label">Weighted</span>
      <span class="value">
        {{ summary.isWeighted ? 'Yes' : 'No' }}
      </span>
    </div>

  </section>

  <footer class="summary-actions">
    <button class="btn-primary" (click)="close()">Close</button>
  </footer>

</div>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\graph-summary\graph-summary.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { GraphSummaryComponent } from './graph-summary.component';

describe('GraphSummaryComponent', () => {
  let component: GraphSummaryComponent;
  let fixture: ComponentFixture<GraphSummaryComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [GraphSummaryComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(GraphSummaryComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\graph-summary\graph-summary.component.ts
===============================
import { Component, Inject} from '@angular/core';
import { GraphSummary } from '../../../../models/graph.model';
import { DIALOG_DATA, DialogRef } from '@angular/cdk/dialog';
import {DecimalPipe, NgIf } from '@angular/common';

@Component({
  selector: 'app-graph-summary',
  imports: [DecimalPipe, NgIf],
  templateUrl: './graph-summary.component.html',
  styleUrl: './graph-summary.component.css'
})
export class GraphSummaryComponent {

   constructor(
    @Inject(DIALOG_DATA) public summary: GraphSummary,
    private dialogRef: DialogRef<void>
  ) {}

  close() {
    this.dialogRef.close();
  }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\import-graph-snapshot\import-graph-snapshot.component.css
===============================
.import-snapshot-form {
  width: 100%;
  max-width: 500px;
  background: #ffffff;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.12);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.form-title {
  font-size: 20px;
  font-weight: 600;
  text-align: center;
  margin-bottom: 16px;
  color: #1e293b;
}

.form-label {
  font-size: 14px;
  color: #475569;
  margin-bottom: 6px;
}

input[type="file"] {
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  padding: 8px;
}

.file-name {
  font-size: 13px;
  color: #0f172a;
}

.error {
  font-size: 13px;
  color: #dc2626;
}

.actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  margin-top: 12px;
}

.actions button {
  min-width: 100px;
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 500;
  border-radius: 6px;
  border: 1px solid transparent;
  cursor: pointer;
  transition: all 0.2s ease;
}

.actions .primary {
  background-color: #4a90e2;
  color: white;
}

.actions .primary:hover {
  background-color: #2b89f6;
}

.actions .cancel {
  background-color: #f1f5f9;
  color: #0f172a;
  border: 1px solid #cbd5e1;
}

.actions .cancel:hover {
  background-color: #e2e8f0;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\import-graph-snapshot\import-graph-snapshot.component.html
===============================
<form (ngSubmit)="importSnapshot()" class="import-snapshot-form">
  <h2 class="form-title">Import Graph Snapshot</h2>

  <label class="form-label">Select JSON file</label>
  <input
    type="file"
    accept=".json,application/json"
    (change)="onFileSelected($event)"
  />

  <div *ngIf="fileName" class="file-name">
    Selected file: {{ fileName }}
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div class="actions">
    <button type="button" class="cancel" (click)="cancel()">Cancel</button>
    <button type="submit" class="primary" [disabled]="loading || !snapShot">
      <i class="fa-solid fa-upload me-2"></i> Import
    </button>
  </div>
</form>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\import-graph-snapshot\import-graph-snapshot.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { ImportGraphSnapshotComponent } from './import-graph-snapshot.component';

describe('ImportGraphSnapshotComponent', () => {
  let component: ImportGraphSnapshotComponent;
  let fixture: ComponentFixture<ImportGraphSnapshotComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [ImportGraphSnapshotComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(ImportGraphSnapshotComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\modals\graphs\import-graph-snapshot\import-graph-snapshot.component.ts
===============================
import { Component } from '@angular/core';
import { validateSnapshot } from '../../../../core/validators/graph.import.validator';
import { GraphStateService } from '../../../../core/services/graph.service';
import { Graph, GraphSnapshot } from '../../../../models/graph.model';
import { ToastService } from '../../../../core/utils/toast-service.service';
import { DialogRef } from '@angular/cdk/dialog';
import { NgIf } from '@angular/common';
import { FormBuilder, FormGroup, FormsModule, ReactiveFormsModule } from '@angular/forms';

@Component({
  selector: 'app-import-graph-snapshot',
  imports: [NgIf,FormsModule,ReactiveFormsModule ],
  templateUrl: './import-graph-snapshot.component.html',
  styleUrl: './import-graph-snapshot.component.css'
})
export class ImportGraphSnapshotComponent {
  importForm: FormGroup;
  fileName?: string;
  snapShot?: GraphSnapshot;
  error?: string;
  loading = false;

  constructor(
    private fb: FormBuilder,
    private graphState: GraphStateService,
    private dialogRef: DialogRef<Graph>,
    private toast: ToastService
  ) {
    this.importForm = this.fb.group({});
  }

  onFileSelected(event: Event) {
    this.error = undefined;
    this.snapShot = undefined;

    const input = event.target as HTMLInputElement;
    const file = input.files?.[0];
    if (!file) return;

    if (!file.name.endsWith('.json')) {
      this.error = 'Only JSON files are allowed';
      return;
    }

    this.fileName = file.name;

    const reader = new FileReader();
    reader.onload = () => {
      try {
        const parsed = JSON.parse(reader.result as string) as GraphSnapshot;

        const valid = validateSnapshot(parsed);
        if (!valid) {
          this.error = 'Invalid snapshot structure';
          return;
        }

        this.snapShot = parsed;

      } catch {
        this.error = 'Invalid JSON format';
      }
    };

    reader.readAsText(file);
  }

  importSnapshot() {
    if (!this.snapShot) return;
    console.log('data loaded:', this.snapShot);
    this.loading = true;
    this.error = undefined;

    this.graphState.importSnapshot(this.snapShot).subscribe({
      next: (graph) => {
        this.graphState.setCurrentGraph(graph);
        this.toast.success('Graph imported successfully');
        this.loading = false;
        this.dialogRef.close(graph);
      },
      error: (err) => {
        this.loading = false;
        this.error = err?.error?.message ?? 'Failed to import snapshot';
      }
    });
  }

  cancel() {
    this.dialogRef.close();
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\schema-creation.component.css
===============================
.schema-creation {
  height:90vh ;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  background: #eff6ff;
}

.schema-creation h2 {
  margin-bottom: 32px;
  font-size: 26px;
  font-weight: 600;
  color: #4a90e2; /* gris foncÃ© */
  text-align: center;
}

/* ACTIONS */
.actions {
  display: flex;
  gap: 20px;
}

/* BASE BUTTON */
.actions button {
  min-width: 200px;
  padding: 14px 22px;
  font-size: 15px;
  font-weight: 500;
  color: #4a90e2;
  border-radius: 8px;
  border: 1px solid transparent;
  cursor: pointer;

  transition: all 0.2s ease;
}

/* PRIMARY */
.actions .primary {
  background-color: #4a90e2; /* blue-600 */
  color: #ffffff;
  box-shadow: 0 8px 20px rgba(37, 99, 235, 0.2);
}

.actions .primary:hover {
  background-color: #2b89f6;
  transform: translateY(-1px);
}

/* SECONDARY */
.actions .secondary {
  background-color: #ffffff;
  color: #2563eb;
  border: 1px solid #2563eb;
}

.actions .secondary:hover {
  background-color: #eff6ff;
  transform: translateY(-1px);
}

/* TERTIARY */
.actions .tertiary {
  background-color: #f8fafc;
  color: #0f172a;
  border: 1px dashed #94a3b8;
}

.actions .tertiary:hover {
  background-color: #e2e8f0;
  transform: translateY(-1px);
}

/* RESPONSIVE */
@media (max-width: 480px) {
  .actions {
    flex-direction: column;
    width: 100%;
  }

  .actions button {
    width: 100%;
  }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\schema-creation.component.html
===============================
<div class="schema-creation">
  <h2 class="title">Graph Schema</h2>

  <div class="actions">
    <button class="primary" (click)="openCreateModal()">
      <i class="fa-solid fa-plus me-2"></i>
      Create empty graph
    </button>

    <button class="secondary" (click)="openImportModal()">
      <i class="fa-solid fa-file-import me-2"></i>
      Import an existing graph
    </button>

    <!-- NEW : Import snapshot -->
    <button class="tertiary" (click)="openImportSnapshotModal()">
      <i class="fa-solid fa-upload me-2"></i>
      Import snapshot
    </button>
  </div>
</div>



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\schema-creation.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { SchemaCreationComponent } from './schema-creation.component';

describe('SchemaCreationComponent', () => {
  let component: SchemaCreationComponent;
  let fixture: ComponentFixture<SchemaCreationComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [SchemaCreationComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(SchemaCreationComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\schema-creation.component.ts
===============================
import { Dialog } from '@angular/cdk/dialog';
import { Component, EventEmitter, inject, Output } from '@angular/core';
import { GraphCreationComponent } from './graph-creation/graph-creation.component';
import { Graph, Guid } from '../../models/graph.model';
import { GraphStateService } from '../../core/services/graph.service';
import { ImportGraphComponent } from './import-graph/import-graph.component';
import { ImportGraphSnapshotComponent } from '../modals/graphs/import-graph-snapshot/import-graph-snapshot.component';


@Component({
  selector: 'app-schema-creation',
  standalone: true,
  templateUrl: './schema-creation.component.html',
  styleUrl: './schema-creation.component.css'
})
export class SchemaCreationComponent {
  private dialog = inject(Dialog);
  @Output() graphCreated = new EventEmitter<Guid>();

  constructor( private graphStateService : GraphStateService) {}

  openCreateModal() {
    console.log('ð¨ Opening create graph modal...');
    const dialogRef = this.dialog.open(GraphCreationComponent, {
      disableClose: true,
      panelClass: 'graph-creation-panel'
    });

    dialogRef.closed.subscribe(graph => {
      if (!graph || typeof graph !== 'object') return;
      this.graphStateService.setCurrentGraph((graph as Graph));
      this.graphCreated.emit((graph as Graph).id);
    });
  }

  openImportModal() {
    console.log('ð¨ Opening import graph modal...');
    const dialogRef = this.dialog.open(ImportGraphComponent, {
      disableClose : true,
      panelClass : 'import-graph-panel'});
    dialogRef.closed.subscribe(graph => {
      if (!graph || typeof graph !== 'object') return;
      this.graphStateService.setCurrentGraph((graph as Graph));
      this.graphCreated.emit((graph as Graph).id);
    });
  }
  openImportSnapshotModal(){
    const dialogRef = this.dialog.open(ImportGraphSnapshotComponent, {
      disableClose : true,
      panelClass : 'import-graph-snapshoot-panel'});
    dialogRef.closed.subscribe(graph => {
      if (!graph || typeof graph !== 'object') return;
      this.graphStateService.setCurrentGraph((graph as Graph));
      this.graphCreated.emit((graph as Graph).id);
    });
  }
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\graph-creation\graph-creation.component.css
===============================
/* HOST = dialog panel */
:host {
  display: block;
  background: #ffffff;
  border-radius: 14px;
  padding: 28px;
  width: 420px;
  max-width: 90vw;
  box-shadow:
    0 10px 25px rgba(0, 0, 0, 0.15),
    0 4px 10px rgba(0, 0, 0, 0.08);

  animation: scaleIn 0.2s ease-out;
}


h2 {
  margin: 0 0 16px;
  font-size: 20px;
  font-weight: 600;
}
.title{
  text-align: center;

}
label {
  font-size: 14px;
  font-weight: 500;
  color: #374151;
}

input {
  width: 100%;
  margin-top: 6px;
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  outline: none;
}

input:focus {
  border-color: #2563eb;
}

.actions {
  margin-top: 24px;
  display: flex;
  justify-content: flex-end;
  gap: 12px;
}

button {
  padding: 10px 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
}

.error {
  color: #dc2626;
  font-size: 13px;
  margin-top: 4px;
  display: block;
}

.server-error {
  margin-top: 12px;
  padding: 10px 12px;
  background: #fee2e2;
  color: #991b1b;
  border-radius: 6px;
  font-size: 14px;
}

button.primary {
  background: #2563eb;
  color: white;
}

button.cancel {
  background: #f3f4f6;
}

/* ANIMATION */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}



===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\graph-creation\graph-creation.component.html
===============================
<h2 class="title">Create Graph</h2>

<form [formGroup]="graphCreationForm" (ngSubmit)="create()">
  <label>Graph Title</label>
  <input formControlName="title" placeholder="Social Network" />
    <span class="error" *ngIf="submitted && graphCreationForm.get('title')?.hasError('required')">
      Graph title is required!
    </span>
    <div class="server-error" *ngIf="serverError">
    {{ serverError }}
    </div>
  <div class="actions">
    <button type="button" class="cancel" (click)="cancel()">Cancel</button>
    <button type="submit" [disabled]="loading" class="primary"> <i class="fa-solid fa-plus"></i> Create</button>
  </div>
</form>




===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\graph-creation\graph-creation.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { GraphCreationComponent } from './graph-creation.component';

describe('GraphCreationComponent', () => {
  let component: GraphCreationComponent;
  let fixture: ComponentFixture<GraphCreationComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [GraphCreationComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(GraphCreationComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\graph-creation\graph-creation.component.ts
===============================
import { Graph } from './../../../models/graph.model';
import { DialogRef } from '@angular/cdk/dialog';
import { NgIf } from '@angular/common';
import { Component } from '@angular/core';
import { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';
import { GraphStateService } from '../../../core/services/graph.service';



@Component({
  selector: 'app-graph-creation-modal',
  standalone: true,
  imports: [ReactiveFormsModule, NgIf],
  templateUrl: './graph-creation.component.html',
  styleUrls: ['./graph-creation.component.css']
})
export class GraphCreationComponent {

  graphCreationForm : FormGroup;
  serverError: string | null = null;
  submitted = false;
  loading = false;
  constructor(private formBuilder: FormBuilder,
    private dialogRef : DialogRef<Graph>,
    private graphService : GraphStateService
  ){
    this.graphCreationForm= this.formBuilder.group({
      title: ['', Validators.required]
    })
  }
  create() {
    this.submitted= true;
     this.serverError = null;
    if (this.graphCreationForm.invalid) return;

    this.loading = true;
    const title = this.graphCreationForm.value.title;

    this.submitted=false;
    this.graphService.createGraph(title).subscribe({
      next: (res) => {
        const graph : Graph = {
          id: res.id,
          title: res.title,
          description: null,
          order: 0,
          size: 0,
          nodes:[],
          edges:[]
        };
        this.graphCreationForm.reset();
        this.dialogRef.close(graph);
      },
      error: (err) => {
        this.loading = false;
        if (err.status === 500) {
          this.serverError = 'An internal server error occurred. Please try again.';
        } else if (err.error?.message) {
          this.serverError = err.error.message;
        } else {
          this.serverError = 'Unexpected error occurred.';
        }
      }
    });
  }
  cancel(){
    this.dialogRef.close();
  }


  }







===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\import-graph\import-graph.component.css
===============================
:host {
  display: block;
  background: #ffffff;
  border-radius: 14px;
  padding: 28px;
  width: 420px;
  max-width: 90vw;
  box-shadow:
    0 10px 25px rgba(0, 0, 0, 0.15),
    0 4px 10px rgba(0, 0, 0, 0.08);

  animation: scaleIn 0.2s ease-out;
}


.import-form {
  display: flex;
  flex-direction: column;
  gap: 14px;
  background: #ffffff;
  padding: 20px;
  border-radius: 12px;
  width: 100%;
  box-sizing: border-box;
}

.form-label {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
}

.import-form input[type="file"] {
  padding: 10px;
  border: 1px dashed #d1d5db;
  border-radius: 10px;
  background: #f9fafb;
  cursor: pointer;
  font-size: 13px;
}

.import-form input[type="file"]::file-selector-button {
  padding: 8px 12px;
  margin-right: 12px;
  border-radius: 8px;
  border: none;
  background: #1dd862;
  color: #ffffff;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}

.import-form input[type="file"]::file-selector-button:hover {
  background: #1dd862;
}

.file-name {
  font-size: 13px;
  color: #4b5563;
}

.error {
  font-size: 13px;
  color: #dc2626;
  background: #fee2e2;
  padding: 8px 10px;
  border-radius: 8px;
}

.actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 8px;
}

.actions button {
  padding: 8px 14px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  border: none;
}

.actions button[type="button"] {
  background: #e5e7eb;
  color: #374151;
}

.actions button[type="button"]:hover {
  background: #d1d5db;
}

.actions button[type="submit"] {
  background: #1dd862;
  color: #ffffff;
}

.actions button[type="submit"]:hover:not(:disabled) {
  background: #1dd862;
}

.actions button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\import-graph\import-graph.component.html
===============================
<form (ngSubmit)="importGraph()" class="import-form">

  <label class="form-label">Import JSON file</label>

  <input
    type="file"
    accept=".json,application/json"
    (change)="onFileSelected($event)"
  />

  <div *ngIf="fileName" class="file-name">
    Selected file: {{ fileName }}
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div class="actions">
    <button type="button" (click)="cancel()">Cancel</button>
    <button type="submit" [disabled]="loading || !fileContent">
      Import
    </button>
  </div>

</form>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\import-graph\import-graph.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { ImportGraphComponent } from './import-graph.component';

describe('ImportGraphComponent', () => {
  let component: ImportGraphComponent;
  let fixture: ComponentFixture<ImportGraphComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [ImportGraphComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(ImportGraphComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\schema-creation\import-graph\import-graph.component.ts
===============================
import { DialogRef } from '@angular/cdk/dialog';
import { Component, inject } from '@angular/core';
import { GraphStateService } from '../../../core/services/graph.service';
import { Graph, ImportGraph } from '../../../models/graph.model';
import { NgIf } from '@angular/common';
import { FormBuilder, FormGroup, FormsModule, ReactiveFormsModule } from '@angular/forms';
import { validateImportGraph } from '../../../core/validators/graph.import.validator';

@Component({
  selector: 'app-import-graph',
  imports: [NgIf,FormsModule,ReactiveFormsModule],
  templateUrl: './import-graph.component.html',
  styleUrl: './import-graph.component.css'
})
export class ImportGraphComponent {

  private dialogRef = inject(DialogRef<Graph>);
  private graphState = inject(GraphStateService);
  graphImport: FormGroup;
  fileContent?: ImportGraph;
  fileName?: string;

  error?: string;
  loading = false;

  constructor(private fb: FormBuilder) {
    this.graphImport = this.fb.group({});
  }

  onFileSelected(event: Event) {
    this.error = undefined;
    this.fileContent = undefined;

    const input = event.target as HTMLInputElement;
    const file = input.files?.[0];
    if (!file) return;

    if (!file.name.endsWith('.json')) {
      this.error = 'Only JSON files are allowed';
      return;
    }

    this.fileName = file.name;

    const reader = new FileReader();

    reader.onload = () => {
      try {
        const parsed = JSON.parse(reader.result as string) as ImportGraph;

        if (!parsed.title) {
          this.error = 'Graph title is missing in JSON file';
          return;
        }

        const errors = validateImportGraph(parsed);
        if (errors.length) {
          this.error = errors.join('\n');
          return;
        }

        this.fileContent = parsed;

      } catch {
        this.error = 'Invalid JSON format';
      }
    };

    reader.readAsText(file);
  }

  importGraph() {
    if (!this.fileContent) return;

    this.loading = true;
    this.graphState.importGraph(this.fileContent).subscribe({
      next: response => {
        this.graphState.setCurrentGraph(response.graph);
        this.dialogRef.close(response.graph);
      },
      error: err => {
        this.loading = false;
        this.error = err?.error?.message ?? 'Import failed';
      }
    });
  }

  cancel() {
    this.dialogRef.close();
  }

}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\sidebar\sidebar.component.css
===============================
.workspace-sidebar {
  width: 250px;
  background-color: #fff;
  border-right: 2px solid #e0e0e0;
  overflow-y: auto;
  padding: 2rem;
  position: relative;
  z-index: 100;
  height: 100%;
}

.sidebar-section {
  margin-bottom: 1.5rem;
  position: relative;
}

/* Graph Tag Side Dropdown */
.graph-tag-btn {
  position: relative;
}

.graph-dropdown {
  position: fixed;
  margin-left: -4px;
  background-color: #fff;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 220px;
  max-width: 280px;
  z-index: 10000;
  overflow: hidden;
}
.graph-dropdown::before{
  content: '';
  position: absolute;
  right: 100%;
  top: 0;
  bottom: 0;
  width: 20px;
}
.dropdown-header {
  padding: 0.75rem 1rem;
  background-color: #f8f9fa;
  border-bottom: 2px solid #e0e0e0;
  font-weight: 600;
  font-size: 0.9rem;
  color: #333;
}

.dropdown-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  width: 100%;
  padding: 0.75rem 1rem;
  background-color: #fff;
  border: none;
  border-bottom: 1px solid #f0f0f0;
  cursor: pointer;
  transition: background-color 0.2s;
  text-align: left;
  font-size: 0.9rem;
  color: #333;
}

.dropdown-item:hover {
  background-color: #f8f9fa;
}

.dropdown-item.add-new {
  color: #020617;
  font-weight: 600;
}

.dropdown-item.add-new:hover {
  background-color: #e3f2fd;
}

.graph-icon {
  font-size: 1.1rem;
}

.dropdown-divider {
  height: 2px;
  background-color: #e0e0e0;
  margin: 0.5rem 0;
}

.section-title {
  font-weight: 700;
  font-size: 1rem;
  color: #333;
  margin-bottom: 0.75rem;
  padding: 0.5rem;
  background-color: #f8f9fa;
  border-radius: 4px;
}

.section-subtitle {
  font-weight: 600;
  font-size: 0.9rem;
  color: #666;
  margin: 0.75rem 0 0.5rem 0;
  padding-left: 0.5rem;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 0.75rem;
  background-color: #f8f9fa;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  color: #393939;
  transition: background-color 0.2s;
  margin-bottom: 0.5rem;
}

.section-header:hover {
  background-color: #e9ecef;
}

.section-header.sub-header {
  background-color: #fff;
  font-weight: 500;
  font-size: 0.9rem;
  padding: 0.6rem;
}

.arrow {
  font-size: 0.8rem;
  color: #666;
  text-align: right;
}

.section-content {
  padding: 0.5rem 0.75rem;
  margin-bottom: 0.5rem;
}

.graph-select {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 0.9rem;
}

.graph-tag-btn {
  width: 100%;
  padding: 0.75rem;
  background-color: #f8f9fa;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  box-shadow: 0 4px rgba(59, 130, 246, 0.15);
  cursor: pointer;
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  width: 100%;
  padding: 10px 12px;
}

/* Left icon */
.graph-tag-btn .left {
  justify-self: start;
}

/* Centered title */
.graph-tag-btn .center {
  justify-self: center;
  font-weight: 500;
  white-space: wrap;
}

/* Right arrow */
.graph-tag-btn .right {
  justify-self: end;
}


.action-btn {
  display: block;
  width: 100%;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
  background-color: #fff;
  border: 1px solid #ddd;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.action-btn:hover {
  background-color: #020617;
  color: #fff;
  border-color: #020617;
}

/* Scrollbar Styling */
.workspace-sidebar::-webkit-scrollbar {
  width: 8px;
}

.workspace-sidebar::-webkit-scrollbar-track {
  background: #f1f1f1;
}

.workspace-sidebar::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

.workspace-sidebar::-webkit-scrollbar-thumb:hover {
  background: #555;
}


.algorithms {
  padding: 12px;
}

.algorithm-section {
  margin-bottom: 18px;
}

.algorithm-section {
  padding-bottom: 12px;
  margin-bottom: 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.algorithm-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.section-title {
  font-size: 13px;
  font-weight: 600;
  color: #041250;
  text-transform: uppercase;
  box-shadow: 0 3px rgba(59, 130, 246, 0.15);
  letter-spacing: 0.04em;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.section-title i {
  font-size: 14px;
}

/* Buttons */
.action-btnf {
  width: 100%;
  background: transparent;
  border: none;
  color: #333;
  padding: 8px 10px;
  margin-top: 7px;
  margin-bottom: 4px;
  border-radius: 6px;
  font-size: 14px;
  text-align: left;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  transition: background 0.15s ease, color 0.15s ease;
  text-wrap: unset;
}

.action-btnf i {
  font-size: 15px;
}

.action-btnf:hover {
  background: #020617;
  color:#e3f2fd
}

/* Active algorithm */
.action-btnf.active {
  background: rgba(59, 130, 246, 0.15);
  color: #041250;
}




===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\sidebar\sidebar.component.html
===============================
<aside class="workspace-sidebar">
  <!-- Graph Tag Section with Side Dropdown -->
  <div class="sidebar-section">
    <button
      class="graph-tag-btn"
      (mouseenter)="showDropdown($event)"
      (mouseleave)="hideDropdown()">
      <span class="left">
        <i class="fa-solid fa-diagram-project"></i>
      </span>

      <span class="center">
        {{ graphTitle$ | async }}
      </span>

      <span class="right">
        <i class="fa-solid fa-chevron-right"></i>
      </span>
    </button>

    <!-- Side Dropdown Menu -->
    <div
      class="graph-dropdown"
      *ngIf="showGraphDropdown"
      [style.top]="dropdownPosition.top"
      [style.left]="dropdownPosition.left"
      (mouseenter)="keepDropdownOpen()"
      (mouseleave)="hideDropdown()">
      <!-- Graf Ä°Ålemleri -->
      <button class="dropdown-item" (click)="openEditGraph()">
        <span class="graph-icon">âï¸</span>
        <span>Edit</span>
      </button>
      <button class="dropdown-item" (click)="export()">
        <span class="graph-icon">ð¤</span>
        <span>Export</span>
      </button>
      <button class="dropdown-item" (click)="openSummary()">
        <span class="graph-icon">â¹ï¸</span>
        <span>Summary </span>
      </button>
      <button class="dropdown-item" (click)="clearGraphFields()">
        <span class="graph-icon">ðï¸</span>
        <span>Clear</span>
      </button>

    </div>
  </div>

  <hr/>
  <!-- Algorithms Section -->
  <div class="sidebar-section algorithms">

    <div class="algorithm-section">
      <h4 class="section-title">
        <i class="bi bi-diagram-3"></i>
        Traversal
      </h4>

      <button
        class="action-btnf"
        *ngFor="let algo of getAlgorithmsByCategory(categories.Traversal)"
        (click)="selectAlgorithm(algo)"
        [class.active]="selectedAlgorithm?.key === algo.key">
        <i class="bi bi-arrow-repeat"></i>
        {{ algo.label }}
      </button>
    </div>
    <hr class="algo-separator" />

    <div class="algorithm-section">
      <h4 class="section-title">
        <i class="bi bi-signpost-2"></i>
        Pathfinding
      </h4>

      <button
        class="action-btnf"
        *ngFor="let algo of getAlgorithmsByCategory(categories.Pathfinding)"
        (click)="selectAlgorithm(algo)"
        [class.active]="selectedAlgorithm?.key === algo.key">
        <i class="bi bi-geo-alt"></i>
        {{ algo.label }}
      </button>
    </div>
    <hr class="algo-separator" />

    <div class="algorithm-section">
      <h4 class="section-title">
        <i class="bi bi-bar-chart"></i>
        Node Importance
      </h4>

      <button
        class="action-btnf"
        *ngFor="let algo of getAlgorithmsByCategory(categories.Centrality)"
        (click)="selectAlgorithm(algo)"
        [class.active]="selectedAlgorithm?.key === algo.key">
        <i class="bi bi-graph-up"></i>
        {{ algo.label }}
      </button>
    </div>
    <hr class="algo-separator" />

    <div class="algorithm-section">
      <h4 class="section-title">
        <i class="bi bi-collection"></i>
        Clustering
      </h4>

      <button
        class="action-btnf"
        *ngFor="let algo of getAlgorithmsByCategory(categories.Clustering)"
        (click)="selectAlgorithm(algo)"
        [class.active]="selectedAlgorithm?.key === algo.key">
        <i class="bi bi-palette"></i>
        {{ algo.label }}
      </button>
    </div>

  </div>
</aside>


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\sidebar\sidebar.component.spec.ts
===============================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { SidebarComponent } from './sidebar.component';

describe('SidebarComponent', () => {
  let component: SidebarComponent;
  let fixture: ComponentFixture<SidebarComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [SidebarComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(SidebarComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\app\workspace\sidebar\sidebar.component.ts
===============================
import { AlgorithmResultStorageService } from './../../core/storage/algorithm-result-storage.service';
import { GraphStateService } from './../../core/services/graph.service';
import { Component, OnInit, Output, inject, EventEmitter } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { map, Observable, take, filter, switchMap } from 'rxjs';
import { Dialog } from '@angular/cdk/dialog';
import { EditGraphCommand, EditGraphResponse, Graph, Guid } from '../../models/graph.model';
import { GraphsService } from '../../services/graphs.service';
import { ToastService } from '../../core/utils/toast-service.service';
import { EditGraphComponent } from '../modals/graphs/edit-graph/edit-graph.component';
import { GraphSummaryComponent } from '../modals/graphs/graph-summary/graph-summary.component';
import { AlgorithmCategory, AlgorithmDefinition, ALGORITHMS } from '../../core/utils/algorithm-definition';
import { AlgorithmsStateService } from '../../core/services/algorithms-state.service';
import { GraphrenderService } from '../../core/services/graphrender.service';
import { AlgorithmsService } from '../../services/algorithms.service';
import { buildComponentColorMap } from '../../core/utils/mapperHelper';
import { AlgorithmResult } from '../../models/algorith.model';

@Component({
  selector: 'app-sidebar',
  standalone: true,
  imports: [CommonModule, FormsModule],
  templateUrl: './sidebar.component.html',
  styleUrl: './sidebar.component.css'
})
export class SidebarComponent implements OnInit{



  // Graph dropdown state
  showGraphDropdown = false;
  dropdownPosition = { top: '0px', left: '0px' };
  private hideTimeout: any;

  graphTitle$!: Observable<string>;
  graphId$!:Observable<Guid>;
  private dialog = inject(Dialog);

  //Algoritms Section Variables
  categories = AlgorithmCategory;
  algorithms = ALGORITHMS;
  selectedAlgorithm? : AlgorithmDefinition;
  @Output() algorithmSelected = new EventEmitter<{
      key: string;
      params?: any;
    }>();

  //End of the section

  constructor(private graphStateService: GraphStateService,
    private graphApiService: GraphsService,
    private toast : ToastService,
    private renderer : GraphrenderService,
    private algorithmState: AlgorithmsStateService,
    private algorithmService : AlgorithmsService,
    private algorithmResultStorage: AlgorithmResultStorageService){
    }



  ngOnInit(): void {
    this.graphTitle$ = this.graphStateService.currentGraph$.pipe(
    map(graph => graph?.title ?? 'Default'));

    this.graphId$ = this.graphStateService.currentGraph$.pipe(
    map(graph => graph?.id?? 'undefined'))

  }





  // Modals Graph Actions
  openSummary(){
    this.graphStateService.getGraphSummary().subscribe({
    next: summary => {
      this.dialog.open(GraphSummaryComponent, {
        data: summary,
        panelClass: 'graph-summary-panel',
        disableClose: true
      });
    },
    error: () => {
      this.toast.error('Unable to load graph summary')
    }
  });
  }

  openEditGraph() {
    this.graphStateService.getCurrentGraph$().pipe(
      take(1),
      filter((g): g is Graph => !!g && !!g.id)
      ).subscribe({
      next: (currentGraph) => {
        const command: EditGraphCommand = {
          id: currentGraph.id,
          title: currentGraph.title,
          description: currentGraph.description ?? ''
        };

        const dialogRef = this.dialog.open(EditGraphComponent, {
          data: command,
          panelClass: 'edit-graph-panel',
          disableClose: true
        });
        dialogRef.closed.subscribe(response=>{
          if(response){
            this.toast.success( `Graph ${(response as EditGraphResponse).title}  successfully updated`);
            return;
          }
        })
      },
      error: () => this.toast.error('Unable to load Graph')
    });
  }


  export() {
    this.graphStateService.currentGraph$.pipe(
      take(1),
      filter((g): g is Graph => !!g),
      switchMap(graph =>
        this.graphApiService.exportGraph(graph.id)
      )
    ).subscribe({
      next: response => {
        const blob = new Blob(
          [JSON.stringify(response.graph, null, 2)],
          { type: 'application/json' }
        );

        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${response.graph.title}.json`;
        a.click();
        URL.revokeObjectURL(url);
      },
      error: () => this.toast.error('Unable to export graph')
    });
  }

  clearGraphFields() {
    this.graphStateService.currentGraph$.pipe(take(1))
    .subscribe(graph=>{
      this.graphStateService.resetGraph(graph?.id!)
      console.log("graph reset")
      this.toast.info(`Graph ${graph?.title} has been successfully cleared`)
    })
  }

  showDropdown(event: MouseEvent) {
    if (this.hideTimeout) {
      clearTimeout(this.hideTimeout);
    }
    const target = event.currentTarget as HTMLElement;
    const rect = target.getBoundingClientRect();
    this.dropdownPosition = {
      top: `${rect.top}px`,
      left: `${rect.right + 8}px`
    };
    this.showGraphDropdown = true;
  }

  hideDropdown() {
    this.hideTimeout = setTimeout(() => {
      this.showGraphDropdown = false;
    }, 200);
  }

  keepDropdownOpen() {
    if (this.hideTimeout) {
      clearTimeout(this.hideTimeout);
    }
  }
  //End Modal Actions Graphs


  //Algoritms Section Functions
  getAlgorithmsByCategory(category: AlgorithmCategory) {
      return this.algorithms.filter(a => a.category === category);
  }
  selectAlgorithm(algo: AlgorithmDefinition) {
    this.selectedAlgorithm = algo;
    console.log('selected algo:',this.selectedAlgorithm)
    if(this.selectedAlgorithm.key==='coloring'){
        this.runcoloring();
        return;
    }
    if(this.selectedAlgorithm.key==='degree-centrality'){
      this.runDegreeCentrality();
      return;
    }
    if(this.selectedAlgorithm.key==='connected-components'){
      this.runDetectionComponent()
      return;
    }
    if(this.selectedAlgorithm.key === 'community-detection'){
      this.runCommuntityDetection()
      return;
    }
    this.algorithmSelected.emit({key:this.selectedAlgorithm.key})
    this.algorithmState.setSelectedAlgorithm(algo);

  }

  runcoloring(){
    this.graphStateService.currentGraph$
        .pipe(take(1))
        .subscribe(graph => {
          if (!graph) return;

          console.log('Coloring is head to start')
          this.algorithmService
            .runWelshPowellColoring(graph.id)
            .subscribe(res => {
              console.log("algorithm service api is called")
              console.log("Result of WelshPowell:",res);
              const colorUsedPerNode =this.renderer.renderColoring(res.result.nodeWithColors);
              this.toast.runtime(`Algorithm execution took ${res.result.executionTime} ms `)
                this.saveAlgorithmResult(graph,'coloring',
                {'strategy':'Greedy-Coloring'},
                {...res.result, colors:colorUsedPerNode})
              console.log("rendering is done")

            });
          });
  }

  runDegreeCentrality(){
    this.graphStateService.currentGraph$
        .pipe(take(1))
        .subscribe(graph => {
          if (!graph) return;

          this.algorithmService
            .runDegreeCentrality(graph.id)
            .subscribe(res => {
              console.log("algorithm service api is called")
              console.log("Result of Degree Centrality:",res);
              this.renderer.renderDegreeCentrality(res.result.nodeDegrees,res.result.maxDegree);
              this.toast.runtime(`Algorithm execution took ${res.result.executionTime} ms `)
              this.saveAlgorithmResult(graph,'degree-centrality',
                {'strategy':'Degree Heuristic'},
                res.result)
              console.log("rendering is done")

            });
          });
  }

  runDetectionComponent(){
     this.graphStateService.currentGraph$
        .pipe(take(1))
        .subscribe(graph => {
          if (!graph) return;

          console.log('Detection of connected components is head to start')
          this.algorithmService
            .getConnectedComponents(graph.id)
            .subscribe(res => {
              console.log("Result of Detection:",res);
              this.renderer.renderConnectedComponents(buildComponentColorMap(res.result.components));
              this.toast.runtime(`Algorithm execution took ${res.result.executionTime} ms `)
              this.saveAlgorithmResult(graph,'connected-component-detection',
                {'strategy':'BFS strategy'},
                res.result)
              console.log("rendering is done")

            });
          });
  }
  runCommuntityDetection(){
    this.graphStateService.currentGraph$
        .pipe(take(1))
        .subscribe(graph => {
          if (!graph) return;

          console.log('Detection of community is head to start')
          this.algorithmService
            .runCommunityDetection(graph.id)
            .subscribe(res => {
              console.log("Result of Detection:",res);
              console.log('community count:',res.communityCount)
              this.renderer.renderCommunities(res.nodeToCommunity);
              this.toast.runtime(`Detected ${res.communityCount} communities in ${res.executionTime} ms`)
              this.saveAlgorithmResult(graph,'community-detection',
                {'strategy':'Peer-Pressure'},
                res)
              console.log("rendering is done")

            });
          });
  }
  //End of the section

  //Algorithm Result Storage
   private saveAlgorithmResult(graph:Graph,algorithm:string,parameter:any,result:any) : void{
      const algorithResult : AlgorithmResult ={
                  id:crypto.randomUUID(),
                  graphId:graph.id,
                  algorithm:algorithm,
                  createdAt:Date.now(),
                  parameters:{
                    ...parameter,
                    'range-nodes':graph.nodes.length,
                  },
                  result:result
                }
      this.algorithmResultStorage.save(algorithResult)
    }
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\environments\environment.ts
===============================
export const environment = {
    production : false,
    apiUrl :"http://localhost:5210/api/"
}


===============================
FILE: C:\Users\ABOUBACAR\source\repos\social-network-analysis\frontend\src\environments\environmet.prod.ts
===============================
export const environment = {
    production : true,
    apiUrl :"http://localhost:5210/api/"
}


