<div class="data-view">
  <div class="data-controls">
    <div class="data-buttons">
      <button
        [class.active]="dataFormat === 'json'"
        (click)="switchFormat('json')"
        class="format-btn">
        JSON
      </button>
      <button
        [class.active]="dataFormat === 'csv'"
        (click)="switchFormat('csv')"
        class="format-btn">
        CSV
      </button>
      <button
        [class.active]="dataFormat === 'table'"
        (click)="switchFormat('table')"
        class="format-btn">
        Table
      </button>

    </div>
    <div >

      <button
        [class.active]="dataFormat === 'top-five'"
        (click)="switchFormat('top-five')"
        class="format-btn top-five">
         <i class="fa-solid fa-circle-nodes me-2"></i>Top Five Node
      </button>
    </div>


  </div>

  <div class="data-content">
    <!-- JSON View -->
    <div *ngIf="dataFormat === 'json'" class="json-view">
      <pre class="json-pre" [innerHTML]="graph | prettyJson"></pre>
    </div>

    <!-- CSV View -->
    <div *ngIf="dataFormat === 'csv'" class="csv-view">

      <p class="text-warning">Graph</p>
      <pre class="csv-pre">{{graphCsv | prettyCsv}}</pre>
      <br>
      <p class="text-warning">Nodes</p>
      <pre class="csv-pre">{{nodesCsv | prettyCsv}}</pre>
      <br>
      <p class="text-warning">Edges</p>
      <pre class="csv-pre">{{edgesCsv | prettyCsv}}</pre>
    </div>

    <!-- Table View -->
    <div *ngIf="dataFormat === 'table'" class="table-grid">
      <div class="grid-nodes">
        <h3 class="table-title">Nodes</h3>
        <div class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Tag</th>
                <th>Activity</th>
                <th>Interaction</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let node of graph?.nodes">
                <td>{{ node.id }}</td>
                <td>{{ node.tag }}</td>
                <td>{{ node.activity }}</td>
                <td>{{ node.interaction }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- RIGHT: EDGES -->
      <div class="grid-edges">
        <h3 class="table-title">Edges</h3>
        <div class="table-wrapper">
          <table class="data-table edge-table">
            <thead>
              <tr>
                <th>Node A</th>
                <th>Node B</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let edge of graph?.edges">
                <td>{{ edge.nodeAId }}</td>
                <td>{{ edge.nodeBId }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
     <!-- Table View -->
    <div *ngIf="dataFormat === 'top-five'" class="data-card">
      <div class="table-wrapper">
        <table class="data-table mt-3">
          <thead>
            <tr>
              <th>#</th>
              <th>Node</th>
              <th>Degree</th>
              <th>Normalized Degree</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let node of topFiveNodeInDegree?.nodes; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ node.tag }}</td>
              <td>{{ node.degree }}</td>
              <td>{{ node.normalizeDegree | number:'1.3-3' }}</td>
            </tr>
          </tbody>

        </table>
      </div>

    </div>
  </div>
</div>
