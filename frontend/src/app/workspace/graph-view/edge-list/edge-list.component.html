<div class="edge-list-modal">
  <div class="modal-header">
    <h2>{{ mode === 'add' ? 'Edge Ekle' : 'Edge Sil' }}</h2>
    <button class="close-btn" (click)="close()" type="button">✕</button>
  </div>

  <div class="divider"></div>

  <!-- ADD MODE: Add Edge Form Card -->
  <div *ngIf="mode === 'add'">
    <div class="error" *ngIf="error && showAddForm">{{ error }}</div>
    <div class="card add-form-card" *ngIf="showAddForm">
    <div class="card-header">
      <h3>Yeni Edge Ekle</h3>
      <button class="close-form-btn" (click)="toggleAddForm()" type="button">✕</button>
    </div>
    <form [formGroup]="form" (ngSubmit)="addEdge()">
      <div class="form-row">
        <label>Node A</label>
        <select formControlName="nodeAId" (change)="form.patchValue({ nodeBId: null })">
          <option [ngValue]="null">Seçiniz</option>
          <option *ngFor="let n of getAvailableNodesForA()" [ngValue]="n.id">
            {{ n.tag }} (ID: {{ n.id }})
          </option>
        </select>
      </div>

      <div class="form-row">
        <label>Node B</label>
        <select formControlName="nodeBId">
          <option [ngValue]="null">Seçiniz</option>
          <option *ngFor="let n of getAvailableNodesForB()" [ngValue]="n.id">
            {{ n.tag }} (ID: {{ n.id }})
          </option>
        </select>
        <small class="form-hint" *ngIf="form.value.nodeAId && getAvailableNodesForB().length === 0">
          Bu node ile bağlanabilecek başka node kalmadı (tüm edge'ler zaten oluşturulmuş).
        </small>
      </div>

      <div class="error" *ngIf="error && showAddForm">{{ error }}</div>

      <div class="form-actions">
        <button type="button" (click)="close()" [disabled]="loading">İptal</button>
        <button type="submit" [disabled]="loading">{{ loading ? 'Ekleniyor...' : 'Ekle' }}</button>
      </div>
    </form>
    </div>
  </div>

  <!-- DELETE MODE: Edges List with Delete Buttons -->
  <div *ngIf="mode === 'delete'" class="edges-section">
    <div class="error" *ngIf="error">{{ error }}</div>
    <h3 class="section-title">Silinecek Edge'ler ({{ edges.length }})</h3>
    
    <div *ngIf="edges.length === 0" class="empty-state">
      <p>Henüz edge eklenmemiş</p>
      <small>Silinecek edge yok</small>
    </div>

    <div class="edges-grid" *ngIf="edges.length > 0">
      <div class="card edge-card" *ngFor="let item of edges">
        <div class="edge-content">
          <div class="edge-info">
            <div class="edge-connection">
              <span class="node-tag">{{ item.nodeA?.tag ?? '?' }}</span>
              <span class="arrow">→</span>
              <span class="node-tag">{{ item.nodeB?.tag ?? '?' }}</span>
            </div>
            <div class="edge-details">
              <span class="detail-item">ID: {{ item.edge.id }}</span>
              <span class="detail-item">Weight: {{ item.edge.weight }}</span>
            </div>
          </div>
          <button 
            class="btn-delete" 
            (click)="deleteEdge(item.edge.id)" 
            [disabled]="deletingEdgeId === item.edge.id"
            type="button">
            {{ deletingEdgeId === item.edge.id ? 'Siliniyor...' : 'Sil' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


